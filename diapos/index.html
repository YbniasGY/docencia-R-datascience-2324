<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.294">

  <meta name="author" content="Grado en Ciencia de Datos Aplicada • curso 2023-2024">
  <title>SOFTWARE II</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/data-science-2.jpeg" data-background-opacity="0.2" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">SOFTWARE II</h1>
  <p class="subtitle">Análisis de datos en R para Ciencia de Datos</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Grado en Ciencia de Datos Aplicada • curso 2023-2024 
</div>
</div>
</div>

</section>
<section>
<section id="bienvenidos-a-r" class="title-slide slide level1 center">
<h1>¡Bienvenidos a R!</h1>
<p><span style="color:#444442;"><strong>Dejad vuestras hojas de cálculo y Anacondas a un lado</strong></span></p>
</section>
<section id="buenas" class="slide level2">
<h2>¡Buenas!</h2>
<p><span class="hl-green"><strong>Correo</strong></span>: <strong><a href="mailto:javalv09@ucm.es" class="email">javalv09@ucm.es</a></strong>. <span class="hl-green"><strong>Despacho</strong></span>: 722 (3ª planta). <span class="hl-green"><strong>Tutorías</strong></span>: lunes (14:30-16:00), martes (12:00-13:00) y viernes (13:00-14:00).</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/me.jpeg" class="quarto-discovered-preview-image"></p>
</div><div class="column" style="width:70%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Javier Álvarez Liébana</strong></span>, de Carabanchel (Bajo).</p></li>
<li class="fragment"><p>Licenciado en Matemáticas (UCM). <span class="hl-yellow"><strong>Doctorado en estadística</strong></span> (UGR).</p></li>
<li class="fragment"><p>Encargado de la <span class="hl-yellow"><strong>visualización y análisis de datos covid</strong></span> del Principado de Asturias (2021-2022).</p></li>
<li class="fragment"><p>Miembro de la <span class="hl-yellow"><strong>Sociedad Española de Estadística e IO</strong></span> y la <span class="hl-yellow"><strong>Real Sociedad Matemática Española</strong></span>.</p></li>
</ul>
</div>
</div>
</div>
<div class="fragment">
<p>Actualmente, <span class="hl-yellow"><strong>investigador y docente en la Facultad de Estadística de la UCM</strong></span>. Divulgando por <a href="https://twitter.com/dadosdelaplace"><strong>Twitter</strong></a> e <a href="https://instagram.com/javieralvarezliebana"><strong>Instagram</strong></a></p>
</div>
</section>
<section id="objetivos" class="slide level2">
<h2>Objetivos</h2>
<div class="columns">
<div class="column" style="width:37%;">
<p><img data-src="https://assets-global.website-files.com/6092cb6b4ac959f39728dd26/6188a97fa499b5fbfe410417_target%20(1).png"></p>
</div><div class="column" style="width:63%;">
<div>
<ul>
<li class="fragment"><p>Quitarnos el <span class="hl-yellow"><strong>miedo a los errores en programación</strong></span> → a programar se aprende programando</p></li>
<li class="fragment"><p>Entender los <span class="hl-yellow"><strong>conceptos básicos de R</strong></span> desde cero → aprender a abstraer ideas y algoritmos</p></li>
<li class="fragment"><p>Utilidad de programar → flujos de trabajo <span class="hl-yellow"><strong>reproducibles</strong>, <strong>transparentes</strong></span> y mantenibles</p></li>
<li class="fragment"><p>Introducción al <span class="hl-yellow"><strong>análisis y preprocesamiento</strong></span> de datos → <code>{tidyverse}</code></p></li>
<li class="fragment"><p>Adquirir habilidades en la <span class="hl-yellow"><strong>visualización de datos</strong></span> → <code>{ggplot2}</code></p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="evaluación" class="slide level2">
<h2>Evaluación</h2>
<ul>
<li><span class="hl-yellow"><strong>Asistencia</strong></span>. La asistencia no será obligatoria pero si se <span class="hl-purple"><strong>valorará muy positivamente</strong></span> la participación en clase (nunca penalizando).</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Evaluación</strong></span>. A lo largo del curso se han planteado <span class="hl-purple"><strong>5 entregas individuales</strong></span>, así como una <span class="hl-purple"><strong>entrega final grupal</strong></span> (entre 2 y 4 personas) donde se deberá presentar el análisis realizado de un caso real.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Nota mínima</strong></span>. Para no ir al examen final se <span class="hl-purple"><strong>deberá obtener al menos un 4/10</strong></span> en cada entrega o una <span class="hl-purple"><strong>media ponderada superior al 6/10</strong></span>. Se deberá obtener además en la <span class="hl-purple"><strong>entrega grupal una nota superior a 6-6.5-7/10</strong></span> (según 2-3-4 personas)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Examen final</strong></span>. Cualquier alumno podrá presentarse a un examen final, siendo la valoración del mismo el 100% de su nota (perdiendo la evaluación continua).</li>
</ul>
</div>
</section>
<section id="planificación-i" class="slide level2">
<h2>Planificación I</h2>
<div class="column-screen-inset-right">
<div style="font-size:20px">
<table>
<thead>
<tr class="header">
<th style="text-align: center;">CLASE</th>
<th style="text-align: center;">SEMANA</th>
<th style="text-align: center;">FECHAS</th>
<th style="text-align: center;">TOPIC</th>
<th style="text-align: center;">SCRIPTS</th>
<th style="text-align: center;">EJ.</th>
<th style="text-align: center;">CASO PRÁCTICO</th>
<th style="text-align: center;">ENTREGA</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-1-primeros-pasos">1</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">12 sep</td>
<td style="text-align: center;">Primeros pasos en R</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material/scripts">📝</a></td>
<td style="text-align: center;"><a href="#/tu-turno">💻</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-2-primeros-datos">2</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">15 sep</td>
<td style="text-align: center;">Tipos básicos de datos y vectores</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material/scripts">📝</a></td>
<td style="text-align: center;"><a href="#/tu-turno-1">💻</a> <a href="#/tu-turno-2">💻</a></td>
<td style="text-align: center;"><a href="#/caso-práctico">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-3">3</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">19 sep</td>
<td style="text-align: center;">Primeras bases de datos</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material/scripts">📝</a></td>
<td style="text-align: center;"><a href="#/tu-turno-3">💻</a> <a href="#/tu-turno-matrices">💻</a> <a href="#/tu-turno-tibble">💻</a></td>
<td style="text-align: center;"><a href="#/caso-práctico-1">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-4">4</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">19 sep</td>
<td style="text-align: center;">Comunicar y elaborar informes/entregas</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material/scripts">📝</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/caso-práctico-3a">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/entrega-i">5</a></td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">26 sep</td>
<td style="text-align: center;">Entrega I</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/entrega-i">💻</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">🎯 5%</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-6">6</a></td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">29 sep</td>
<td style="text-align: center;">Tidydata: intro a tidyverse</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material/scripts">📝</a></td>
<td style="text-align: center;"><a href="#/tu-turno-6">💻</a></td>
<td style="text-align: center;"><a href="#/caso-práctico-6">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-7-importar">7</a></td>
<td style="text-align: center;">S4</td>
<td style="text-align: center;">3 oct</td>
<td style="text-align: center;">Importar y exportar archivos</td>
<td style="text-align: center;"><a href="">📝</a></td>
<td style="text-align: center;"><a href="#/tu-turno-7">💻</a></td>
<td style="text-align: center;"><a href="#/caso-práctico-7">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/entrega-ii">8</a></td>
<td style="text-align: center;">S4</td>
<td style="text-align: center;">6 oct</td>
<td style="text-align: center;">Entrega II</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/entrega-ii">💻</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">🎯 15%</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-9">9</a></td>
<td style="text-align: center;">S5</td>
<td style="text-align: center;">10 oct</td>
<td style="text-align: center;">Tidyverse: filas</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/tu-turno-9a">💻</a> <a href="#/tu-turno-9b">💻</a></td>
<td style="text-align: center;"><a href="#/caso-práctico-9">🐣</a></td>
<td style="text-align: center;">🎯</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-10">10</a></td>
<td style="text-align: center;">S6</td>
<td style="text-align: center;">17 oct</td>
<td style="text-align: center;">Tidyverse: filas y columnas</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/tu-turno-10">💻</a> <a href="#/tu-turno-10">💻</a></td>
<td style="text-align: center;"><a href="#/caso-10">🐣</a></td>
<td style="text-align: center;">🎯</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-11">11</a></td>
<td style="text-align: center;">S6</td>
<td style="text-align: center;">17 oct</td>
<td style="text-align: center;">Tidyverse: filas y columnas</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/tu-turno-11">💻</a> <a href="#/tu-turno-11b">💻</a></td>
<td style="text-align: center;"><a href="#/caso-11">🐣</a></td>
<td style="text-align: center;">🎯</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="materiales" class="slide level2">
<h2>Materiales</h2>
<ul>
<li><span class="hl-yellow"><strong>Diapositivas</strong></span>: las diapositivas que usaremos en el aula a lo largo del curso, estructuradas por clases, estarán disponibles y actualizadas en <strong><a href="https://javieralvarezliebana.es/docencia-R-datascience-2324/diapos" class="uri">https://javieralvarezliebana.es/docencia-R-datascience-2324/diapos</a></strong></li>
</ul>
<p>En el menú de las diapositivas (abajo a la izquierda) tienes una <span class="hl-yellow"><strong>opción para descargarlas en pdf</strong></span> en <code>Tools</code> (consejo: no lo hagas hasta el final del curso ya que irán modificándose)</p>
<p>&nbsp;</p>
<ul>
<li><p><span class="hl-yellow"><strong>Material</strong></span>: <a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/material"><strong>scripts de cada tema</strong></a> y materiales extras</p></li>
<li><p><span class="hl-yellow"><strong>Resúmenes de paquetes</strong></span>: <a href="https://github.com/dadosdelaplace/docencia-R-datascience-2324/tree/main/fichas%20paquetes"><strong>chuletas de los paquetes</strong></a> en formato .pdf</p></li>
</ul>
</section></section>
<section>
<section id="clase-1-primeros-pasos" class="title-slide slide level1 center">
<h1>Clase 1: primeros pasos</h1>
<p><span style="color:#444442;"><strong>Instalando R y RStudio. Primeros pasos. Scripts y proyectos</strong></span></p>
</section>
<section id="requisitos" class="slide level2">
<h2>Requisitos</h2>
<p>Para el curso los únicos requisitos serán:</p>
<ol type="1">
<li><p><span class="hl-yellow"><strong>Conexión a internet</strong></span> (para la descarga de algunos datos y paquetes).</p></li>
<li><p><span class="hl-yellow"><strong>Instalar R</strong></span><span class="fragment fade-in">: será nuestro lenguaje. La descarga la haremos (gratuitamente) desde <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></span></p></li>
</ol>
<div class="fragment fade-in">
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Instalar RStudio</strong></span> desde <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
</ol>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/cranR.jpg" width="420"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rstudio.jpg" width="420"></p>
</div>
</div>
</section>
<section class="slide level2">

<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gramatica.webp" width="400"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/word.jpg" width="470"></p>
</div>
</div>
<div class="fragment fade-in-then-out">
<p>Programaremos como escribimos (castellano, por ejemplo) → <code>R</code> es <span class="hl-yellow"><strong>lenguaje</strong></span></p>
</div>
<div class="fragment fade-up">
<ul>
<li>Necesitaremos una <span class="hl-yellow"><strong>gramática</strong></span> (<code>R</code>)</li>
</ul>
<div class="fragment fade-in">
<ul>
<li>Y un entorno, por ejemplo un <span class="hl-yellow"><strong>Word</strong></span> (<code>RStudio</code>), para escribirlo</li>
</ul>
</div>
</div>
</section>
<section id="instalación-de-r" class="slide level2">
<h2>Instalación de R</h2>
<p>El lenguaje <code>R</code> será nuestra <span class="hl-yellow"><strong>gramática y ortografía</strong></span> (nuestras reglas de juego)</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra en <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> y selecciona tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: para Mac basta con que hacer click en el <strong>archivo .pkg</strong>, y abrirlo una vez descargado. Para sistemas Windows, debemos clickar en <strong>install R for the first time</strong> y después en <strong>Download R for Windows</strong>. Una vez descargado, abrirlo como cualquier archivo de instalación.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: abrir el ejecutable de instalación.</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Siempre que tengas que descargar algo de CRAN (ya sea el propio R o un paquete), <span class="hl-orange"><strong>asegúrate de tener conexión a internet</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-operación" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Idea</strong></span>: a una variable llamada <code>a</code> le asignaremos el valor <code>1</code> (escribiremos el código de abajo en la consola y daremos «enter»)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="primera-operación-1" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: definiremos otra variable llamada <code>b</code> y le asignaremos el valor <code>2</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>En <code>R</code> usaremos <code>&lt;-</code> como una flecha: la variable a la izquierda de dicha flecha le asignamos el valor que hay a la derecha (por ejemplo, <code>a &lt;- 1</code>)</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-operación-2" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="270"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: haremos la suma <code>a + b</code> y nos devolverá su resultado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="instalación-de-r-studio" class="slide level2">
<h2>Instalación de R Studio</h2>
<p><code>RStudio</code> será el <span class="hl-yellow"><strong>Word</strong></span> que usaremos para escribir (lo que se conoce como un <span class="hl-yellow"><strong>IDE: entorno integrado de desarrollo</strong></span>).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra la <a href="https://posit.co/download/rstudio-desktop/">web oficial de RStudio</a> (ahora llamado Posit) y selecciona la descarga gratuita.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: selecciona el ejecutable que te aparezca acorde a tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: tras descargar el ejecutable, hay que abrirlo como otro cualquier otro y dejar que termine la instalación.</p></li>
</ul>
</div>
</section>
<section id="organización-de-rstudio" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Consola</strong></span>: es el nombre para llamar a la ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo código que antes (la suma de las variables) en ella. La consola será donde <strong>ejecutaremos órdenes y mostraremos resultados</strong>.</li>
</ul>

<img data-src="img/consola_rstudio.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-1" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Environment</strong></span>: la pantalla pequeña (puedes ajustar los márgenes con el ratón a tu gusto) que tenemos en la parte superior derecha. Nos mostrará las <strong>variables que tenemos definidas</strong>.</li>
</ul>

<img data-src="img/environment.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-2" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Panel multiusos</strong></span>: la ventana que tenemos en la parte inferior derecha no servirá para buscar <strong>ayuda de funciones</strong>, además de para <strong>visualizar gráficos</strong>.</li>
</ul>

<img data-src="img/multiusos.jpg" width="420" class="r-stretch"></section>
<section id="qué-es-r-por-qué-r" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>

<img data-src="img/meme_barco.jpg" class="r-stretch"></section>
<section id="qué-es-r-por-qué-r-1" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estadístico por excelencia</strong></span>, creado por y para estadísticos/as, con 5 ventajas fundamentales <span class="hl-red"><strong>frente a Excel</strong></span>:</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje de programación</strong></span>: la obviedad <span class="fragment fade-in">→ análisis</span><span class="hl-purple"><strong>replicables</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Gratuito</strong></span>: la filosofía de la comunidad de <code>R</code> es el compartir código bajo <strong>copyleft</strong> <span class="fragment fade-in">→</span><span class="hl-purple"><strong>uso ético de dinero público</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Software libre</strong></span>: no solo es gratis sino que permite acceder libremente a código ajeno, incluso al <strong>propio código fuente</strong> <span class="fragment fade-in">→</span><span class="hl-purple"><strong>flexibilidad y transparencia</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje modular</strong></span>: hemos instalado lo mínimo, pero existen códigos de otras personas que podemos reusar (casi 20 000 <span class="hl-yellow"><strong>paquetes</strong></span>) <span class="fragment fade-in">→</span><span class="hl-purple"><strong>ahorro de tiempo</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje de alto nivel</strong></span>: facilita la programación (como Python) <span class="fragment fade-in">→</span><span class="hl-purple"><strong>menor curva de aprendizaje</strong></span></p></li>
</ul>
</div>
</section>
<section id="qué-es-r-por-qué-r-2" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>

<img data-src="img/incel_excel.png" class="r-stretch"></section>
<section id="por-qué-programar" class="slide level2">
<h2>¿Por qué programar?</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Automatizar</strong></span> → te permitirá automatizar tareas recurrentes.</p></li>
<li><p><span class="hl-yellow"><strong>Replicabilidad</strong></span> → podrás replicar tu análisis siempre de la misma manera.</p></li>
<li><p><span class="hl-yellow"><strong>Flexibilidad</strong></span> → podrás adaptar el software a tus necesidades.</p></li>
<li><p><span class="hl-yellow"><strong>Transparencia</strong></span> → ser auditado por la comunidad.</p></li>
</ul>

<img data-src="img/the_general_problem.png" class="r-stretch"></section>
<section id="idea-fundamental-paquetes" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<p>Una de las ideas claves de <code>R</code> es el <span class="hl-yellow"><strong>uso de paquetes</strong></span>: códigos que otras personas han implementado para <strong>resolver un problema</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Instalación</strong></span>: descargamos los códigos de la web (necesitamos internet) → <span class="hl-purple"><strong>comprar un libro</strong></span>, solo una vez (por ordenador)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Carga</strong></span>: con el paquete descargado, indicamos qué paquetes queremos usar cada vez que abramos <code>RStudio</code> → <span class="hl-purple"><strong>traer el libro de la estantería</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="idea-fundamental-paquetes-1" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<p>Una vez instalado, hay dos manera de usar un paquete (traerlo de la estantería)</p>
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Paquete entero</strong></span>: con <code>library()</code>, usando el nombre del paquete sin comillas, cargamos en la sesión <span class="hl-purple"><strong>todo el libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Funciones concretas</strong></span> usando <code>paquete::funcion</code> le índicamos que solo queremos una <span class="hl-purple"><strong>página concreta de ese libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="te-vas-equivocar" class="slide level2">
<h2>Te vas equivocar</h2>
<p>Durante tu aprendizaje va a ser muy habitual que las cosas no salgan a la primera → <span class="hl-yellow"><strong>te vas equivocar</strong></span>. No solo será importante asumirlo sino que es <span class="hl-yellow"><strong>importante leer los mensajes de error</strong></span> para aprender de ellos.</p>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Mensajes de error</strong></span>: precedidos de <strong>«Error in…»</strong> y serán aquellos fallos que <span class="hl-red"><strong>impidan la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">"a"</span> <span class="sc">+</span> <span class="dv">1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a" + 1: argumento no-numérico para operador binario</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-orange"><strong>Mensajes de warning</strong></span>: precedidos de <strong>«Warning in…»</strong> son los (posibles) fallos más delicados ya que son incoherencias que <span class="hl-orange"><strong>no impiden la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Ejecuta la orden pero el resultado es NaN, **Not A Number**, un valor que no existe</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-1): Se han producido NaNs</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="scripts-documentos-.r" class="slide level2">
<h2>Scripts (documentos .R)</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/abrir_script.jpg" width="350"></p>
</div><div class="column" style="width:65%;">
<p>Un <span class="hl-yellow"><strong>script</strong></span> será el documento en el que programamos, nuestro archivo <code>.doc</code> (aquí con extensión <code>.R</code>) donde escribiremos las órdenes. Para <strong>abrir nuestro primero script</strong>, haz click en el menú en <code>File &lt; New File &lt; R Script</code>.</p>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Es importante <strong>no abusar de la consola</strong>: todo lo que no escribas en un script, cuando cierres, <span class="hl-orange"><strong>lo habrás perdido</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="ejecutando-el-primer-script" class="slide level2">
<h2>Ejecutando el primer script</h2>
<p>Ahora tenemos una <strong>cuarta ventana</strong>: la ventana donde <span class="hl-yellow"><strong>escribiremos nuestros códigos</strong></span>. ¿Cómo ejecutarlo?</p>
<div class="fragment">
<ol type="1">
<li><strong>Escribimos</strong> el código a ejecutar.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Guardamos</strong> el archivo .R haciendo click en <code>Save current document</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>El código no se ejecuta salvo que se lo indiquemos. Tenemos tres opciones:</li>
</ol>
<ul>
<li><span class="hl-yellow"><strong>Copiar y pegar</strong></span> en consola.</li>
<li><span class="hl-yellow"><strong>Seleccionar líneas</strong></span> y <code>Ctrl+Enter</code></li>
<li><span class="hl-yellow"><strong>Activar Source on save</strong></span> a la derecha de guardar: no solo guarda sino que ejecuta el código <strong>completo</strong>.</li>
</ul>
</div>
</section>
<section id="tu-turno" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Ejecuta tu primer script</strong>: crea un script de cero, programa lo indicado debajo y ejecútalo (de las 3 maneras posibles)</span></p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-1-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-1-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-1-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-1-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>📝 Define una variable de nombre <code>a</code> y cuyo valor sea -1</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>a <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2">
<p>📝 Añade debajo otra línea para definir una variable <code>b</code> con el valor 5. Tras ello múltiplica ambas variables</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="sc">*</span> b <span class="co"># sin guardar</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>multiplicacion <span class="ot">&lt;-</span> a <span class="sc">*</span> b <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3">
<p>📝 Modifica el código inferior para definir dos variables c y d, con valores 3 y -1. Tras ello divide las variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor 3</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>d <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>d <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>c <span class="sc">/</span> d <span class="co"># sin guardar</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>division <span class="ot">&lt;-</span> c <span class="sc">/</span> d <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4">
<p>📝 Asigna un valor positivo a <code>x</code> y calcula su raíz cuadrada; asigna otro negativo <code>y</code> y calcula su valor absoluto con la función <code>abs()</code>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="fu">abs</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-5">
<p>📝 Usando la variable <code>x</code> ya definida, completa/modifica el código inferior para guardar en una nueva variable <code>z</code> el resultado guardado en <code>x</code> menos 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>z <span class="ot">&lt;-</span> ? <span class="sc">-</span> ? <span class="co"># completa el código</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="dv">5</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>Comandos como <code>sqrt()</code>, <code>abs()</code> o <code>max()</code> son lo que llamamos <span class="hl-purple"><strong>funciones</strong></span>: líneas de código que hemos «encapsulado» bajo un nombre, y dado unos argumentos de entrada, ejecuta las órdenes (una especie de atajo).</p>
</div>
</div>
</div>
</section>
<section id="sé-organizado-proyectos" class="slide level2">
<h2>Sé organizado: proyectos</h2>
<p>De la misma manera que en el ordenador solemos trabajar de manera <span class="hl-yellow"><strong>ordenada por carpetas</strong></span>, en <code>RStudio</code> podemos hacer lo mismo para trabajar de <span class="hl-yellow"><strong>manera eficaz creando proyectos</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<p>Un <span class="hl-yellow"><strong>proyecto será una «carpeta»</strong></span> dentro de <code>RStudio</code>, de manera que nuestro directorio raíz automáticamente será la propia carpeta de proyecto (pudiendo pasar de un proyecto a otro con el menu superior derecho).</p>
<p>Podemos crear uno en una carpeta nueva o en una carpeta ya existente.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/rstudio_proyectos.png" width="370"></p>
</div>
</div>
</div>
</section>
<section id="filosofía-de-la-celda-a-la-tabla" class="slide level2">
<h2>Filosofía: de la CELDA a la TABLA</h2>
<p>¿Qué <span class="hl-yellow"><strong>tipo de dato</strong></span> podemos tener en cada celda de una <strong>tabla</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch quarto-figure-center"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Celda</strong></span>: dato individual de un tipo concreto.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenación</strong> de valores del mismo tipo (<span class="hl-purple"><strong>vectores</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matriz</strong></span>: concatenación de variables del <strong>mismo tipo y longitud</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Tabla</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo pero igual longitud</strong></span></li>
<li class="fragment"><span class="hl-yellow"><strong>Lista</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo y distinta longitud</strong></span></li>
</ul>
</div>
</section></section>
<section>
<section id="clase-2-primeros-datos" class="title-slide slide level1 center">
<h1>Clase 2: primeros datos y vectores</h1>
<p><span style="color:#444442;"><strong>¿Qué tipos de celdas (datos) existen? Concatenando celdas: vectores</strong></span></p>
</section>
<section id="de-la-celda-a-la-tabla" class="slide level2">
<h2>De la CELDA a la TABLA</h2>
<p>¿Qué <span class="hl-yellow"><strong>tipo de dato</strong></span> podemos tener en cada celda de una <strong>tabla</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch quarto-figure-center"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Celda</strong></span>: dato individual de un tipo concreto.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenación</strong> de valores del mismo tipo (<span class="hl-purple"><strong>vectores</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matriz</strong></span>: concatenación de variables del <strong>mismo tipo y longitud</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Tabla</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo pero igual longitud</strong></span></li>
<li class="fragment"><span class="hl-yellow"><strong>Lista</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo y distinta longitud</strong></span></li>
</ul>
</div>
</section>
<section id="celdas-tipos-de-datos" class="slide level2">
<h2>Celdas: tipos de datos</h2>
<p>¿Existen <span class="hl-yellow"><strong>variables más allá de los números</strong></span>?</p>
<div class="fragment">
<p>Piensa por ejemplo en los datos guardados de una persona:</p>
<div class="fragment fade-up">
<ul>
<li>La edad o el peso será un <span class="hl-yellow"><strong>número</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su nombre será una cadena de <span class="hl-yellow"><strong>texto (string o char)</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>A la pregunta «¿estás matriculado en la Facultad?» la respuesta será lo que llamamos una <span class="hl-yellow"><strong>variable lógica</strong></span> (<code>TRUE</code> si está matriculado o <code>FALSE</code> en otro caso).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>matriculado <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su fecha de nacimiento será precisamente eso, una <span class="hl-yellow"><strong>fecha</strong></span>.</li>
</ul>
</div>
</div>
</section>
<section id="variables-numéricas" class="slide level2">
<h2>Variables numéricas</h2>
<p>El dato más sencillo (ya lo hemos usado) serán las <span class="hl-yellow"><strong>variables numéricas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para saber el tipo de una variable tenemos la función <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Además de los números «normales» tendremos el <span class="hl-yellow"><strong>valor infinito</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Y valores que <span class="hl-yellow"><strong>no son números reales</strong></span> <em>not a number</em> (indeterminaciones, complejos, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-numéricas-1" class="slide level2">
<h2>Variables numéricas</h2>
<p>Con las variables numéricas podemos realizar las <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> de una calculadora: sumar (<code>+</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<div class="fragment">
<p>…raíz cuadrada (<code>sqrt()</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">sqrt</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.236068</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>… potencias (<code>^2</code>, <code>^3</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>…valor absoluto (<code>abs()</code>), etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">abs</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-texto" class="slide level2">
<h2>Variables de texto</h2>
<p>Imagina que además de la edad de una persona queremos guardar su nombre: ahora la variable será de tipo <code>character</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javier"</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="fu">class</span>(nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>cadenas de texto</strong></span> son un tipo con el que obviamente <span class="hl-red"><strong>no podremos hacer operaciones aritméticas</strong></span> (sí otras operaciones como pegar o localizar patrones).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>nombre <span class="sc">+</span> <span class="dv">1</span> <span class="co"># error al sumar número a texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in nombre + 1: argumento no-numérico para operador binario</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recuerda que…</strong></p>
</div>
<div class="callout-content">
<p>Las variables de tipo texto (character o string) van <span class="hl-orange"><strong>SIEMPRE entre comillas</strong></span>: no es lo mismo <code>TRUE</code> (valor lógico, binario) que <code>"TRUE"</code> (texto).</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-función-paste" class="slide level2">
<h2>Primera función: paste</h2>
<p>En <code>R</code> llamaremos <span class="hl-yellow"><strong>función</strong></span> a un trozo de <span class="hl-yellow"><strong>código encapsulado</strong></span> bajo un nombre, y que depende de unos <span class="hl-yellow"><strong>argumentos</strong></span> de entrada. Nuestra primera función será <code>paste()</code>: dadas dos cadenas de texto nos permite pegarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
</div>
<div class="fragment">
<p>Fíjate que <span class="hl-yellow"><strong>por defecto</strong></span> nos pega las cadenas con un espacio, pero podemos añadir un <span class="hl-yellow"><strong>argumento opcional</strong></span> para indicarle el separador (en <code>sep = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>, <span class="at">sep =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier*Álvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-función-paste-1" class="slide level2">
<h2>Primera función: paste</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/paste_help.jpg"></p>
</div><div class="column" style="width:50%;">
<p>¿Cómo saber <span class="hl-yellow"><strong>qué argumentos necesita una función</strong></span>? Escribiendo en consola <code>? paste</code> te aparecerá una <span class="hl-yellow"><strong>ayuda</strong></span> en el panel multiusos.</p>
<p>En dicha ayuda podrás ver en su cabecera que argumentos ya tiene <span class="hl-yellow"><strong>asignados por defecto</strong></span> la función</p>
</div>
</div>
<div class="fragment">
<p>Existe una función similar llamada <code>paste0()</code> que pega por defecto con <code>sep = ""</code> (sin nada).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">paste0</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JavierÁlvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="funciones-argumentos-por-defecto" class="slide level2">
<h2>Funciones: argumentos por defecto</h2>
<p>Es muy importante entender el concepto de <span class="hl-yellow"><strong>argumento por defecto de una función</strong></span> en <code>R</code>: es un valor que la función usa pero a veces podemos no ver porque <span class="hl-yellow"><strong>ya tiene un valor asignado</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># Hacen lo mismo</span></span>
<span id="cb49-2"><a href="#cb49-2"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>El operador <code>=</code> lo <span class="hl-yellow"><strong>reservaremos para asignar argumentos</strong></span> dentro de funciones. Para todas las demás asignaciones usaremos <code>&lt;-</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="primer-paquete-glue" class="slide level2">
<h2>Primer paquete: glue</h2>
<p>Una forma más intuitiva de trabajar con textos es usar el paquete <code>{glue}</code>: lo primero que haremos será «comprar el libro» (si nunca lo hemos hecho). Tras ello <span class="hl-yellow"><strong>cargamos el paquete</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">install.packages</span>(<span class="st">"glue"</span>) <span class="co"># solo la primra vez</span></span>
<span id="cb53-2"><a href="#cb53-2"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con la función <code>glue()</code> de dicho paquete podemos usar <span class="hl-yellow"><strong>variables dentro de cadenas de texto</strong></span>. Por ejemplo, «la edad es de … años», donde la edad está guardada en una variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad} años"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 33 años</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dentro de las llaves también podemos <span class="hl-yellow"><strong>ejecutar operaciones</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>unidades <span class="ot">&lt;-</span> <span class="st">"días"</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad * 365} {unidades}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 12045 días</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-lógicas" class="slide level2">
<h2>Variables lógicas</h2>
<p>Otro tipo fundamental serán las <span class="hl-yellow"><strong>variables lógicas o binarias</strong></span> (<strong>dos valores</strong>):</p>
<ul>
<li><code>TRUE</code>: <span class="hl-yellow"><strong>verdadero</strong></span> guardado internamente como un 1.</li>
<li><code>FALSE</code>: <span class="hl-yellow"><strong>falso</strong></span> guardado internamente como un 0.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>soltero <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># ¿Es soltero? --&gt; SÍ</span></span>
<span id="cb58-2"><a href="#cb58-2"></a><span class="fu">class</span>(soltero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que internamente están guardados como variables binarias, podemos <span class="hl-yellow"><strong>realizar operaciones aritméticas</strong></span> con ellas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="cn">FALSE</span> <span class="sc">-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-lógicas-1" class="slide level2">
<h2>Variables lógicas</h2>
<p>Como veremos en breve, las variables lógicas en realidad puede tomar un tercer valor: <code>NA</code> o <span class="hl-yellow"><strong>dato ausente</strong></span>, representando las siglas de <em>not available</em>, y será muy habitual encontrarlo dentro de una base de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>ausente <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>ausente <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las variables lógicas <span class="hl-red"><strong>NO son variables de texto</strong></span>: <code>"TRUE"</code> es un texto, <code>TRUE</code> es un valor lógico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="st">"TRUE"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "TRUE" + 1: argumento no-numérico para operador binario</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Los valores lógicos suelen ser resultado de <span class="hl-yellow"><strong>evaluar condiciones lógicas</strong></span>. Por ejemplo, imaginemos que queremos <span class="hl-yellow"><strong>comprobar</strong></span> si una persona se llama Javi.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"María"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con el <span class="hl-yellow"><strong>operador lógico</strong></span> <code>==</code> preguntamos sí lo que tenemos guardado a la izquierda es igual que lo que tenemos a la derecha: es una <span class="hl-yellow"><strong>pregunta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Con su opuesto <code>!=</code> preguntamos si es distinto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>nombre <span class="sc">!=</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>No es lo mismo <code>&lt;-</code> (<span class="hl-yellow"><strong>asignación</strong></span>) que <code>==</code> (estamos <span class="hl-yellow"><strong>preguntando</strong></span>, es una comparación lógica).</p>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas-1" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Además de las comparaciones «igual a» frente «distinto», también comparaciones de orden como <code>&lt;, &lt;=, &gt; o &gt;=</code>.</p>
<p><strong>¿Tiene la persona menos de 32 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">34</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>edad <span class="sc">&lt;</span> <span class="dv">32</span> <span class="co"># ¿Es la edad menor de 32 años?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="fragment">
<p><strong>¿La edad es mayor o igual que 38 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>edad <span class="sc">&gt;=</span> <span class="dv">38</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong>¿El nombre guardado es Javi?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha" class="slide level2">
<h2>Variables de fecha</h2>
<p>Un tipo de datos muy especial: los <span class="hl-yellow"><strong>datos de tipo fecha</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>fecha_char <span class="ot">&lt;-</span> <span class="st">"2021-04-21"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Parece una simple cadena de texto pero <span class="hl-yellow"><strong>debería representar un instante en el tiempo</strong></span>. ¿Qué debería suceder si <span class="hl-purple"><strong>sumamos un 1 a una fecha</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: argumento no-numérico para operador binario</code></pre>
</div>
</div>
<p>Las fechas <span class="hl-red"><strong>NO pueden ser texto</strong></span>: debemos convertir la cadena de texto a fecha.</p>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Para trabajar con fechas usaremos el paquete <code>{lubridate}</code>, que deberemos instalar antes de poder usarlo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="fu">install.packages</span>(<span class="st">"lubridate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="variables-de-fecha-1" class="slide level2">
<h2>Variables de fecha</h2>
<p>Una vez instalado, de todos los paquetes (libros) que tenemos, le indicaremos que nos cargue ese concretamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">library</span>(lubridate) <span class="co"># instala si no lo has hecho</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>convertir a tipo fecha</strong></span> usaremos la función <code>as_date()</code> del paquete <code>{lubridate}</code></p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="co"># ¡no es una fecha, es un texto!</span></span>
<span id="cb86-2"><a href="#cb86-2"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: argumento no-numérico para operador binario</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="fu">class</span>(fecha_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"2023-03-28"</span>)</span>
<span id="cb90-2"><a href="#cb90-2"></a>fecha <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="fu">class</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-2" class="slide level2">
<h2>Variables de fecha</h2>
<p>En dicho paquete tenemos funciones muy útiles para <span class="hl-yellow"><strong>manejar fechas</strong></span>:</p>
<ul>
<li>Con <code>today()</code> podemos obtener directamente la <span class="hl-purple"><strong>fecha actual</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-10-20"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>now()</code> podemos obtener la <span class="hl-purple"><strong>fecha y hora actual</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-10-20 10:36:28 CEST"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>year()</code>, <code>month()</code> o <code>day()</code> podemos <span class="hl-purple"><strong>extraer el año, mes y día</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">today</span>()</span>
<span id="cb98-2"><a href="#cb98-2"></a><span class="fu">year</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2023</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="fu">month</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
</div>
</section>
<section id="resúmenes-de-paquetes" class="slide level2">
<h2>Resúmenes de paquetes</h2>

<img data-src="img/lubridate.png" class="r-stretch"><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Amplia contenido</strong></p>
</div>
<div class="callout-content">
<p>Tienes un resumen en pdf de los paquetes más importantes en la <span class="hl-green"><strong>carpeta correspondiente en el campus</strong></span></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-2-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-2-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-2-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-2-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-2-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>📝 Define una variable que guarde tu edad (llamada <code>edad</code>) y otra con tu nombre (llamada <code>nombre</code>)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb102-2"><a href="#cb102-2"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2">
<p>📝 Comprueba si NO tienes 60 años o si te llamas “Ornitorrinco” (debes obtener variables lógicas)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>edad <span class="sc">!=</span> <span class="dv">60</span> <span class="co"># distinto de</span></span>
<span id="cb103-2"><a href="#cb103-2"></a>nombre <span class="sc">==</span> <span class="st">"Ornitorrinco"</span> <span class="co"># igual a</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-3">
<p>📝 Define otra variable llamada <code>hermanos</code> que responda la pregunta «¿tienes hermanos?» y otra variable que almacene tu fecha de nacimiento (llamada <code>fecha_nacimiento</code>).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a>hermanos <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb104-2"><a href="#cb104-2"></a></span>
<span id="cb104-3"><a href="#cb104-3"></a><span class="fu">library</span>(lubridate) <span class="co"># sino lo tenías ya cargado</span></span>
<span id="cb104-4"><a href="#cb104-4"></a>fecha_nacimiento <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"1989-09-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-4">
<p>📝 Define otra variable con tus apellidos (llamada <code>apellidos</code>) y usa <code>glue()</code> para tener, en una sola variable llamada <code>nombre_completo</code>, tu nombre y apellidos separando nombre y apellido por una coma</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a>apellidos <span class="ot">&lt;-</span> <span class="st">"Álvarez Liébana"</span></span>
<span id="cb105-2"><a href="#cb105-2"></a><span class="fu">glue</span>(<span class="st">"{nombre}, {apellidos}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-5">
<p>📝 De <code>fecha_nacimiento</code> extrae el mes.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="fu">month</span>(fecha_nacimiento)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-6">
<p>📝 Calcula los días que han pasado desde la fecha de tu nacimiento hasta hoy (con la fecha de nacimiento definida en el ejercicio 3).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="fu">today</span>() <span class="sc">-</span> fecha_nacimiento</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar" class="slide level2">
<h2>Vectores: concatenar</h2>
<p>Cuando trabajamos con datos normalmente tendremos <span class="hl-yellow"><strong>columnas que representan variables</strong></span>: llamaremos <span class="hl-yellow"><strong>vectores</strong></span> a una <span class="hl-purple"><strong>concatenación</strong></span> de celdas (valores) del <span class="hl-purple"><strong>mismo tipo</strong></span> (lo que sería una columna de una tabla).</p>
<div class="fragment">
<p>La forma más sencilla es con el comando <code>c()</code> (c de <strong>concatenar</strong>), y basta con introducir sus <strong>elementos entre paréntesis y separados por comas</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">27</span>, <span class="dv">60</span>, <span class="dv">61</span>)</span>
<span id="cb108-2"><a href="#cb108-2"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Un número individual <code>x &lt;- 1</code> (o bien <code>x &lt;- c(1)</code>) es en realidad un <strong>vector de longitud uno</strong> –&gt; todo lo que sepamos <span class="hl-green"><strong>hacer con un número podemos hacerlo con un vector de ellos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar-1" class="slide level2">
<h2>Vectores: concatenar</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/edades_environment.jpg"></p>
</div><div class="column" style="width:60%;">
<p>Como ves ahora en el <code>environment</code> tenemos una <strong>colección de elementos</strong> guardada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>La <span class="hl-yellow"><strong>longitud de un vector</strong></span> se puede calcular con <code>length()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a><span class="fu">length</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>También podemos <span class="hl-yellow"><strong>concatenar vectores</strong></span> entre sí (los repite uno tras otro)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a><span class="fu">c</span>(edades, edades, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61 32 27 60 61  8</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>El vector más famoso será el de tipo numérico, y en concreto, las conocidas como <span class="hl-yellow"><strong>secuencias numéricas</strong></span> (por ejemplo, los días del mes), usadas para, entre otras cosas, indexar bucles.</p>
<div class="fragment">
<p>El comando <code>seq(inicio, fin)</code> nos permite crear una <span class="hl-yellow"><strong>secuencia numérica</strong></span> desde un elemento inicial hasta uno final, <span class="hl-purple"><strong>avanzando de uno en uno</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Fíjate que si hacemos eso con <span class="hl-red"><strong>caracteres no podremos hacerlo</strong></span> ya que no hay un orden a priori entre textos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a><span class="st">"a"</span><span class="sc">:</span><span class="st">"z"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a":"z": Argumento NA/NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas-1" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>Un atajo es el comando <code>1:n</code>, que nos devuelve lo mismo que <code>seq(1, n)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7</code></pre>
</div>
</div>
<p>Si el elemento inicial es mayor que el final, entenderá que la secuencia es <span class="hl-purple"><strong>en orden decreciente</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1"></a><span class="dv">7</span><span class="sc">:-</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  6  5  4  3  2  1  0 -1 -2 -3</code></pre>
</div>
</div>
<div class="fragment">
<p>También podemos definir <span class="hl-yellow"><strong>otro tipo de distancia</strong></span> (paso) entre consecutivos con el argumento <code>by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="co"># secuencia desde 1 a 7 de 0.5 en 0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas-2" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>Otras veces nos interesará definir una <span class="hl-yellow"><strong>secuencia con una longitud concreta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">7</span>) <span class="co"># secuencia desde 1 a 50 de longitud 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.000000  9.166667 17.333333 25.500000 33.666667 41.833333 50.000000</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso puede nos interese generar un vector de <span class="hl-yellow"><strong>n elementos repetidos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>) <span class="co"># vector de 7 ceros</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dado que internamente son guardados como números también podremos hacer esto con <span class="hl-yellow"><strong>fechas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a><span class="fu">seq</span>(<span class="fu">as_date</span>(<span class="st">"2023-09-01"</span>), <span class="fu">as_date</span>(<span class="st">"2023-09-10"</span>), <span class="at">by =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2023-09-01" "2023-09-02" "2023-09-03" "2023-09-04" "2023-09-05"
 [6] "2023-09-06" "2023-09-07" "2023-09-08" "2023-09-09" "2023-09-10"</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>Un vector es una <strong>concatenación</strong> de elementos del <span class="hl-yellow"><strong>mismo tipo</strong></span>, pero no tienen porque ser necesariamente números. Vamos a crear una frase de ejemplo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1"></a>frase <span class="ot">&lt;-</span> <span class="st">"Me llamo Javi"</span></span>
<span id="cb132-2"><a href="#cb132-2"></a>frase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me llamo Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1"></a><span class="fu">length</span>(frase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="fragment">
<p>En el caso anterior no era un vector, era un solo elemento de texto. Para crear un vector debemos usar de nuevo <code>c()</code> y separar elementos entre comas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javi"</span>)</span>
<span id="cb136-2"><a href="#cb136-2"></a>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me"    "llamo" "Javi" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1"></a><span class="fu">length</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres-1" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>¿Qué sucederá si <span class="hl-yellow"><strong>concatenamos elementos de diferente tipo</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">"javi"</span>, <span class="st">"3"</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"    "2"    "javi" "3"    "TRUE"</code></pre>
</div>
</div>
<p>Fíjate que como todos tienen que ser del mismo tipo, lo que hace <code>R</code> es <span class="hl-yellow"><strong>convertir</strong></span> todo a texto, violando la <span class="hl-red"><strong>integridad del dato</strong></span></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 1 0</code></pre>
</div>
</div>
<p>Es importante entender que los valores lógicos en realidad están <span class="hl-yellow"><strong>almacenados internamente como 0/1</strong></span></p>
</div>
</section>
<section id="operaciones-con-vectores" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Con los vectores numéricos podemos hacer las mismas <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> que con los números → un <span class="hl-purple"><strong>número es un vector</strong></span> (de longitud uno)</p>
<div class="fragment">
<p>¿Qué sucederá si <span class="hl-yellow"><strong>sumamos o restamos un valor</strong></span> a un vector?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb144-2"><a href="#cb144-2"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1"></a>x <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14</code></pre>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Salvo que indiquemos lo contrario, en <code>R</code> las operaciones con vectores son siempre <span class="hl-orange"><strong>elemento a elemento</strong></span></p>
</div>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-1" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Los vectores también pueden interactuar entre ellos, así que podemos definir, por ejemplo, <span class="hl-yellow"><strong>sumas de vectores</strong></span> (elemento a elemento)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb148-2"><a href="#cb148-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb148-3"><a href="#cb148-3"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que la operación (por ejemplo, una suma) se realiza elemento a elemento, ¿qué sucederá si <span class="hl-yellow"><strong>sumamos dos vectores de distinta longitud</strong></span>?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb150-2"><a href="#cb150-2"></a>x <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11  9</code></pre>
</div>
</div>
<p>Lo que hace es <span class="hl-yellow"><strong>reciclar elementos</strong></span>: si tiene un vector de 4 elementos y sumamos otro de 3 elementos, lo que hará será reciclar del vector con menor longitud.</p>
</div>
</section>
<section id="operaciones-con-vectores-2" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Una operación muy habitual es <span class="hl-yellow"><strong>preguntar a los datos</strong></span> mediante el uso de <span class="hl-purple"><strong>condiciones lógicas</strong></span>. Por ejemplo, si definimos un vector de temperaturas…</p>
<p><span class="hl-yellow"><strong>¿Qué días hizo menos de 22 grados?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">15</span>, <span class="dv">29</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a>x <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Nos devolverá un <span class="hl-yellow"><strong>vector lógico</strong></span>, en función de si <strong>cada elemento</strong> cumple o no la condición pedida (de <strong>igual longitud</strong> que el vector preguntado)</p>
</div>
<div class="fragment">
<p>Si tuviéramos un <span class="hl-yellow"><strong>dato ausente</strong></span> (por error del aparato ese día), la condición evaluada también sería <code>NA</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">29</span>, <span class="dv">10</span>)</span>
<span id="cb155-2"><a href="#cb155-2"></a>y <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE    NA FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-3" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Las <span class="hl-yellow"><strong>condiciones lógicas pueden ser combinadas</strong></span> de dos maneras:</p>
<ul>
<li><span class="hl-yellow"><strong>Intersección</strong></span>: <span class="hl-purple"><strong>todas</strong></span> las condiciones concatenadas se deben cumplir (<span class="hl-purple"><strong>conjunción y</strong></span> con <code>&amp;</code>) para devolver un <code>TRUE</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Unión</strong></span>: basta con que <span class="hl-purple"><strong>al menos una</strong></span> se cumpla (<span class="hl-purple"><strong>conjunción o</strong></span> con <code>|</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p>Con <code>any()</code> y <code>all()</code> podemos comprobar que <span class="hl-yellow"><strong>todos los elementos</strong></span> cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-4" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otra operación muy habitual es la de <span class="hl-yellow"><strong>acceder a elementos</strong></span>. La forma más sencilla es usar el operador <code>[i]</code> (acceder al elemento i-ésimo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">33</span>, <span class="cn">NA</span>, <span class="dv">61</span>) </span>
<span id="cb165-2"><a href="#cb165-2"></a>edades[<span class="dv">3</span>] <span class="co"># accedemos a la edad de la tercera persona </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que un número no es más que un vector de longitud uno, esta operación también la podemos aplicar usando un <span class="hl-yellow"><strong>vector de índices a seleccionar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"qué"</span>, <span class="st">"tal"</span>, <span class="st">"estás"</span>, <span class="st">"?"</span>)</span>
<span id="cb167-2"><a href="#cb167-2"></a>y[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># primer, segundo y cuarto elemento</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "estás"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Para acceder al último, sin preocuparnos de cuál es, podemos pasarle como índice la propia longitud <code>x[length(x)]</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-5" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras veces no querremos seleccionar sino <span class="hl-yellow"><strong>eliminar algunos elementos</strong></span>. Deberemos repetir la misma operación pero con el signo - delante: el operador <code>[-i]</code> no selecciona el elemento i-ésimo del vector sino que lo «des-selecciona»</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "tal"   "estás" "?"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a>y[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "tal"   "estás" "?"    </code></pre>
</div>
</div>
<div class="fragment">
<p>En muchas ocasiones los queremos <span class="hl-yellow"><strong>seleccionar o eliminar en base a condiciones lógicas</strong></span>, en función de los valores, así que pasaremos como índice la propia condición (recuerda, <code>x &lt; 2</code> nos devuelve un vector lógico)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">30</span>, <span class="dv">17</span>, <span class="dv">45</span>)</span>
<span id="cb173-2"><a href="#cb173-2"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"maría"</span>, <span class="st">"laura"</span>, <span class="st">"carla"</span>, <span class="st">"luis"</span>)</span>
<span id="cb173-3"><a href="#cb173-3"></a>nombres[edades <span class="sc">&lt;</span> <span class="dv">18</span>] <span class="co"># nombres de los menores de edad</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "carla"</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-2" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-3-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-3-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-3-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-3-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-3-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-3-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>📝 Define el vector <code>x</code> como la concatenación de los 5 primeros números impares. Calcula la longitud del vector</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1"></a><span class="co"># Dos formas</span></span>
<span id="cb175-2"><a href="#cb175-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb175-3"><a href="#cb175-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb175-4"><a href="#cb175-4"></a></span>
<span id="cb175-5"><a href="#cb175-5"></a><span class="fu">length</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2">
<p>📝 Accede al tercer elemento. Accede al último elemento (sin importar la longitud, un código que pueda ejecutarse siempre). Elimina el primer elemento.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1"></a>x[<span class="dv">3</span>]</span>
<span id="cb176-2"><a href="#cb176-2"></a>x[<span class="fu">length</span>(x)]</span>
<span id="cb176-3"><a href="#cb176-3"></a>x[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-3">
<p>📝 Obtén de dicho vector los elementos de <code>x</code> mayores que 4. Calcula el vector <code>1/x</code> y guárdalo en una variable.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">4</span>]</span>
<span id="cb177-2"><a href="#cb177-2"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb177-3"><a href="#cb177-3"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-4">
<p>📝 Crea un vector que represente los nombres de 5 personas, de los cuales uno es desconocido.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Javi"</span>, <span class="st">"Sandra"</span>, <span class="cn">NA</span>, <span class="st">"Laura"</span>, <span class="st">"Carlos"</span>)</span>
<span id="cb178-2"><a href="#cb178-2"></a>nombres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-5">
<p>📝 Encuentra del vector <code>x</code> de ejercicios anteriores los elementos mayores (estrictos) que 1 Y ADEMÁS menores (estrictos) que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb179-2"><a href="#cb179-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-6">
<p>📝 Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, extrae los elementos que ocupan los lugares 1, 2, 5, 6. Elimina del vector el segundo elemento. Tras eliminarlo determina su suma y su media</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb180-2"><a href="#cb180-2"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</span>
<span id="cb180-3"><a href="#cb180-3"></a>x[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-7">
<p>📝 Dado el vector del ejercicio anterior, ¿cuales tienen un dato ausente? Pista: las funciones <code>is.algo()</code> comprueban si el elemento es tipo <code>algo</code>. Busca en internet como comprobar que un dato es ausente o escribe <code>is.</code> en consola y tabula.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-2" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>En el paquete <code>{datasets}</code> tenemos diversos conjuntos de datos y uno de ellos es <code>airquality</code>. Debajo te he extraído 3 variables de dicho dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1"></a>temperature <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb182-2"><a href="#cb182-2"></a>month <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb182-3"><a href="#cb182-3"></a>day <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>¿Qué <span class="hl-yellow"><strong>representan los datos</strong></span>? ¿Cómo averiguarlo?</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1"></a>? airquality</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Haciendo uso de <code>? ...</code> podemos consultar en el panel de ayuda lo que significa el objeto.</p>
</section>
<section id="caso-práctico-2-2" class="slide level2">
<h2>🐣 Caso práctico</h2>
<ol start="2" type="1">
<li>¿Cuántos <span class="hl-yellow"><strong>registros tenemos de mayo</strong></span>? ¿Y de abril? Construye una nueva variable <code>date</code> con la <span class="hl-yellow"><strong>fecha</strong></span> de cada registro (combinando año, mes y día)</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1"></a><span class="co"># Una forma para registros de mayo</span></span>
<span id="cb184-2"><a href="#cb184-2"></a><span class="fu">sum</span>(month <span class="sc">==</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1"></a><span class="co"># Otra forma</span></span>
<span id="cb186-2"><a href="#cb186-2"></a><span class="fu">length</span>(month[month <span class="sc">==</span> <span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1"></a><span class="co"># ídem en abril</span></span>
<span id="cb188-2"><a href="#cb188-2"></a><span class="fu">sum</span>(month <span class="sc">==</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1"></a><span class="co"># variable date</span></span>
<span id="cb190-2"><a href="#cb190-2"></a>dates <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">glue</span>(<span class="st">"{1973}-{month}-{day}"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Crea una nueva variable <code>temp_celsius</code> con la <span class="hl-yellow"><strong>temperatura en ºC</strong></span></li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1"></a><span class="co"># Temperatura en celsius</span></span>
<span id="cb191-2"><a href="#cb191-2"></a>temp_celsius <span class="ot">&lt;-</span> (temperature <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">*</span> (<span class="dv">5</span><span class="sc">/</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="caso-práctico-2-3" class="slide level2">
<h2>🐣 Caso práctico</h2>
<ol start="4" type="1">
<li>¿Cuál fue la <span class="hl-yellow"><strong>media de temperatura</strong></span> del mes de agosto? Extrae los días en los que la <span class="hl-yellow"><strong>temperatura superó los 30 grados</strong></span> y calcula la cantidad de días en los que lo hizo.</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1"></a><span class="co"># media en agosto</span></span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="fu">mean</span>(temperature[month <span class="sc">==</span> <span class="dv">8</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 83.96774</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1"></a><span class="fu">mean</span>(temp_celsius[month <span class="sc">==</span> <span class="dv">8</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 28.87097</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1"></a><span class="co"># Extremos días &gt; 30</span></span>
<span id="cb196-2"><a href="#cb196-2"></a>dates[temp_celsius <span class="sc">&gt;</span> <span class="dv">30</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1973-06-08" "1973-06-09" "1973-06-10" "1973-06-11" "1973-06-12"
 [6] "1973-07-07" "1973-07-08" "1973-07-09" "1973-07-10" "1973-07-14"
[11] "1973-07-19" "1973-07-28" "1973-08-06" "1973-08-07" "1973-08-08"
[16] "1973-08-09" "1973-08-10" "1973-08-27" "1973-08-28" "1973-08-29"
[21] "1973-08-30" "1973-08-31" "1973-09-01" "1973-09-02" "1973-09-03"
[26] "1973-09-04" "1973-09-05"</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1"></a><span class="fu">length</span>(dates[temp_celsius <span class="sc">&gt;</span> <span class="dv">30</span>]) <span class="co"># n días</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1"></a><span class="fu">sum</span>(temp_celsius <span class="sc">&gt;</span> <span class="dv">30</span>) <span class="co"># n días (otra forma)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
</div>
</section>
<section id="operaciones-con-vectores-6" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>También podemos hacer uso de <span class="hl-yellow"><strong>operaciones estadísticas</strong></span> como por ejemplo <code>sum()</code> que, dado un vector, nos devuelve la suma de todos sus elementos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb202-2"><a href="#cb202-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¿Qué sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb204-2"><a href="#cb204-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Por defecto, si tenemos un dato ausente, la <span class="hl-yellow"><strong>operación también será ausente</strong></span>. Para poder <span class="hl-purple"><strong>obviar ese dato</strong></span>, usamos un argumento opcional <code>na.rm = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-7" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Como hemos comentado que los valores lógicos son guardados internamente como 0 y 1, podremos usarlos en operaciones aritméticas.</p>
<p>Por ejemplo, si queremos <span class="hl-yellow"><strong>averiguar el número de elementos que cumplen una condición</strong></span> (por ejemplo, menores que 3), los que lo hagan tendrán asignado un 1 (<code>TRUE</code>) y los que no un 0 (<code>FALSE</code>) , por lo que basta con sumar dicho vector lógico para obtener el número de elementos que cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb208-2"><a href="#cb208-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="operaciones-con-vectores-8" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otra operación habitual que puede sernos útil es la <span class="hl-yellow"><strong>suma acumulada</strong></span> con <code>cumsum()</code> que, dado un vector, nos devuelve un vector a su vez con el primero, el primero más el segundo, el primero más el segundo más el tercero…y así sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">8</span>)</span>
<span id="cb210-2"><a href="#cb210-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  6  8  7 15</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¿Qué sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb212-2"><a href="#cb212-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -1  2 NA NA</code></pre>
</div>
</div>
<p>En el caso de la suma acumulada lo que sucede es que <span class="hl-yellow"><strong>a partir de ese valor, todo lo acumulado posterior será ausente</strong></span>.</p>
</div>
</section>
<section id="operaciones-con-vectores-9" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otra operación habitual que puede sernos útil es la <span class="hl-yellow"><strong>diferencia (con retardo)</strong></span> con <code>diff()</code> que, dado un vector, nos devuelve un vector con el segundo menos el primero, el tercero menos el segundo, el cuarto menos el tercero…y así sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb214-2"><a href="#cb214-2"></a><span class="fu">diff</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 -3 -2  6 -9 -1  6</code></pre>
</div>
</div>
<div class="fragment">
<p>Con el argumento <code>lag =</code> podemos indicar el <span class="hl-yellow"><strong>retardo</strong></span> de dicha diferencia (por ejemplo, <code>lag = 3</code> implica que se resta el cuarto menos el primero, el quinto menos el segundo, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb216-2"><a href="#cb216-2"></a><span class="fu">diff</span>(x, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  1 -5 -4 -4</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-10" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Media</strong></span>: medida de centralidad que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. La más conocida pero la <span class="hl-red"><strong>menos robusta</strong></span>: dado un conjunto, si se introducen valores atípicos o outliers (valores muy grandes o muy pequeños), la media se perturba con mucha facilidad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="cn">NA</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb218-2"><a href="#cb218-2"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 169.8889</code></pre>
</div>
</div>
</section>
<section id="operaciones-con-vectores-11" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Mediana</strong></span>: medida de centralidad que consiste en ordenar los elementos y quedarse con el que ocupa la mitad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb220-2"><a href="#cb220-2"></a><span class="fu">median</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 170</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Percentiles</strong></span>: medidas de posición (nos dividen en partes iguales los datos).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1"></a><span class="fu">quantile</span>(x) <span class="co"># por defecto percentiles 0-25-50-75-100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
 150  165  170  177  191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1"></a><span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  10%   40%   90% 
154.0 167.6 183.0 </code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-3" class="title-slide slide level1 center">
<h1>Clase 3: primeras bases de datos</h1>
<p><span style="color:#444442;"><strong>Variables de tipo texto. Primeras bases de datos</strong></span></p>
</section>
<section id="última-operación-ordenar" class="slide level2">
<h2>Última operación: ordenar</h2>
<p>Por último, una acción habitual es saber <span class="hl-yellow"><strong>ordenar valores</strong></span>:</p>
<ul>
<li><code>sort()</code>: devuelve el <span class="hl-yellow"><strong>vector ordenado</strong></span>. Por defecto de menor a mayor pero con <code>decreasing = TRUE</code> podemos cambiarlo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">7</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">65</span>, <span class="dv">20</span>, <span class="dv">33</span>, <span class="dv">23</span>, <span class="dv">77</span>)</span>
<span id="cb226-2"><a href="#cb226-2"></a><span class="fu">sort</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 20 23 25 33 41 65 77 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1"></a><span class="fu">sort</span>(edades, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81 77 65 41 33 25 23 20  7</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>order()</code>: devuelve el <span class="hl-yellow"><strong>vector de índices</strong></span> que tendríamos que usar para tener el vector ordenado</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1"></a><span class="fu">order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 1 7 2 8 9 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1"></a>x[<span class="fu">order</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 155 165 167 170 173 177 181 191</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-4-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-4-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-4-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-4-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-4-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>📝 Define el vector <code>x</code> como la concatenación de los 4 primeros números pares, y calcula su suma.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a><span class="co"># Dos formas</span></span>
<span id="cb234-2"><a href="#cb234-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb234-3"><a href="#cb234-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">8</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb234-4"><a href="#cb234-4"></a></span>
<span id="cb234-5"><a href="#cb234-5"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2">
<p>📝 Obtén los elementos de <code>x</code> menores estrictamente que 5. Calcula el número de elementos de <code>x</code> menores estrictamente que 5.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">5</span>] </span>
<span id="cb235-2"><a href="#cb235-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-3">
<p>📝 Calcula el vector <code>1/x</code> y obtén la versión ordenada (de menor a mayor) de las dos formas posibles</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb236-2"><a href="#cb236-2"></a><span class="fu">sort</span>(z)</span>
<span id="cb236-3"><a href="#cb236-3"></a>z[<span class="fu">order</span>(z)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-4">
<p>📝 Encuentra el máximo y el mínimo del vector <code>x</code></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1"></a><span class="fu">min</span>(x)</span>
<span id="cb237-2"><a href="#cb237-2"></a><span class="fu">max</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-5">
<p>📝 Encuentra del vector <code>x</code> los elementos mayores (estrictos) que 1 y menores (estrictos) que 6. Encuentra una forma de averiguar si todos los elementos son o no negativos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb238-2"><a href="#cb238-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-6">
<p>📝 Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, calcula su suma y su media de forma que devuelva un valor numérico conocido.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb239-2"><a href="#cb239-2"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb239-3"><a href="#cb239-3"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="primera-base-de-datos-matrices" class="slide level2">
<h2>Primera base de datos: matrices</h2>
<p>Cuando analizamos datos solemos tener <span class="hl-yellow"><strong>varias variables</strong></span> de cada individuo: necesitamos una «tabla» que las recopile. La opción más inmediata son las <span class="hl-yellow"><strong>matrices</strong></span>: concatenación de variables del <span class="hl-purple"><strong>mismo tipo e igual longitud</strong></span>.</p>
<div class="fragment">
<p>Imagina que tenemos estaturas y pesos de 4 personas. ¿Cómo <span class="hl-yellow"><strong>crear un dataset con las dos variables</strong></span>?</p>
<ul>
<li>Con <code>cbind()</code> <span class="hl-yellow"><strong>concatenamos vectores en forma de columnas</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1"></a>estaturas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">160</span>, <span class="dv">170</span>, <span class="dv">180</span>)</span>
<span id="cb240-2"><a href="#cb240-2"></a>pesos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">63</span>, <span class="dv">70</span>, <span class="dv">85</span>, <span class="dv">95</span>)</span>
<span id="cb240-3"><a href="#cb240-3"></a>datos_matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(estaturas, pesos)</span>
<span id="cb240-4"><a href="#cb240-4"></a>datos_matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     estaturas pesos
[1,]       150    63
[2,]       160    70
[3,]       170    85
[4,]       180    95</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices" class="slide level2">
<h2>Primer intento: matrices</h2>
<ul>
<li>También podemos <span class="hl-yellow"><strong>construir la matriz por filas</strong></span> con la función <code>rbind()</code> (aunque lo recomendable es tener cada variable en columna e individuo en fila).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1"></a><span class="co"># Construimos la matriz por filas</span></span>
<span id="cb242-2"><a href="#cb242-2"></a><span class="fu">rbind</span>(estaturas, pesos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>visualizar la matriz</strong></span> con la función <code>View()</code>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>comprobar las dimensiones</strong></span> con <code>dim()</code>, <code>nrow()</code> y <code>ncol()</code>: nuestros datos están tabulados:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1"></a><span class="fu">dim</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1"></a><span class="fu">nrow</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-1" class="slide level2">
<h2>Primer intento: matrices</h2>
<ul>
<li>También podemos <span class="hl-yellow"><strong>«darle vuelta» (matriz transpuesta)</strong></span> con <code>t()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1"></a><span class="fu">t</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Dado que ahora tenemos dos dimensiones, para <span class="hl-yellow"><strong>acceder a elementos</strong></span> deberemos proporcionar el índice de la fila y de la columna (si quedan libres implica todos de esa dimensión)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1"></a>datos_matriz[<span class="dv">2</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas 
      160 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1"></a>datos_matriz[, <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 63 70 85 95</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-2" class="slide level2">
<h2>Primer intento: matrices</h2>
<ul>
<li>También podemos definir una <span class="hl-yellow"><strong>matriz a partir de un vector numérico</strong></span>, reorganizando los valores en forma de matriz (sabiendo que los elementos se van <span class="hl-purple"><strong>colocando por columnas</strong></span>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">ncol =</span> <span class="dv">5</span>) </span>
<span id="cb254-2"><a href="#cb254-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]    1    4    7   10   13
[2,]    2    5    8   11   14
[3,]    3    6    9   12   15</code></pre>
</div>
</div>
</section>
<section id="primer-intento-matrices-3" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>Con las matrices sucede como con los vectores: cuando aplicamos una <span class="hl-yellow"><strong>operación aritmética lo hacemos elemento a elemento</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1"></a>z<span class="sc">/</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]  0.2  0.8  1.4  2.0  2.6
[2,]  0.4  1.0  1.6  2.2  2.8
[3,]  0.6  1.2  1.8  2.4  3.0</code></pre>
</div>
</div>
<div class="fragment">
<p>Para realizar <span class="hl-yellow"><strong>operaciones en un sentido matricial</strong></span> deberemos añadir <code>%%</code>, por ejemplo, para multiplicar matrices será <code>%*%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1"></a>z <span class="sc">%*%</span> <span class="fu">t</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]  335  370  405
[2,]  370  410  450
[3,]  405  450  495</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-4" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>También podemos <span class="hl-yellow"><strong>realizar operaciones por columnas/filas</strong></span> sin recurrir a bucles con la función <code>apply()</code>, y le indicaremos como <strong>argumentos</strong></p>
<ul>
<li>la matriz</li>
<li>el sentido de la operación (MARGIN = 1 por filas, MARGIN = 2 por columnas)</li>
<li>la función a aplicar</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1"></a><span class="co"># Media (mean) por columnas (MARGIN = 2)</span></span>
<span id="cb260-2"><a href="#cb260-2"></a><span class="fu">apply</span>(datos_matriz, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
   165.00     78.25 </code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1"></a><span class="co"># (Cuasi)varianza (var) por columnas (MARGIN = 2)</span></span>
<span id="cb262-2"><a href="#cb262-2"></a><span class="fu">apply</span>(datos_matriz, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"var"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
 166.6667  208.9167 </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-matrices" class="slide level2">
<h2>💻 Tu turno (matrices)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-5-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-5-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-5-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>📝 Modifica el código para definir una matriz <code>x</code> de ceros de 3 filas y 7 columnas de unos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb264-2"><a href="#cb264-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">7</span>)</span>
<span id="cb265-2"><a href="#cb265-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2">
<p>📝 A la matriz anterior, suma un 1 a cada número de la matriz y divide el resultado entre 5. Tras ello calcula su transpuesta y obtén sus dimensiones</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1"></a>new_matrix <span class="ot">&lt;-</span> (x <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">/</span><span class="dv">5</span></span>
<span id="cb266-2"><a href="#cb266-2"></a><span class="fu">t</span>(new_matrix)</span>
<span id="cb266-3"><a href="#cb266-3"></a><span class="fu">dim</span>(new_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-3">
<p>📝 Define la matriz <code>x &lt;- matrix(1:12, nrow = 4)</code>. Obtén la primera fila, la tercera columna, y el elemento (4, 1).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb267-2"><a href="#cb267-2"></a>x[<span class="dv">1</span>, ] <span class="co"># primera fila</span></span>
<span id="cb267-3"><a href="#cb267-3"></a>x[, <span class="dv">3</span>] <span class="co"># tercera columna</span></span>
<span id="cb267-4"><a href="#cb267-4"></a>x[<span class="dv">4</span>, <span class="dv">1</span>] <span class="co"># elemento (4, 1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-4">
<p>📝 Con la matriz anterior definida como <code>x &lt;- matrix(1:12, nrow = 4)</code>, calcula la media de todos los elementos, la media de cada fila y la media de cada columna. Calcula la suma de de cada fila y de cada columna</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb268-2"><a href="#cb268-2"></a><span class="fu">mean</span>(x) <span class="co"># de todos</span></span>
<span id="cb268-3"><a href="#cb268-3"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>) <span class="co"># media por filas</span></span>
<span id="cb268-4"><a href="#cb268-4"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>) <span class="co"># media por columnas</span></span>
<span id="cb268-5"><a href="#cb268-5"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> <span class="st">"sum"</span>) <span class="co"># suma por filas</span></span>
<span id="cb268-6"><a href="#cb268-6"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"sum"</span>) <span class="co"># suma por columnas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Las matrices tienen el mismo problema que los vectores: si juntamos datos de distinto tipo, se <span class="hl-red"><strong>perturba la integridad del dato</strong></span> ya que los convierte</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb269" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>, <span class="cn">NA</span>)</span>
<span id="cb269-2"><a href="#cb269-2"></a>soltero <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb269-3"><a href="#cb269-3"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>, <span class="st">"lucía"</span>)</span>
<span id="cb269-4"><a href="#cb269-4"></a>matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(edades, soltero, nombres)</span>
<span id="cb269-5"><a href="#cb269-5"></a>matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edades soltero nombres
[1,] "14"   "TRUE"  "javi" 
[2,] "24"   NA      "laura"
[3,] NA     "FALSE" "lucía"</code></pre>
</div>
</div>
<div class="fragment">
<p>Al ya no ser números no podemos realizar operaciones aritméticas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1"></a>matriz <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matriz + 1: argumento no-numérico para operador binario</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-1" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Para poder trabajar con <span class="hl-yellow"><strong>variables de distinto tipo</strong></span> tenemos lo que se conoce como <span class="hl-yellow"><strong>data.frame</strong></span>: concatenación de variables de igual longitud pero pueden ser de <span class="hl-purple"><strong>tipo distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb273" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(edades, soltero, nombres)</span>
<span id="cb273-2"><a href="#cb273-2"></a><span class="fu">class</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb275" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edades soltero nombres
1     14    TRUE    javi
2     24      NA   laura
3     NA   FALSE   lucía</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-2" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Dado que un <code>data.frame</code> es ya una «base de datos» las variables no son meros vectores matemáticos: <span class="hl-yellow"><strong>tienen un significado</strong></span> y podemos (debemos) <span class="hl-purple"><strong>ponerles nombres</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb277-2"><a href="#cb277-2"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"edad"</span> <span class="ot">=</span> edades, <span class="st">"estado"</span> <span class="ot">=</span> soltero, <span class="st">"nombre"</span> <span class="ot">=</span> nombres,</span>
<span id="cb277-3"><a href="#cb277-3"></a>             <span class="st">"f_nacimiento"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">c</span>(<span class="st">"1989-09-10"</span>, <span class="st">"1992-04-01"</span>, <span class="st">"1980-11-27"</span>)))</span>
<span id="cb277-4"><a href="#cb277-4"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
1   14   TRUE   javi   1989-09-10
2   24     NA  laura   1992-04-01
3   NA  FALSE  lucía   1980-11-27</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-3" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p><span class="hl-yellow"><strong>¡TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!</strong></span> Puedes visualizarlo escribiendo su nombre en consola o con <code>View(tabla)</code></p>

<img data-src="img/view_tabla.jpg" class="r-stretch"></section>
<section id="segundo-intento-data.frame-4" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Si queremos acceder a sus elementos, podemos como en las matrices (aunque no es recomendable): ahora <span class="hl-yellow"><strong>tenemos dos índices</strong></span> (filas y columnas, dejando libre la que no usemos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1"></a>tabla[<span class="dv">2</span>, ]  <span class="co"># segunda fila (todas sus variables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
2   24     NA  laura   1992-04-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1"></a>tabla[, <span class="dv">3</span>]  <span class="co"># tercera columna (de todos los individuos)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "laura" "lucía"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1"></a>tabla[<span class="dv">2</span>, <span class="dv">1</span>]  <span class="co"># primera característica de la segunda persona</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="img/menu_data_frame.jpg"></p>
</div><div class="column" style="width:75%;">
<p>También tiene ventajas de una <span class="hl-yellow"><strong>«base» de datos</strong></span> : podemos <span class="hl-purple"><strong>aceder a las variables por su nombre</strong></span> (<strong>recomendable</strong> ya que las variables pueden cambiar de posición), poniendo el nombre de la tabla seguido del símbolo <code>$</code> (con el <strong>tabulador</strong>, nos aparecerá un menú de columnas a elegir)</p>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-5" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<ul>
<li><code>names()</code>: nos muestra los nombres de las variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1"></a><span class="fu">names</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "edad"         "estado"       "nombre"       "f_nacimiento"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>dim()</code>: nos muestra las dimensiones (también <code>nrow()</code> y <code>ncol()</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1"></a><span class="fu">dim</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos acceder a las variables por su nombre</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1"></a>tabla[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="st">"nombre"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "lucía"</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-6" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Si tenemos uno ya creado y queremos <span class="hl-yellow"><strong>añadir una columna</strong></span> es tan simple como usar la función <code>data.frame()</code> que ya hemos visto para concatenar la columna. Vamos añadir por ejemplo una nueva variable, el número de hermanos de cada individuo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1"></a><span class="co"># Añadimos una nueva columna con nº de hermanos/as</span></span>
<span id="cb291-2"><a href="#cb291-2"></a>hermanos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb291-3"><a href="#cb291-3"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(tabla, <span class="st">"n_hermanos"</span> <span class="ot">=</span> hermanos)</span>
<span id="cb291-4"><a href="#cb291-4"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento n_hermanos
1   14   TRUE   javi   1989-09-10          0
2   24     NA  laura   1992-04-01          2
3   NA  FALSE  lucía   1980-11-27          3</code></pre>
</div>
</div>
</section>
<section id="intento-final-tibble" class="slide level2">
<h2>Intento final: tibble</h2>
<p>Las tablas en formato <code>data.frame</code> tienen algunas <span class="hl-red"><strong>limitaciones</strong></span></p>
<p>La principal es que <span class="hl-red"><strong>no permite la recursividad</strong></span>: imagina que definimos una base de datos con estaturas y pesos, y queremos una tercera variable con el IMC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1"></a><span class="fu">data.frame</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb293-2"><a href="#cb293-2"></a>           <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data.frame(estatura = c(1.7, 1.8, 1.6), peso = c(80, 75, 70), : objeto 'peso' no encontrado</code></pre>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>De ahora en adelante usaremos el formato <code>tibble</code> (un <span class="hl-yellow"><strong>data.frame mejorado</strong></span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb295-2"><a href="#cb295-2"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb295-3"><a href="#cb295-3"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</div>
</section>
<section id="intento-final-tibble-1" class="slide level2">
<h2>Intento final: tibble</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb297-2"><a href="#cb297-2"></a>                <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb297-3"><a href="#cb297-3"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<p>Las tablas en formato <code>tibble</code> nos permitirá una <span class="hl-yellow"><strong>gestión más ágil, eficiente y coherente</strong></span> de los datos, con 4 ventajas principales:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Metainformación</strong></span>: si te fijas en la cabecera, nos dice ya automáticamente el número de filas y columnas, y el tipo de cada variable</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</li>
</ul>
</div>
</section>
<section id="intento-final-tibble-2" class="slide level2">
<h2>Intento final: tibble</h2>
<ul>
<li><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1"></a>tabla<span class="sc">$</span>invent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `invent`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Por filas</strong></span>: crear por filas (copiar y pegar de una tabla) con <code>tribble()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb302-2"><a href="#cb302-2"></a>        <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb302-3"><a href="#cb302-3"></a>        <span class="st">"b"</span>,   <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  colA   colB
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>El paquete <code>{datapasta}</code> nos permite <span class="hl-green"><strong>copiar y pegar</strong></span> tablas de páginas web y documentos sencillos</p>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-tibble" class="slide level2">
<h2>💻 Tu turno (tibble)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-6-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-6-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-6-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-6-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-6-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>📝 Carga del paquete <code>{datasets}</code> el conjunto de datos <code>airquality</code> (variables de la calidad del aire de Nueva York desde mayo hasta septiembre de 1973). ¿Es el conjunto de datos airquality de tipo tibble? En caso negativo, conviértelo a tibble (busca en la documentación del paquete en <a href="https://tibble.tidyverse.org/index.html" class="uri">https://tibble.tidyverse.org/index.html</a>).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb304-2"><a href="#cb304-2"></a><span class="fu">class</span>(datasets<span class="sc">::</span>airquality)</span>
<span id="cb304-3"><a href="#cb304-3"></a>airquality_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(datasets<span class="sc">::</span>airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2">
<p>📝 Una vez convertido a <code>tibble</code> obtén el nombre de las variables y las dimensiones del conjunto de datos. ¿Cuántas variables hay? ¿Cuántos días se han medido?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1"></a><span class="fu">names</span>(airquality_tb)</span>
<span id="cb305-2"><a href="#cb305-2"></a><span class="fu">ncol</span>(airquality_tb)</span>
<span id="cb305-3"><a href="#cb305-3"></a><span class="fu">nrow</span>(airquality_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-3">
<p>📝 Filtra solo los datos del mes de agosto.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-4">
<p>📝 Selecciona aquellos datos que no sean ni de julio ni de agosto.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1"></a>airquality_tb[Month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-5">
<p>📝 Modifica el siguiente código para quedarte solo con las variable de ozono y temperatura.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1"></a>airquality_tb[, <span class="fu">c</span>(<span class="st">"Ozone"</span>, <span class="st">"Temp"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-6">
<p>📝 Selecciona los datos de temperatura y viento de agosto. Traduce a castellano el nombre de las columnas del conjunto filtrado.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, <span class="fu">c</span>(<span class="st">"Temp"</span>, <span class="st">"Wind"</span>)]</span>
<span id="cb309-2"><a href="#cb309-2"></a><span class="fu">names</span>(airquality_tb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ozono"</span>, <span class="st">"rad_solar"</span>, <span class="st">"viento"</span>, <span class="st">"temp"</span>, <span class="st">"mes"</span>, <span class="st">"dia"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="resumen-hasta-ahora" class="slide level2">
<h2>Resumen hasta ahora</h2>
<ul>
<li>Cada <span class="hl-yellow"><strong>celda puede ser de un tipo diverso</strong></span>: números, texto, fechas, valores lógicos, etc</li>
</ul>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>vector es una concatenación de celdas</strong></span> (las futuras columnas de nuestras tablas) –&gt; En <code>R</code> por defecto las operaciones se hacen <span class="hl-yellow"><strong>elemento a elemento</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Una <span class="hl-yellow"><strong>matriz</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables del MISMO tipo y MISMA longitud</strong></span> –&gt; objeto bidimensional (dos índices)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>data.frame</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables de DISTINTO tipo y MISMA longitud</strong></span> –&gt; usaremos <span class="hl-yellow"><strong>tibble</strong></span> como una opción mejorada de base de datos</li>
</ul>
</div>
</section>
<section id="caso-práctico-3a" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>Del paquete <code>Biostatistics</code> usaremos el conunto de datos <code>pinniped</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1"></a>Biostatistics<span class="sc">::</span>pinniped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>¿Qué <span class="hl-yellow"><strong>representan</strong></span> los datos? ¿Qué <span class="hl-yellow"><strong>tipo de dato</strong></span> es? En caso de que no lo sea, convierte la base de datos a un <code>tibble</code> (renombra con <code>pinniped_tb</code>)</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1"></a>? Biostatistics<span class="sc">::</span>pinniped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1"></a><span class="fu">class</span>(Biostatistics<span class="sc">::</span>pinniped) <span class="co"># no es un tibble</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1"></a>pinniped_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(Biostatistics<span class="sc">::</span>pinniped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<ol start="2" type="1">
<li>¿Cuántos registros hay? ¿Y variables? ¿De qué tipo es cada una?</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1"></a><span class="fu">nrow</span>(pinniped_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1"></a><span class="fu">ncol</span>(pinniped_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
</div>
</section>
<section id="caso-práctico-3a-2" class="slide level2">
<h2>🐣 Caso práctico</h2>
<ol start="3" type="1">
<li>Incorpora una <span class="hl-yellow"><strong>variable extra llamada phoca</strong></span> que sea de tipo lógico y que nos diga si una especie es de la categoría <code>Phoca</code> o no.</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1"></a>pinniped_tb<span class="sc">$</span>phoca <span class="ot">&lt;-</span> pinniped_tb<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">"Phoca"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>¿A qué sexo le <span class="hl-yellow"><strong>pesa más el cerebro</strong></span>: a las hembras o a los machos? ¿A quienes les <span class="hl-yellow"><strong>pesa más el cuerpo</strong></span>: a los monógamos o a los polígamos?</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1"></a><span class="co"># ¿a quién le pesa más el cerebro?</span></span>
<span id="cb320-2"><a href="#cb320-2"></a><span class="fu">mean</span>(pinniped_tb<span class="sc">$</span>Male_brain_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span></span>
<span id="cb320-3"><a href="#cb320-3"></a>  <span class="fu">mean</span>(pinniped_tb<span class="sc">$</span>Female_brain_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1"></a><span class="co"># ¿a quién le pesa más el cerebro?</span></span>
<span id="cb322-2"><a href="#cb322-2"></a><span class="fu">mean</span>(<span class="fu">c</span>(pinniped_tb<span class="sc">$</span>Male_mass_Kg[pinniped_tb<span class="sc">$</span>Mate_type <span class="sc">==</span> <span class="st">"mono"</span>],</span>
<span id="cb322-3"><a href="#cb322-3"></a>       pinniped_tb<span class="sc">$</span>Female_mass_Kg[pinniped_tb<span class="sc">$</span>Mate_type <span class="sc">==</span> <span class="st">"mono"</span>])) <span class="sc">&gt;</span></span>
<span id="cb322-4"><a href="#cb322-4"></a>  <span class="fu">mean</span>(<span class="fu">c</span>(pinniped_tb<span class="sc">$</span>Male_mass_Kg[pinniped_tb<span class="sc">$</span>Mate_type <span class="sc">==</span> <span class="st">"poly"</span>],</span>
<span id="cb322-5"><a href="#cb322-5"></a>         pinniped_tb<span class="sc">$</span>Female_mass_Kg[pinniped_tb<span class="sc">$</span>Mate_type <span class="sc">==</span> <span class="st">"poly"</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="caso-práctico-3a-3" class="slide level2">
<h2>🐣 Caso práctico</h2>
<ol start="5" type="1">
<li>Incopora una nueva variable que represente la <span class="hl-yellow"><strong>diferencia entre el peso del cerebro entre machos y hembras</strong></span> (machos - hembras) para cada especie.</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1"></a>pinniped_tb<span class="sc">$</span>dif_m_f <span class="ot">&lt;-</span> pinniped_tb<span class="sc">$</span>Male_brain_g <span class="sc">-</span> pinniped_tb<span class="sc">$</span>Female_brain_g</span>
<span id="cb324-2"><a href="#cb324-2"></a>pinniped_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 33 × 8
   Species     Male_brain_g Female_brain_g Male_mass_Kg Female_mass_Kg Mate_type
   &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;    
 1 Monachus s…         370             NA          173            272. mono     
 2 Monachus m…         480            480          260            275  mono     
 3 Mirounga a…         700            640         2275            488  poly     
 4 Mirounga l…        1431.           899.        3510            566. poly     
 5 Leptonycho…         535            638.         450            447  poly     
 6 Ommatophoc…         425            530          154.           164  mono     
 7 Lobodon ca…         578.           539.         220.           224  mono     
 8 Hydrurga l…         765            660          324            367  mono     
 9 Cystophora…         480            430          343.           222. mono     
10 Erignathus…          NA            460          312.           326  mono     
# ℹ 23 more rows
# ℹ 2 more variables: phoca &lt;lgl&gt;, dif_m_f &lt;dbl&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="clase-4" class="title-slide slide level1 center">
<h1>Clase 4: comunicar</h1>
<p><span style="color:#444442;"><strong>Comunicar resultados: rmd y Quarto</strong></span></p>
</section>
<section id="comunicar-rmd-y-quarto" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Una de las <span class="hl-yellow"><strong>principales fortalezas</strong></span> de <code>R</code> es la <span class="hl-yellow"><strong>facilidad para generar informes, libros, webs, apuntes y hasta diapositivas</strong></span> (este mismo material por ejemplo). Para ello <span class="hl-purple"><strong>instalaremos</strong></span> antes</p>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>el paquete <code>{rmarkdown}</code> (para generar archivos <code>.rmd</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1"></a><span class="fu">install.packages</span>(<span class="st">"rmarkdown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>instalar <a href="https://quarto.org/docs/get-started/"><strong>Quarto</strong></a> (el «nuevo» <code>.rmd</code> ahora como <code>.qmd</code>)</li>
</ul>
</div><div class="column" style="width:60%;">
<p><img data-src="img/quarto.png"></p>
</div>
</div>
</section>
<section id="comunicar-rmd-y-quarto-1" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Hasta ahora solo hemos programado en scripts (archivos <code>.R</code>) dentro de proyectos, pero en muchas ocasiones <span class="hl-yellow"><strong>no trabajaremos solos</strong></span> y necesitaremos <span class="hl-yellow"><strong>comunicar los resultados</strong></span> en diferentes formatos:</p>
<ul>
<li>apuntes (para nosotros mismos)</li>
<li>diapositivas</li>
<li>web</li>
<li>informes</li>
</ul>
<div class="fragment">
<p>Para todo ello usaremos <span class="hl-yellow"><strong>Quarto (nuevo rmarkdown)</strong></span></p>
</div>
</section>
<section id="comunicar-rmd-y-quarto-2" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Los archivos de extensión <code>.qmd</code> (o <code>.rmd</code>) nos permitirán fácilmente combinar:</p>
<ul>
<li><span class="hl-yellow"><strong>Markdown</strong></span>: <span class="hl-purple"><strong>lenguaje tipado</strong></span> que nos permite crear contenido simple (tipo wordpress, con texto, <strong>negritas</strong>, <em>cursivas</em>, etc) con un diseño legible.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Matemáticas (latex)</strong></span>: lenguaje para escribir notación matemática como <span class="math inline">\(x^2\)</span> o <span class="math inline">\(\sqrt{y}\)</span> o <span class="math inline">\(\int_{a}^{b} f(x) dx\)</span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Código y salidas</strong></span>: podremos no solo mostrar el paso final sino el código que has ido realizando (no solo en <code>R</code>), con <span class="hl-purple"><strong>cajitas de código llamadas chunks</strong></span>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Imágenes, <span class="hl-yellow"><strong>gráficas</strong></span>, tablas, estilos (css, js), etc.</li>
</ul>
</div>
</section>
<section id="comunicar-rmd-y-quarto-3" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>La principal ventaja de realizar este tipo de material en Quarto/Rmarkdown es que, al hacerlo desde <code>RStudio</code>, puedes generar un <span class="hl-yellow"><strong>informe o una presentación sin salirte del entorno de programación</strong></span> en el que estás trabajando</p>
<p>De esta forma podrás analizar los datos, resumirlos y a la vez comunicarlos con la misma herramienta.</p>
<div class="fragment">
<p>Recientemente el equipo de <code>RStudio</code> desarrolló <span class="hl-yellow"><strong>Quarto</strong></span>, una versión mejorada de Rmarkdown (archivos <code>.qmd</code>), con un formato un poco más estético y simple. Tienes toda la documentación y ejemplos en <a href="https://quarto.org/"><strong>https://quarto.org/</strong></a></p>
</div>
</section>
<section id="nuestro-primer-informe" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/quarto-create.png"></p>
</div><div class="column" style="width:45%;">
<p>Vamos a crear el <span class="hl-yellow"><strong>primer fichero rmarkdown con Quarto</strong></span> con extensión <code>.qmd</code>. Para ello solo necesitaremos hacer click en</p>
<p><code>File &lt;&lt; New File &lt;&lt; Quarto Document</code></p>
</div>
</div>
</section>
<section id="nuestro-primer-informe-1" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/quarto-format.png"></p>
</div><div class="column" style="width:55%;">
<p>Tras hacerlo nos aparecerán varias <span class="hl-yellow"><strong>opciones de formatos de salida</strong></span>:</p>
<ul>
<li>archivo <code>.pdf</code></li>
<li>archivo <code>.html</code> (<span class="hl-yellow"><strong>recomendable</strong></span>): documento dinámico, permite la interacción con el usuario, como una «página web».</li>
<li>archivo <code>.doc</code> (nada recomendable)</li>
</ul>
</div>
</div>
<div class="fragment">
<p>De momento dejaremos marcado el <span class="hl-yellow"><strong>formato HTML que viene por defecto</strong></span>, y escribiremos el <span class="hl-yellow"><strong>título</strong></span> de nuestro documento. Tras ello tendremos nuestro <span class="hl-yellow"><strong>archivo .qmd</strong></span> (ya no es un script .R como los que hemos abierto hasta ahora).</p>
</div>
</section>
<section id="nuestro-primer-informe-2" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:40%;">
<p>Deberías tener algo similar a la captura de la imagen con <span class="hl-yellow"><strong>dos modos de edición</strong></span>: <code>Source</code> (con código, la opción recomendada hasta que lo domines) y <code>Visual</code> (más parecido a un blog)</p>
</div>
</div>
<p>Para <span class="hl-yellow"><strong>ejecutar TODO el documento</strong></span> debes clickar <code>Render on Save</code> y darle a guardar.</p>
</section>
<section id="cabecera-de-un-qmd" class="slide level2">
<h2>Cabecera de un qmd</h2>

<img data-src="img/quarto-prueba-html.png" class="r-stretch"><p>Deberías haber obtenido una <span class="hl-yellow"><strong>salida en html similar a esta</strong></span> (y se te ha generado en tu ordenador un <span class="hl-yellow"><strong>archivo html</strong></span>)</p>
</section>
<section id="nuestro-primer-informe-3" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:50%;">
<p>Un fichero <code>.qmd</code> se <span class="hl-yellow"><strong>divide básicamente en tres partes</strong></span>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Cabecera</strong></span>: la parte que tienes al inicio entre <code>---</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Texto</strong></span>: que podremos formatear y mejorar con negritas (escrito como <strong>negritas</strong>, con doble astérisco al inicio y final), cursivas (<em>cursivas</em>, con barra baja al inicio y final) o destacar nombres de funciones o variables de R. Puedes añadir ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, entre dólares).</p></li>
<li><p><span class="hl-yellow"><strong>Código R</strong></span></p></li>
</ul>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-1" class="slide level2">
<h2>Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento:</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/quarto-cabecera.png"></p>
</div><div class="column" style="width:70%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>date</code>: fecha</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
<li><code>toc-depth</code>: profundidad del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div>
</div>
</section>
<section id="texto-de-un-qmd" class="slide level2">
<h2>Texto de un qmd</h2>
<p>Respecto a la escritura solo hay una <span class="hl-yellow"><strong>cosa importante</strong></span>: salvo que indiquemos lo contrario, <span class="hl-yellow"><strong>TODO lo que vamos a escribir es texto (normal)</strong></span>. No código R.</p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/quarto-prueba-qmd2.png" width="350"> <img data-src="img/quarto-prueba-html2.png" width="320"></p>
</div><div class="column" style="width:65%;">
<p>Vamos a empezar escribiendo una sección al inicio (<code># Intro</code> y detrás por ej. la frase</p>
<blockquote>
<p>Este material ha sido diseñado por el profesor Javier Álvarez Liébana, docente en la Universidad Complutense de Madrid</p>
</blockquote>
<p>Además al <code>Running Code</code> le añadiremos una almohadilla <code>#</code>: las <span class="hl-yellow"><strong>almohadillas FUERA DE CHUNKS</strong></span> nos servirán para crear <span class="hl-yellow"><strong>epígrafes (secciones)</strong></span> en el documento</p>
</div>
</div>
</section>
<section id="índice-de-un-qmd" class="slide level2">
<h2>Índice de un qmd</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-indice-qmd-2.png" width="370"> <img data-src="img/quarto-indice-html2.png" width="370"></p>
</div><div class="column" style="width:60%;">
<p>Para que el <span class="hl-yellow"><strong>índice capture dichas secciones</strong></span> modificaremos la cabecera del archivo como se observa en la imagen (puedes cambiar la localización del índice y el título si quieres para probar).</p>
</div>
</div>
</section>
<section id="texto-en-un-qmd" class="slide level2">
<h2>Texto en un qmd</h2>
<p>Vamos a <span class="hl-yellow"><strong>personalizar un poco el texto</strong></span> haciendo lo siguiente:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-texto-mejorado-qmd.png" width="370"> <img data-src="img/quarto-texto-mejorado-html.png" width="370"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Vamos a añadir <span class="hl-yellow"><strong>negrita al nombre</strong></span> (poniendo ** al inicio y al final).</p></li>
<li><p>Vamos añadir <span class="hl-yellow"><strong>cursiva</strong></span> a la palabra material (poniendo _ al inicio y al final).</p></li>
<li><p>Vamos añadir un <span class="hl-yellow"><strong>enlace</strong></span> <a href="https://www.ucm.es" class="uri">https://www.ucm.es</a>, asociándolo al nombre de la Universidad. Para ello el título lo ponemos entre corchetes y justo detrás el enlace entre paréntesis <code>[«Universidad Complutense de Madrid»](https://www.ucm.es)</code></p></li>
</ul>
</div>
</div>
</section>
<section id="código-en-un-qmd" class="slide level2">
<h2>Código en un qmd</h2>
<p>Para <span class="hl-yellow"><strong>añadir código R</strong></span> debemos crear nuestras <span class="hl-yellow"><strong>cajas de código llamadas chunks</strong></span>: altos en el camino en nuestro texto markdown donde podremos incluir código de casi cualquier lenguaje (y sus salidas).</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-qmd.png" width="470"></p>
</div><div class="column" style="width:50%;">
<p>Para incluir uno deberá de ir <span class="hl-yellow"><strong>encabezado</strong></span> de la siguiente forma tienes un atajo <code>Command + Option + I</code> (Mac) o <code>Ctrl + Shift + I</code> (Windows)</p>
</div>
</div>
</section>
<section id="código-en-un-qmd-1" class="slide level2">
<h2>Código en un qmd</h2>
<p>Dentro de dicha cajita (que tiene ahora otro color en el documento) <span class="hl-yellow"><strong>escribiremos código R</strong></span> como lo veníamos haciendo hasta ahora en los scripts.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-1-qmd.png" width="410"> <img data-src="img/quarto-chunk-1-html.png" width="410"></p>
</div><div class="column" style="width:50%;">
<p>Vamos por ejemplo a definir dos variables y su suma de la siguiente manera, escribiendo dicho código en nuestro <code>.qmd</code> (dentro de ese chunk)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1"></a><span class="co"># Código R</span></span>
<span id="cb327-2"><a href="#cb327-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb327-3"><a href="#cb327-3"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb327-4"><a href="#cb327-4"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="etiquetando-chunks" class="slide level2">
<h2>Etiquetando chunks</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-tag-chunks-qmd.png" width="400"> <img data-src="img/quarto-tag-chunks-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Los chunks pueden tener un <span class="hl-yellow"><strong>nombre o etiqueta</strong></span>, de forma que podamos referenciarlos de nuevo para no repetir código.</p>
</div>
</div>
</section>
<section id="ejecutando-chunks" class="slide level2">
<h2>Ejecutando chunks</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-inline-qmd.png" width="400"> <img data-src="img/quarto-inline-html.png" width="380"></p>
</div><div class="column" style="width:60%;">
<p>En cada chunk aparecen <span class="hl-yellow"><strong>dos botones</strong></span>:</p>
<ul>
<li><p>botón de <span class="hl-yellow"><strong>play</strong></span>: activa la <span class="hl-yellow"><strong>ejecución y salida de ese chunk particular</strong></span> (lo puedes visualizar dentro de tu propio <code>RStudio</code>)</p></li>
<li><p>botón de <span class="hl-yellow"><strong>rebobinar</strong></span>: activa la <span class="hl-yellow"><strong>ejecución y salida de todos los chunk hasta ese</strong></span> (sin llegar a él)</p></li>
</ul>
<p>&nbsp;</p>
<p>Además podemos <span class="hl-yellow"><strong>incluir código R dentro de la línea de texto</strong></span> (en lugar de mostrar el texto x ejecuta el código R mostrando la variable).</p>
</div>
</div>
</section>
<section id="personalización-de-chunks" class="slide level2">
<h2>Personalización de chunks</h2>
<p>Los <span class="hl-yellow"><strong>chunks podemos personalizarlos</strong></span> con opciones al inicio del chunk precedido de <code>#|</code>:</p>
<ul>
<li><p><code>#| echo: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> y se <span class="hl-green"><strong>muestra resultado</strong></span> pero <span class="hl-red"><strong>no visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| include: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra resultado</strong></span> y <span class="hl-red"><strong>no visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| eval: false</code>: <span class="hl-red"><strong>no ejecuta código</strong></span>, <span class="hl-red"><strong>no muestra resultado</strong></span> pero <span class="hl-green"><strong>sí visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| message: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de salida</strong></span>.</p></li>
<li><p><code>#| warning: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de warning</strong></span>.</p></li>
<li><p><code>#| error: true</code>: <span class="hl-green"><strong>ejecuta código</strong></span> y <span class="hl-green"><strong>permite que haya errores</strong></span> mostrando el mensaje de error en la salida.</p></li>
</ul>

<img data-src="img/quarto-options-chunk.png" width="380" class="r-stretch"><p>Estas opciones podemos aplicarlas chunk a chunk o fijar los parámetros de forma global con <code>knitr::opts_chunk$set()</code> al inicio del documento (dentro de un chunk).</p>
</section>
<section id="organizando-qmd" class="slide level2">
<h2>Organizando qmd</h2>
<p>Además de texto y código podemos introducir lo siguiente:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Ecuaciones</strong></span>: puedes añadir además ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, la ecuación entre dólares).</p></li>
<li><p><span class="hl-yellow"><strong>Listas</strong></span>: puedes itemizar elementos poniendo <code>*</code></p></li>
</ul>
<p><code>* Paso 1: ...</code></p>
<p><code>* Paso 2: ...</code></p>
<ul>
<li><span class="hl-yellow"><strong>Cross-references</strong></span>: puedes etiquetar partes del documento (la etiqueta se construye con <code>{#nombre-seccion}</code>) y llamarlas luego con <code>[Sección](@nombre-seccion)</code></li>
</ul>
</section>
<section id="gráficasimágenes-en-qmd" class="slide level2">
<h2>Gráficas/imágenes en qmd</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-fig-qmd.png" width="340"> <img data-src="img/quarto-fig-html.png" width="390"></p>
</div><div class="column" style="width:50%;">
<p>Por último, también podemos <span class="hl-yellow"><strong>añadir pies de gráficas o imágenes</strong></span> añadiendo <code>#| fig-cap: "..."</code></p>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>Fíjate que el <span class="hl-yellow"><strong>caption está en el margen</strong></span> (por ejemplo). Puedes cambiarlo introduciendo <span class="hl-yellow"><strong>ajustes en la cabecera</strong></span> (todo lo relativo a figuras empieza por <code>fig-</code>, y puedes ver las opciones tabulando). Tienes más información en <strong><a href="https://quarto.org/" class="uri">https://quarto.org/</a></strong></p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/quarto-cabecera-desplegable.png" width="400"></p>
</div>
</div>
</div>
</section>
<section id="añadir-estilos" class="slide level2">
<h2>Añadir estilos</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-estilos-qmd.png" width="400"> <img data-src="img/quarto-estilos-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Por último puedes añadir un <span class="hl-yellow"><strong>tema personalizado</strong></span> incluyendo un <span class="hl-yellow"><strong>archivo de estilos</strong></span> (archivo en formato <code>.scss</code> o <code>.css</code>). Te he dejado uno en <a href="https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material" class="uri">https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material</a>.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>El archivo de estilos debe estar en la misma carpeta que el archivo <code>.qmd</code></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-3a" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>Elabora informes <code>.qmd</code> tal que</p>
<ul>
<li>Crea un archivo por cada uno de los <span class="hl-yellow"><strong>casos prácticos de los anteriores temas</strong></span>, uno por tema</li>
</ul>
<div class="fragment">
<ul>
<li>En cada uno de ellos haz <span class="hl-yellow"><strong>una sección por ejercicio</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Detalla todos los pasos</strong></span> que consideres mezclando texto, código y salidas</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Si aparecen medidas estadísticas como la media, <span class="hl-yellow"><strong>prueba a meter fórmulas</strong></span> con <code>$$</code> (busca información de cómo introducir ecuaciones en latex)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Para avanzados: investiga las opciones del paquete <code>{DT}</code> (con la función <code>datatable()</code>) que nos permite <span class="hl-yellow"><strong>introducir dentro de los <code>.qmd</code> los datos en formato de tabla dinámica</strong></span>, permitiendo ordenar y filtrar.</li>
</ul>
</div>
</section></section>
<section>
<section id="entrega-i" class="title-slide slide level1 center">
<h1>Clase 5: entrega I</h1>
<p><span style="color:#444442;"><strong>Primera entrega individual en clase</strong></span></p>
</section>
<section id="entrega-i-26092023" class="slide level2">
<h2>Entrega I (26/09/2023)</h2>
<p>Se actualizará al inicio de la clase correspondiente.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Esta <span class="hl-green"><strong>entrega ponderará un 5% en la nota final</strong></span></p>
<p>Podrás <span class="hl-yellow"><strong>usar todo el material del curso e internet</strong></span> salvo cualquier aplicación de mensajería o sistema de comunicación: en caso de tener alguna abierta a lo largo de la entrega, aunque no se esté usando, deberás <span class="hl-red"><strong>abandonar la entrega y contará como un 0</strong></span>.</p>
<p>Contarás con aproximadamente 90 minutos, pero <span class="hl-yellow"><strong>deberás realizar la entrega</strong></span>, como tarde, a las <span class="hl-yellow"><strong>14:40</strong></span>. Será <span class="hl-yellow"><strong>obligatorio subir tanto el <code>.qmd</code> como el <code>.html</code></strong></span>: una entrega que no haya podido ser renderizada (es decir, con errores graves) será <span class="hl-red"><strong>penalizada contando solo un 65% de la nota obtenida</strong></span> (si la entrega es perfecta, la nota máxima será un 6.5 sino se adjunta el <code>.html</code> generado).</p>
<p>Te recomiendo practicar bastante y preguntar dudas en clase y/o tutoría ya que <span class="hl-yellow"><strong>irás justo de tiempo</strong></span>, así que necesitas fluidez en los ejercicios.</p>
<p>Si usas un <span class="hl-yellow"><strong>pc de la biblioteca</strong></span> asegúrate de tomarlo con suficiente antelación para <span class="hl-yellow"><strong>instalar todas las librerías necesarias antes de empezar</strong></span> para no perder tiempo.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-6" class="title-slide slide level1 center">
<h1>Clase 6: tidydata</h1>
<p><span style="color:#444442;"><strong>Nuestra base de datos: tibble. Tidydata: un multiverso de datos limpios</strong></span></p>
</section>
<section id="previously-in-breaking-bad" class="slide level2">
<h2>Previously, in Breaking Bad…</h2>
<p>Nuestro <span class="hl-yellow"><strong>formato final de base de datos</strong></span> será el objeto de tipo <code>tibble</code>, un <code>data.frame</code> mejorado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb329-2"><a href="#cb329-2"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Metainformación</strong></span>: en la cabecera nos dice ya automáticamente el número de filas y columnas, y el tipo de cada variable</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Por filas</strong></span>: permite crear por filas con <code>tribble()</code></li>
</ul>
</div>
</section>
<section id="previously-in-breaking-bad-1" class="slide level2">
<h2>Previously, in Breaking Bad…</h2>
<p>Para definir un <code>tibble()</code> nosotro mismos tenemos dos opciones:</p>
<ul>
<li><span class="hl-yellow"><strong>Concatenando vectores</strong></span> que ya tengamos definidos, haciendo uso de la función <code>tibble()</code> del paquete <code>{tibble}</code> (ya incluido en <code>{tidyverse}</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1"></a>estatura <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>)</span>
<span id="cb331-2"><a href="#cb331-2"></a>peso <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>)</span>
<span id="cb331-3"><a href="#cb331-3"></a>IMC <span class="ot">&lt;-</span>  peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb331-4"><a href="#cb331-4"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> estatura, <span class="st">"peso"</span> <span class="ot">=</span> peso,</span>
<span id="cb331-5"><a href="#cb331-5"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> IMC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</section>
<section id="previously-in-breaking-bad-2" class="slide level2">
<h2>Previously, in Breaking Bad…</h2>
<ul>
<li><span class="hl-yellow"><strong>Directamente en tibble</strong></span> proporcionando manualmente valores y nombres de variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>),</span>
<span id="cb333-2"><a href="#cb333-2"></a>       <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb333-3"><a href="#cb333-3"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</section>
<section id="r-base-vs-tidyverse" class="slide level2">
<h2>R base vs Tidyverse</h2>
<p>Si conoces algún otro lenguaje de programación (o tienes gente cercana que programa) te extrañará que aún no hayamos hablado de conceptos habituales como</p>
<ul>
<li><p><span class="hl-yellow"><strong>Bucles for</strong></span>: repetir un código un número fijo de iteraciones.</p></li>
<li><p><span class="hl-yellow"><strong>Bucles while</strong></span>: repetir un código hasta que se cumpla una condición</p></li>
<li><p><span class="hl-yellow"><strong>Estructuras if-else</strong></span>: estructuras de control para decidir por donde camina el código en función del valor de las variables.</p></li>
</ul>
<div class="fragment">
<p>Y aunque conocer dichas estructuras puede sernos en algún momento interesante, en la <span class="hl-red"><strong>mayoría de ocasiones vamos a poder evitarlas</strong></span> (en especial los bucles)</p>
</div>
</section>
<section id="qué-es-tidyverse" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/flow_tidyverse.jpg"></p>
</div>
</div>
<p><code>{tidyverse}</code> es un <span class="hl-yellow"><strong>«universo» de paquetes</strong></span> para garanatizar un flujo de trabajo (de inicio a fin) eficiente, coherente y lexicográficamente sencillo de entender, basado en la idea de que <span class="hl-purple"><strong>nuestros datos están limpios y ordenados (tidy)</strong></span></p>
</section>
<section id="qué-es-tidyverse-1" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: optimizando data.frame</li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv)</li>
<li><code>{dplyr}</code>: gramática para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div>
</div>
<p>También tenemos los paquetes <code>{purrr}</code> para el manejo de listas, <code>{forcast}</code> para cualitativas, <code>{lubridate}</code> para fechas, <code>{readxl}</code> para importar archivos .xls y .xlsx, <code>{rvest}</code> para web scraping y <code>{rmarkdown}</code> para comunicar resultados.</p>
</section>
<section id="qué-es-tidyverse-2" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizando data.frame</strong></span></li>
<li><code>{tidyr}</code>: <span class="hl-yellow"><strong>limpieza de datos</strong></span></li>
<li><code>{readr}</code>: carga datos rectangulares (.csv)</li>
<li><code>{dplyr}</code>: gramática para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div>
</div>
<p>También tenemos los paquetes <code>{purrr}</code> para el manejo de listas, <code>{forcast}</code> para cualitativas, <code>{lubridate}</code> para fechas, <code>{readxl}</code> para importar archivos .xls y .xlsx, <code>{rvest}</code> para web scraping y <code>{rmarkdown}</code> para comunicar resultados.</p>
</section>
<section id="filosofía-base-tidy-data" class="slide level2">
<h2>Filosofía base: tidy data</h2>
<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way (Hadley Wickham, Chief Scientist en RStudio)</p>
</blockquote>
<div style="font-size:120px; text-align: center; color:#F8DF58;">
<p><b>TIDY</b><b><span style="color:#CAB0EE;">VERSE</span></b></p>
</div>
<p>El <span class="hl-purple"><strong>universo</strong></span> de paquetes <code>{tidyverse}</code> se basa en la idea introducido por <strong>Hadley Wickham</strong> (el Dios al que rezo) de <span class="hl-yellow"><strong>estandarizar</strong></span> el formato los datos para</p>
<div>
<ul>
<li class="fragment"><span class="hl-green"><strong>sistematizar</strong></span> la depuración</li>
<li class="fragment">hacer más <span class="hl-green"><strong>sencillo</strong></span> su manipulación.</li>
<li class="fragment">código <span class="hl-green"><strong>legible</strong></span></li>
</ul>
</div>
</section>
<section id="reglas-del-tidy-data" class="slide level2">
<h2>Reglas del tidy data</h2>
<p>Lo primero por tanto será entender qué son los <span class="hl-yellow"><strong>conjuntos tidydata</strong></span> ya que todo <code>{tidyverse}</code> se basa en que los datos están estandarizados.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-in">
<ol type="1">
<li>Cada <span class="hl-yellow"><strong>variable</strong></span> en una <span class="hl-purple"><strong>única columna</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="2" type="1">
<li>Cada <span class="hl-yellow"><strong>individuo</strong></span> en una <span class="hl-purple"><strong>fila diferente</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="3" type="1">
<li>Cada <span class="hl-yellow"><strong>celda</strong></span> con un <span class="hl-purple"><strong>único valor</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="4" type="1">
<li>Cada <span class="hl-yellow"><strong>dataset</strong></span> en un <span class="hl-purple"><strong>tibble</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="5" type="1">
<li>Si queremos cruzar <span class="hl-yellow"><strong>múltiples tablas</strong></span> debemos tener una <span class="hl-purple"><strong>columna común</strong></span></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
</section>
<section id="tubería-pipe" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>En <code>{tidyverse}</code> será clave el <span class="hl-yellow"><strong>operador pipe (tubería)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): será una <span class="hl-yellow"><strong>tubería que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>En R base, si queremos aplicar tres funciones <code>first()</code>, <code>second()</code> y <code>third()</code> en orden, sería</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1"></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(datos)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>En <code>{tidyverse}</code> podremos <span class="hl-yellow"><strong>leer de izquierda a derecha</strong></span> y separar los datos de las acciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">first</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() <span class="sc">|&gt;</span> <span class="fu">third</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Apunte importante</strong></p>
</div>
<div class="callout-content">
<p>Desde la versión 4.1.0 de <code>R</code> disponemos de <code>|&gt;</code>, un pipe <strong>nativo</strong> disponible <span class="hl-purple"><strong>fuera de tidyverse</strong></span>, sustituyendo al <span class="hl-red"><strong>antiguo pipe</strong></span> <code>%&gt;%</code> que dependía del paquete <code>{magrittr}</code> (bastante problemático).</p>
</div>
</div>
</div>
</div>
</section>
<section id="tubería-pipe-1" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>La principal ventaja es que el <span class="hl-yellow"><strong>código sea muy legible (casi literal)</strong></span> pudiendo hacer grandes operaciones con los datos con apenas código.</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb337-2"><a href="#cb337-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-3"><a href="#cb337-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-4"><a href="#cb337-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-5"><a href="#cb337-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-6"><a href="#cb337-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-7"><a href="#cb337-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-8"><a href="#cb337-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-9"><a href="#cb337-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-10"><a href="#cb337-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb337-11"><a href="#cb337-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<center>
<img src="img/logo_pipe.png" width="360px">
</center>
</div>
</div>
</section>
<section id="datos-sucios-messy-data" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>¿Pero qué aspecto tienen los <span class="hl-yellow"><strong>datos no tidy</strong></span>? Vamos a cargar la tabla <code>table4a</code> del paquete <code>{tidyr}</code> (ya lo tenemos cargado del entorno tidyverse).</p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb338-2"><a href="#cb338-2"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_longer" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>❎ Cada <span class="hl-red"><strong>fila representa dos observaciones</strong></span> (1999 y 2000) → las columnas <code>1999</code> y <code>2000</code> en realidad deberían ser en sí <span class="hl-yellow"><strong>valores de una variable</strong></span> y no nombres de columnas.</p>
</div>
</div>
<div class="fragment">
<p>Incluiremos una <span class="hl-yellow"><strong>nueva columna</strong></span> que nos guarde el año y otra que guarde el valor de la variable de interés en cada uno de esos años. Y lo haremos con la función <code>pivot_longer()</code>: <span class="hl-yellow"><strong>pivotaremos la tabla</strong></span> a formato long:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb342-2"><a href="#cb342-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div>
</section>
<section id="pivotar-pivot_longer-1" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb344-2"><a href="#cb344-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb344-3"><a href="#cb344-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb344-4"><a href="#cb344-4"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/table4a.jpg"></p>
</div>
</div>
<p>&nbsp;</p>
<ul>
<li><code>cols</code>: <span class="hl-yellow"><strong>nombre de las variables a pivotar</strong></span></li>
<li><code>names_to</code>: nombre de la nueva variable a la quemandamos la <span class="hl-yellow"><strong>cabecera</strong></span> de la tabla (los nombres).</li>
<li><code>values_to</code>: nombre de la nueva variable a la que vamos a mandar los <span class="hl-yellow"><strong>datos</strong></span>.</li>
</ul>
</section>
<section id="datos-sucios-messy-data-1" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table2</code></p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_wider" class="slide level2">
<h2>Pivotar: pivot_wider()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>observación está dividido en dos filas</strong></span> → los <span class="hl-yellow"><strong>registros con el mismo año deberían ser el mismo</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será lo opuesto: con <code>pivot_wider()</code> <span class="hl-yellow"><strong>ensancharemos la tabla</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1"></a>table2 <span class="sc">|&gt;</span>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-2" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table3</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="separar-separate" class="slide level2">
<h2>Separar: separate()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>celda contiene varios valores</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será hacer uso de la función <code>separate()</code> para mandar <span class="hl-yellow"><strong>separar cada valor</strong></span> a una columna diferente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="separar-separate-1" class="slide level2">
<h2>Separar: separate()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>Fíjate que los datos, aunque los ha separado, <span class="hl-red"><strong>los ha mantenido como texto</strong></span> cuando en realidad deberían ser variables numéricas. Para ello podemos añadir el argumento opcional <code>convert = TRUE</code></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases        pop
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-3" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos el último ejemplo con la tabla <code>table5</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="unir-unite" class="slide level2">
<h2>Unir unite()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>❎ Tenemos <span class="hl-red"><strong>mismos valores divididos en dos columnas</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Usaremos <code>unite()</code> para <span class="hl-yellow"><strong>unir los valores</strong></span> de siglo y año en una misma columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1"></a>table5 <span class="sc">|&gt;</span> <span class="fu">unite</span>(<span class="at">col =</span> year_completo, century, year, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year_completo rate             
  &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;            
1 Afghanistan 1999          745/19987071     
2 Afghanistan 2000          2666/20595360    
3 Brazil      1999          37737/172006362  
4 Brazil      2000          80488/174504898  
5 China       1999          212258/1272915272
6 China       2000          213766/1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-6" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-7-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-7-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<p>📝 Echa un vistazo a la tabla <code>table4b</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1"></a>table4b <span class="sc">|&gt;</span></span>
<span id="cb367-2"><a href="#cb367-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"1999"</span><span class="sc">:</span><span class="st">"2000"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb367-3"><a href="#cb367-3"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-2">
<p>📝 Echa un vistazo a la tabla <code>relig_income</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1"></a>relig_income <span class="sc">|&gt;</span></span>
<span id="cb368-2"><a href="#cb368-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"&lt;$10k"</span><span class="sc">:</span><span class="st">"Don't know/refused"</span>,</span>
<span id="cb368-3"><a href="#cb368-3"></a>               <span class="at">names_to =</span> <span class="st">"income"</span>,</span>
<span id="cb368-4"><a href="#cb368-4"></a>               <span class="at">values_to =</span> <span class="st">"people"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-3">
<p>📝 Echa un vistazo a la tabla <code>billboard</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1"></a>billboard <span class="sc">|&gt;</span></span>
<span id="cb369-2"><a href="#cb369-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"wk1"</span><span class="sc">:</span><span class="st">"wk76"</span>,</span>
<span id="cb369-3"><a href="#cb369-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>,</span>
<span id="cb369-4"><a href="#cb369-4"></a>               <span class="at">names_prefix =</span> <span class="st">"wk"</span>,</span>
<span id="cb369-5"><a href="#cb369-5"></a>               <span class="at">values_to =</span> <span class="st">"position"</span>,</span>
<span id="cb369-6"><a href="#cb369-6"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-6" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>En el paquete <code>{tidyr}</code> contamos con el dataset <code>who</code> (dataset de la Organización Mundial de la Salud)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb370-2"><a href="#cb370-2"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>¿Qué <span class="hl-yellow"><strong>significan los datos</strong></span>? ¿Cuántas <span class="hl-yellow"><strong>variables y observaciones</strong></span> tenemos?</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>¿Cuántos <span class="hl-yellow"><strong>tipos de variables</strong></span> tenemos?</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>¿Todas las variables son necesarias? <span class="hl-yellow"><strong>Elimina la información redundante</strong></span>.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li><span class="hl-yellow"><strong>Convierte a tidydata</strong></span> la base de datos realizando todas las opciones que consideres (consejo: usa papel y boli para bocetar como debería quedar la base de datos).</li>
</ol>
</div>
</section></section>
<section>
<section id="clase-7-importar" class="title-slide slide level1 center">
<h1>Clase 7: importar y exportar</h1>
<p><span style="color:#444442;"><strong>Repasando tidydata. Importar/exportar datos en R</strong></span></p>
</section>
<section id="caso-práctico-anterior" class="slide level2">
<h2>🐣 Caso práctico (anterior)</h2>
<p>En el paquete <code>{tidyr}</code> contamos con el dataset <code>who</code> (dataset de la Organización Mundial de la Salud)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb371-2"><a href="#cb371-2"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>¿Qué <span class="hl-yellow"><strong>significan los datos</strong></span>? ¿Cuántas <span class="hl-yellow"><strong>variables y observaciones</strong></span> tenemos?</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>¿Cuántos <span class="hl-yellow"><strong>tipos de variables</strong></span> tenemos?</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>¿Todas las variables son necesarias? <span class="hl-yellow"><strong>Elimina la información redundante</strong></span>.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li><span class="hl-yellow"><strong>Convierte a tidydata</strong></span> la base de datos realizando todas las opciones que consideres (consejo: usa papel y boli para bocetar como debería quedar la base de datos).</li>
</ol>
</div>
</section>
<section id="un-poco-más-de-tidydata" class="slide level2">
<h2>Un poco más de tidydata…</h2>
<p>Del paquete <code>{tidyr}</code> usaremos el dataset <code>world_bank_pop</code>, que almacena la población de cada país y cada año, según el Banco Mundial. <span class="hl-yellow"><strong>Convierte a tidydata</strong></span></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1"></a>world_bank_pop <span class="sc">|&gt;</span> </span>
<span id="cb372-2"><a href="#cb372-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"2000"</span><span class="sc">:</span><span class="st">"2017"</span>,</span>
<span id="cb372-3"><a href="#cb372-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb372-4"><a href="#cb372-4"></a>               <span class="at">values_to =</span> <span class="st">"pop"</span>,</span>
<span id="cb372-5"><a href="#cb372-5"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19,008 × 4
   country indicator   year    pop
   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt;
 1 ABW     SP.URB.TOTL 2000  41625
 2 ABW     SP.URB.TOTL 2001  42025
 3 ABW     SP.URB.TOTL 2002  42194
 4 ABW     SP.URB.TOTL 2003  42277
 5 ABW     SP.URB.TOTL 2004  42317
 6 ABW     SP.URB.TOTL 2005  42399
 7 ABW     SP.URB.TOTL 2006  42555
 8 ABW     SP.URB.TOTL 2007  42729
 9 ABW     SP.URB.TOTL 2008  42906
10 ABW     SP.URB.TOTL 2009  43079
# ℹ 18,998 more rows</code></pre>
</div>
</div>
</section>
<section id="importarexportar-datos" class="slide level2">
<h2>Importar/exportar datos</h2>
<p>Hasta ahora solo hemos usado datos cargados ya en paquetes pero muchas veces <span class="hl-yellow"><strong>necesitaremos importar datos de manera externa</strong></span>. Una de las principales <span class="hl-yellow"><strong>fortalezas</strong></span> de <code>R</code> es que podemos importar datos de manera muy sencilla en distintos formatos:</p>
<ul>
<li><span class="hl-yellow"><strong>Formatos nativos de R</strong></span>: formatos <code>.rda</code>, <code>.RData</code> y <code>.rds</code></li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Datos rectangulares (tabulados)</strong></span>: formatos <code>.csv</code> y <code>.tsv</code></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Datos sin tabular</strong></span>: formato <code>.txt</code></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Datos en excel</strong></span>: formatos <code>.xls</code> y <code>.xlsx</code></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Datos desde SAS/Stata/SPSS</strong></span>: formatos <code>.sas7bdat</code>, <code>.sav</code> y <code>.dat</code></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Datos desde API</strong></span>: Google Drive, aemet, catastro, twitter, spotify, etc</li>
</ul>
</div>
</section>
<section id="formatos-nativos-de-r" class="slide level2">
<h2>Formatos nativos de R</h2>
<p>Los <span class="hl-yellow"><strong>ficheros más simples</strong></span> para importar en <code>R</code> (y que suele ocupar menos espacio en disco) son sus propias <span class="hl-yellow"><strong>extensiones nativas</strong></span>: archivos con formatos <code>.RData</code>, <code>.rda</code> y <code>.rds</code>.</p>
<div class="fragment">
<p>Para cargar los dos primeros simplemente necesitamos <span class="hl-yellow"><strong>usar la función nativa</strong></span> <code>load()</code> indicándole la ruta del archivo.</p>
<ul>
<li>Archivo <code>.RData</code>: vamos a importar un dataset con las distintas características de los <span class="hl-purple"><strong>viajeros del Titanic</strong></span>, incluyendo quién sobrevivió y quién murió.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1"></a><span class="fu">load</span>(<span class="st">"./datos/titanic.RData"</span>)</span>
<span id="cb374-2"><a href="#cb374-2"></a><span class="fu">as_tibble</span>(titanic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 12
  PassengerId Survived Pclass Name    Sex     Age SibSp Parch Ticket  Fare Cabin
        &lt;int&gt;    &lt;int&gt;  &lt;int&gt; &lt;fct&gt;   &lt;fct&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;fct&gt;
1           1        0      3 Braund… male     22     1     0 A/5 2…  7.25 ""   
2           2        1      1 Cuming… fema…    38     1     0 PC 17… 71.3  "C85"
3           3        1      3 Heikki… fema…    26     0     0 STON/…  7.92 ""   
4           4        1      1 Futrel… fema…    35     1     0 113803 53.1  "C12…
5           5        0      3 Allen,… male     35     0     0 373450  8.05 ""   
# ℹ 1 more variable: Embarked &lt;fct&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="formatos-nativos-de-r-1" class="slide level2">
<h2>Formatos nativos de R</h2>
<ul>
<li>Archivo <code>.rda</code>: vamos a importar un dataset con <span class="hl-purple"><strong>datos de cáncer de pecho</strong></span> de <a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-13-33"><strong>Royston and Altman (2013)</strong></a>, incluyendo 2982 pacientes y sus características</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1"></a><span class="fu">load</span>(<span class="st">"./datos/rotterdam_breast_cancer.rda"</span>)</span>
<span id="cb376-2"><a href="#cb376-2"></a><span class="fu">as_tibble</span>(rotterdam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 15
    pid  year   age  meno size  grade nodes   pgr    er hormon chemo rtime recur
  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
1     1  1992    74     1 &lt;=20      3     0    35   291      0     0  1799     0
2     2  1984    79     1 20-50     3     0    36   611      0     0  2828     0
3     3  1983    44     0 &lt;=20      2     0   138     0      0     0  6012     0
4     4  1985    70     1 20-50     3     0     0    12      0     0  2624     0
5     5  1983    75     1 &lt;=20      3     0   260   409      0     0  4915     0
6     6  1983    52     0 &lt;=20      3     0   139   303      0     0  5888     0
7     7  1993    40     0 &lt;=20      2     0    13     4      0     0  2491     0
# ℹ 2 more variables: dtime &lt;dbl&gt;, death &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="formatos-nativos-de-r-2" class="slide level2">
<h2>Formatos nativos de R</h2>
<ul>
<li>Archivo <code>.rds</code>: para este tipo debemos usar <code>readRDS()</code>, y necesitamos incorporar un <span class="hl-yellow"><strong>argumento <code>file</code></strong></span> con la ruta. En este caso vamos a importar <span class="hl-purple"><strong>datos de cáncer de pulmón</strong></span> del North Central Cancer Treatment Group.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1"></a>lung_cancer <span class="ot">&lt;-</span></span>
<span id="cb378-2"><a href="#cb378-2"></a>  <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"./datos/NCCTG_lung_cancer.rds"</span>) <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
   inst  time status   age   sex ph.ecog ph.karno pat.karno meal.cal wt.loss
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1     3   306      2    74     1       1       90       100     1175      NA
2     3   455      2    68     1       0       90        90     1225      15
3     3  1010      1    56     1       0       90        90       NA      15
4     5   210      2    57     1       1       90        60     1150      11
5     1   883      2    60     1       0      100        90       NA       0</code></pre>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las <span class="hl-yellow"><strong>rutas</strong></span> deben ir siempre <span class="hl-yellow"><strong>sin espacios, ni eñes, ni tildes</strong></span>. Y fíjate que los archivos cargados con <code>load()</code> se cargan automáticamente en el environment (con el nombre guardado originalmente, sin necesidad de asignarlo a nada), pero las funciones <code>read()</code> solo se carga de manera local (sino se guarda, no existe a futuro)</p>
</div>
</div>
</div>
</section>
<section id="datos-rectangulares-readr" class="slide level2">
<h2>Datos rectangulares: readr</h2>
<p>El paquete <code>{readr}</code> dentro del entorno <code>{tidyverse}</code> contiene distintas funciones útiles para la <span class="hl-yellow"><strong>carga de datos rectangulares (sin formatear)</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><code>read_csv()</code>: archivos <code>.csv</code> cuyo <span class="hl-purple"><strong>separador sea la coma</strong></span></li>
<li><code>read_csv2()</code>: <span class="hl-purple"><strong>punto y coma</strong></span></li>
<li><code>read_tsv()</code>: <span class="hl-purple"><strong>tabulador</strong></span>.</li>
<li><code>read_table()</code>: <span class="hl-purple"><strong>espacio</strong></span>.</li>
<li><code>read_delim()</code>: función genérica para <span class="hl-purple"><strong>archivos delimitados por caracteres</strong></span>.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="img/data-import-readr.png"></p>
</div>
</div>
<p>Todos necesitan como <strong>argumento la ruta del archivo</strong> amén de <strong>otros opcionales</strong> (saltar o no cabecera, decimales, etc). Ver más en <a href="https://readr.tidyverse.org/" class="uri">https://readr.tidyverse.org/</a></p>
</section>
<section id="datos-tabulados-.csv-.tsv" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>La principal ventaja de <code>{readr}</code> es que <span class="hl-yellow"><strong>automatiza el formateo</strong></span> para pasar de un archivo plano (sin formato) a un tibble (en filas y columnas, con formato).</p>
<div class="fragment">
<ul>
<li>Archivo <code>.csv</code>: con <code>read_csv()</code> cargaremos archivos <span class="hl-purple"><strong>separados por coma</strong></span>, pasando como <span class="hl-yellow"><strong>argumento la ruta</strong></span> en <code>file = ...</code>. Vamos a importar el dataset <code>chickens.csv</code> (sobre pollos de dibujos animados, why not). Si te fijas en la salida nos proporciona el tipo de variables.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb380-2"><a href="#cb380-2"></a>chickens <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>)</span>
<span id="cb380-3"><a href="#cb380-3"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-1" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>El <span class="hl-yellow"><strong>formato de las variables</strong></span> normalmente lo hará <code>read_csv()</code> de forma <span class="hl-yellow"><strong>automática</strong></span>, y podemos consultarlo con <code>spec()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1"></a><span class="fu">spec</span>(chickens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  chicken = col_character(),
  sex = col_character(),
  eggs_laid = col_double(),
  motto = col_character()
)</code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-2" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Aunque lo haga normalmente bien de forma automática podemos <span class="hl-yellow"><strong>especificar el formato explícitamente</strong></span> en <code>col_types = list()</code> (en formato lista, con <code>col_xxx()</code> para cada tipo de variable, por ejemplo una la pondremos como cualitativa o factor).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb384-2"><a href="#cb384-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb384-3"><a href="#cb384-3"></a>           <span class="at">col_types =</span> <span class="fu">list</span>(<span class="fu">col_character</span>(), <span class="fu">col_factor</span>(), <span class="fu">col_double</span>(), <span class="fu">col_character</span>()))</span>
<span id="cb384-4"><a href="#cb384-4"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;fct&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-3" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Incluso podemos indicar que <span class="hl-yellow"><strong>variables que queremos seleccionar</strong></span> (sin ocupar memoria), indicándoselo en <code>col_select = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb386-2"><a href="#cb386-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb386-3"><a href="#cb386-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(chicken, sex, eggs_laid))</span>
<span id="cb386-4"><a href="#cb386-4"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  chicken                 sex     eggs_laid
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt;
1 Foghorn Leghorn         rooster         0
2 Chicken Little          hen             3
3 Ginger                  hen            12
4 Camilla the Chicken     hen             7
5 Ernie The Giant Chicken rooster         0</code></pre>
</div>
</div>
</section>
<section id="datos-sin-tabular-.txt" class="slide level2">
<h2>Datos sin tabular (.txt)</h2>
<p>Vamos a usar de nuevo <code>read_csv()</code> con el archivo <code>massey-rating.txt</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb388-2"><a href="#cb388-2"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   `UCC PAY LAZ KPK  RT   COF BIH DII ENG ACU Rank Team            Conf`
   &lt;chr&gt;                                                                
 1 1   1   1   1   1     1   1   1   1   1    1 Ohio St          B10    
 2 2   2   2   2   2     2   2   2   4   2    2 Oregon           P12    
 3 3   4   3   4   3     4   3   4   2   3    3 Alabama          SEC    
 4 4   3   4   3   4     3   5   3   3   4    4 TCU              B12    
 5 6   6   6   5   5     7   6   5   6  11    5 Michigan St      B10    
 6 7   7   7   6   7     6  11   8   7   8    6 Georgia          SEC    
 7 5   5   5   7   6     8   4   6   5   5    7 Florida St       ACC    
 8 8   8   9   9  10     5   7   7  10   7    8 Baylor           B12    
 9 9  11   8  13  11    11  12   9  14   9    9 Georgia Tech     ACC    
10 13  10  13  11   8     9  10  11   9  10   10 Mississippi      SEC   </code></pre>
</div>
</div>
<div class="fragment">
<p>Si te fijas nos interpreta todo como una sola columna: <span class="hl-yellow"><strong>no tiene comas el archivo y no sabe por donde separar</strong></span></p>
</div>
<div class="fragment">
<p>¿Qué sucede cuando el <span class="hl-red"><strong>separador no es el correcto</strong></span>?</p>
</div>
</section>
<section id="datos-sin-tabular-.txt-1" class="slide level2">
<h2>Datos sin tabular (.txt)</h2>
<p>Para ello tenemos</p>
<ul>
<li><p><code>read_csv2()</code> cuando el <span class="hl-yellow"><strong>separador sea el punto y coma</strong></span>, <code>read_tsv()</code> cuando el <span class="hl-yellow"><strong>sea un tabulador</strong></span> y <code>read_table()</code> cuando el <span class="hl-yellow"><strong>sea un espacio</strong></span></p></li>
<li><p><code>read_delim()</code> en general</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_table</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb390-2"><a href="#cb390-2"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 13
     UCC   PAY   LAZ   KPK    RT   COF   BIH   DII   ENG   ACU  Rank Team  Conf 
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1     1     1     1     1     1     1     1     1     1     1     1 Ohio  St   
 2     2     2     2     2     2     2     2     2     4     2     2 Oreg… P12  
 3     3     4     3     4     3     4     3     4     2     3     3 Alab… SEC  
 4     4     3     4     3     4     3     5     3     3     4     4 TCU   B12  
 5     6     6     6     5     5     7     6     5     6    11     5 Mich… St   
 6     7     7     7     6     7     6    11     8     7     8     6 Geor… SEC  
 7     5     5     5     7     6     8     4     6     5     5     7 Flor… St   
 8     8     8     9     9    10     5     7     7    10     7     8 Bayl… B12  
 9     9    11     8    13    11    11    12     9    14     9     9 Geor… Tech 
10    13    10    13    11     8     9    10    11     9    10    10 Miss… SEC  </code></pre>
</div>
</div>
</section>
<section id="datos-en-excel-.xls-.xlsx" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<p>Otro de los paquetes fundamentales de importación será el paquete <code>{readxl}</code> para <span class="hl-yellow"><strong>importar datos desde una Excel</strong></span>. Tres funciones serán claves:</p>
<ul>
<li><code>read_xls()</code> específica para <code>.xls</code>, <code>read_xlsx()</code> específica para <code>.xlsx</code></li>
<li><code>read_excel()</code>: para ambas</li>
</ul>
<div class="fragment">
<p>Vamos a importar <code>deaths.xlsx</code> con registros de fallecimientos de famosos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb392-2"><a href="#cb392-2"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>)</span>
<span id="cb392-3"><a href="#cb392-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 6
  `Lots of people`             ...2       ...3  ...4     ...5          ...6     
  &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    
1 simply cannot resist writing &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          some not…
2 at                           the        top   &lt;NA&gt;     of            their sp…
3 or                           merging    &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          cells    
4 Name                         Profession Age   Has kids Date of birth Date of …
5 David Bowie                  musician   69    TRUE     17175         42379    
6 Carrie Fisher                actor      60    TRUE     20749         42731    
7 Chuck Berry                  musician   90    TRUE     9788          42812    
8 Bill Paxton                  actor      61    TRUE     20226         42791    </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-en-excel-.xls-.xlsx-1" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 6
  `Lots of people`             ...2       ...3  ...4     ...5          ...6     
  &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    
1 simply cannot resist writing &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          some not…
2 at                           the        top   &lt;NA&gt;     of            their sp…
3 or                           merging    &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          cells    
4 Name                         Profession Age   Has kids Date of birth Date of …
5 David Bowie                  musician   69    TRUE     17175         42379    
6 Carrie Fisher                actor      60    TRUE     20749         42731    
7 Chuck Berry                  musician   90    TRUE     9788          42812    
8 Bill Paxton                  actor      61    TRUE     20226         42791    </code></pre>
</div>
</div>
<p>Algo por <span class="hl-yellow"><strong>desgracia muy habitual</strong></span> es que haya <span class="hl-red"><strong>algún tipo de comentario o texto al inicio</strong></span> del archivo, teniendo que <span class="hl-yellow"><strong>saltarnos dichas filas</strong></span>.</p>
</section>
<section id="datos-en-excel-.xls-.xlsx-2" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<p>Podemos <span class="hl-yellow"><strong>saltarnos dichas filas</strong></span> directamente en la carga con <code>skip = ...</code> (indicando el número de filas que nos saltamos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb396-2"><a href="#cb396-2"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb396-3"><a href="#cb396-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  Name          Profession Age   `Has kids` `Date of birth`     `Date of death`
  &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;      &lt;dttm&gt;              &lt;chr&gt;          
1 David Bowie   musician   69    TRUE       1947-01-08 00:00:00 42379          
2 Carrie Fisher actor      60    TRUE       1956-10-21 00:00:00 42731          
3 Chuck Berry   musician   90    TRUE       1926-10-18 00:00:00 42812          
4 Bill Paxton   actor      61    TRUE       1955-05-17 00:00:00 42791          
5 Prince        musician   57    TRUE       1958-06-07 00:00:00 42481          </code></pre>
</div>
</div>
</section>
<section id="datos-en-excel-.xls-.xlsx-3" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<p>Además con <code>col_names = ...</code> podemos renombrar ya las columnas en la importación (si <span class="hl-yellow"><strong>proporcionamos nombres asume la 1ª línea ya como un dato</strong></span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb398" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1"></a>deaths <span class="ot">&lt;-</span></span>
<span id="cb398-2"><a href="#cb398-2"></a>  <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>,</span>
<span id="cb398-3"><a href="#cb398-3"></a>            <span class="at">skip =</span> <span class="dv">5</span>,</span>
<span id="cb398-4"><a href="#cb398-4"></a>            <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"profession"</span>, <span class="st">"age"</span>, <span class="st">"kids"</span>, <span class="st">"birth"</span>, <span class="st">"death"</span>))</span>
<span id="cb398-5"><a href="#cb398-5"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
  name               profession age   kids  birth               death
  &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;chr&gt;
1 David Bowie        musician   69    TRUE  1947-01-08 00:00:00 42379
2 Carrie Fisher      actor      60    TRUE  1956-10-21 00:00:00 42731
3 Chuck Berry        musician   90    TRUE  1926-10-18 00:00:00 42812
4 Bill Paxton        actor      61    TRUE  1955-05-17 00:00:00 42791
5 Prince             musician   57    TRUE  1958-06-07 00:00:00 42481
6 Alan Rickman       actor      69    FALSE 1946-02-21 00:00:00 42383
7 Florence Henderson actor      82    TRUE  1934-02-14 00:00:00 42698</code></pre>
</div>
</div>
</section>
<section id="datos-en-excel-.xls-.xlsx-4" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<p>En ocasiones las <span class="hl-red"><strong>fechas de Excel están mal formateadas</strong></span> (sorpresa): podemos hacer uso de <code>convertToDate()</code> del paquete <code>{openxlsx}</code> para convertirlo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb400-2"><a href="#cb400-2"></a>deaths<span class="sc">$</span>death <span class="ot">&lt;-</span> <span class="fu">convertToDate</span>(deaths<span class="sc">$</span>death)</span>
<span id="cb400-3"><a href="#cb400-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
  name               profession age   kids  birth               death     
  &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;date&gt;    
1 David Bowie        musician   69    TRUE  1947-01-08 00:00:00 2016-01-10
2 Carrie Fisher      actor      60    TRUE  1956-10-21 00:00:00 2016-12-27
3 Chuck Berry        musician   90    TRUE  1926-10-18 00:00:00 2017-03-18
4 Bill Paxton        actor      61    TRUE  1955-05-17 00:00:00 2017-02-25
5 Prince             musician   57    TRUE  1958-06-07 00:00:00 2016-04-21
6 Alan Rickman       actor      69    FALSE 1946-02-21 00:00:00 2016-01-14
7 Florence Henderson actor      82    TRUE  1934-02-14 00:00:00 2016-11-24</code></pre>
</div>
</div>
</section>
<section id="datos-en-excel-.xls-.xlsx-5" class="slide level2">
<h2>Datos en excel (.xls, .xlsx)</h2>
<p>También podemos <span class="hl-yellow"><strong>cargar un Excel con varias hojas</strong></span>: para <span class="hl-yellow"><strong>indicarle la hoja</strong></span> (bien por su nombre bien por su número) usaremos el argumento <code>sheet = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"mtcars"</span>)</span>
<span id="cb402-2"><a href="#cb402-2"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 11
    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  21       6   160   110  3.9   2.62  16.5     0     1     4     4
2  21       6   160   110  3.9   2.88  17.0     0     1     4     4
3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1
4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1
5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso podemos indicar el <span class="hl-yellow"><strong>rango de celdas</strong></span> a cargar con <code>range = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"iris"</span>, <span class="at">range =</span> <span class="st">"C1:E4"</span>)</span>
<span id="cb404-2"><a href="#cb404-2"></a>iris</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
1          1.4         0.2 setosa 
2          1.4         0.2 setosa 
3          1.3         0.2 setosa </code></pre>
</div>
</div>
</div>
</section>
<section id="desde-sasstataspss" class="slide level2">
<h2>Desde SAS/STATA/SPSS</h2>
<p>El paquete <code>{haven}</code> dentro de la órbita tidyverse nos permitirá <span class="hl-yellow"><strong>importar archivos de los 3 software de pago más importantes</strong></span>: SAS, SPSS y Stata</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb406-2"><a href="#cb406-2"></a></span>
<span id="cb406-3"><a href="#cb406-3"></a><span class="co"># SAS</span></span>
<span id="cb406-4"><a href="#cb406-4"></a>iris_sas <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="at">data_file =</span> <span class="st">"./datos/iris.sas7bdat"</span>)</span>
<span id="cb406-5"><a href="#cb406-5"></a></span>
<span id="cb406-6"><a href="#cb406-6"></a><span class="co"># SPSS</span></span>
<span id="cb406-7"><a href="#cb406-7"></a>iris_spss <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="at">file =</span> <span class="st">"./datos/iris.sav"</span>)</span>
<span id="cb406-8"><a href="#cb406-8"></a></span>
<span id="cb406-9"><a href="#cb406-9"></a><span class="co"># Stata</span></span>
<span id="cb406-10"><a href="#cb406-10"></a>iris_stata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">file =</span> <span class="st">"./datos/iris.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exportar" class="slide level2">
<h2>Exportar</h2>
<p>De la misma manera que podemos importar también podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportado en <code>.RData</code> (opción recomendada para variables guardadas en <code>R</code>). Recuerda que esta extensión <span class="hl-yellow"><strong>solo se podrá usar en <code>R</code></strong></span>. Para ello nos basta con usar <code>save(objeto, file = ruta)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb407-2"><a href="#cb407-2"></a><span class="fu">save</span>(tabla, <span class="at">file =</span> <span class="st">"./datos/tabla_prueba.RData"</span>)</span>
<span id="cb407-3"><a href="#cb407-3"></a><span class="fu">rm</span>(tabla) <span class="co"># eliminar</span></span>
<span id="cb407-4"><a href="#cb407-4"></a><span class="fu">load</span>(<span class="st">"./datos/tabla_prueba.RData"</span>)</span>
<span id="cb407-5"><a href="#cb407-5"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     b
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-1" class="slide level2">
<h2>Exportar</h2>
<p>De la misma manera que podemos importar también podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportado en <code>.RDS</code> (opción recomendada para variables guardadas en <code>R</code>). Recuerda que esta extensión <span class="hl-yellow"><strong>solo se podrá usar en <code>R</code></strong></span>. Para ello nos basta con usar <code>saveRDS(objeto, file = ruta)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1"></a><span class="fu">saveRDS</span>(tabla, <span class="at">file =</span> <span class="st">"tabla.RDS"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exportar-2" class="slide level2">
<h2>Exportar</h2>
<p>De la misma manera que podemos importar también podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportado en <code>.csv</code>. Para ello nos basta con usar <code>write_csv(objeto, file = ruta)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1"></a><span class="fu">write_csv</span>(tabla, <span class="at">file =</span> <span class="st">"./datos/tabla_prueba.csv"</span>)</span>
<span id="cb410-2"><a href="#cb410-2"></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/tabla_prueba.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     b
  &lt;dbl&gt; &lt;dbl&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-3" class="slide level2">
<h2>Exportar</h2>
<p>De la misma manera que podemos importar también podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportado en <code>.xlsx</code>. Para ello nos basta con usar <code>write.xlsx(objeto, file = ruta)</code> del paquete <code>{openxlsx}</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb412-2"><a href="#cb412-2"></a><span class="fu">write.xlsx</span>(tabla, <span class="at">file =</span> <span class="st">"./datos/tabla_prueba.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="desde-web" class="slide level2">
<h2>Desde web</h2>
<p>Una de las principales ventajas de <code>R</code> es que podemos hacer uso de todas las funciones anteriores de <span class="hl-yellow"><strong>importar pero directamente desde una web</strong></span>, sin necesidad de realizar la descarga manual: en lugar de pasarle la ruta local le indicaremos el <span class="hl-yellow"><strong>enlace</strong></span>. Por ejemplo, vamos a descargar los datos de covid del ISCIII (<a href="https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos" class="uri">https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1"></a>covid_datos <span class="ot">&lt;-</span></span>
<span id="cb413-2"><a href="#cb413-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span>
<span id="cb413-3"><a href="#cb413-3"></a>covid_datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 700 × 8
   provincia_iso sexo  grupo_edad fecha      num_casos num_hosp num_uci num_def
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;      &lt;date&gt;         &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 A             H     0-9        2020-01-01         0        0       0       0
 2 A             H     10-19      2020-01-01         0        0       0       0
 3 A             H     20-29      2020-01-01         0        0       0       0
 4 A             H     30-39      2020-01-01         0        0       0       0
 5 A             H     40-49      2020-01-01         0        0       0       0
 6 A             H     50-59      2020-01-01         0        0       0       0
 7 A             H     60-69      2020-01-01         0        0       0       0
 8 A             H     70-79      2020-01-01         0        0       0       0
 9 A             H     80+        2020-01-01         0        0       0       0
10 A             H     NC         2020-01-01         0        0       0       0
# ℹ 690 more rows</code></pre>
</div>
</div>
</section>
<section id="desde-google-drive" class="slide level2">
<h2>Desde google drive</h2>
<p>Otra opción disponible (sobre todo si trabajamos con otras personas que trabajan) es <span class="hl-yellow"><strong>importar desde una hoja de cálculo Google Drive</strong></span>, haciendo uso de <code>read_sheet()</code> del paquete <code>{googlesheets4}</code></p>
<p>La primera vez te pedirá un permiso de tidyverse para interactuar con vuestro drive</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb415-2"><a href="#cb415-2"></a>google_sheet <span class="ot">&lt;-</span></span>
<span id="cb415-3"><a href="#cb415-3"></a>  <span class="fu">read_sheet</span>(<span class="st">"https://docs.google.com/spreadsheets/d/1n_UTbD93-oDJR2r-rsMNff5ro147NL_ZN_vYIA2eJ3Q/edit?usp=sharing"</span>)</span>
<span id="cb415-4"><a href="#cb415-4"></a>google_sheet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="desde-api-owid" class="slide level2">
<h2>Desde API (owid)</h2>
<p>Una opción también muy interesante es la <span class="hl-yellow"><strong>carga de datos desde una API</strong></span>: un intermediario entre una app o proveedor datos y nuestro <code>R</code>. Por ejemplo, vamos a cargar la librería <code>{owidR}</code>, que nos permite la descarga de datos de la web <a href="https://ourworldindata.org/" class="uri">https://ourworldindata.org/</a>. La función <code>owid_covid()</code> nos carga sin darnos cuenta más de 300 000 registros con más de 50 variables de 238 países</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1"></a><span class="fu">library</span>(owidR)</span>
<span id="cb416-2"><a href="#cb416-2"></a><span class="fu">owid_covid</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="desde-api-owid-1" class="slide level2">
<h2>Desde API (owid)</h2>
<p>Este paquete tiene la función <code>owid_search()</code> para buscar datasets por palabras clave, por ejemplo, <code>emissions</code>, dándonos un dataset con el título de la base de datos y su id para luego usarla.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1"></a><span class="fu">as_tibble</span>(<span class="fu">owid_search</span>(<span class="st">"emissions"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Vamos a pedirle por ejemplo las <span class="hl-yellow"><strong>emisiones de la oecd</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1"></a><span class="fu">owid</span>(<span class="st">"emissions-of-air-pollutants-oecd"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="desde-api-aemet" class="slide level2">
<h2>Desde API (aemet)</h2>
<p>En muchas ocasiones para conectar con la API tendremos antes que <span class="hl-yellow"><strong>registrarnos y obtener una clave</strong></span>, es el caso del paquete <code>{climaemet}</code> para acceder a datos meteorológicos (<a href="https://opendata.aemet.es/centrodedescargas/inicio" class="uri">https://opendata.aemet.es/centrodedescargas/inicio</a>)</p>
<p>Una vez que tenemos la clave de la API la registramos en nuestro RStudio para poder usarla a futuro</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1"></a><span class="fu">library</span>(climaemet)</span>
<span id="cb419-2"><a href="#cb419-2"></a></span>
<span id="cb419-3"><a href="#cb419-3"></a><span class="co"># Definir la clave</span></span>
<span id="cb419-4"><a href="#cb419-4"></a>apikey <span class="ot">&lt;-</span> <span class="st">"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqYXZhbHYwOUB1Y20uZXMiLCJqdGkiOiI4YTU1ODUxMS01MTE3LTQ4MTYtYmM4OS1hYmVkNDhiODBkYzkiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTY2NjQ2OTcxNSwidXNlcklkIjoiOGE1NTg1MTEtNTExNy00ODE2LWJjODktYWJlZDQ4YjgwZGM5Iiwicm9sZSI6IiJ9.HEMR77lZy2ASjmOxJa8ppx2J8Za1IViurMX3p1reVBU"</span></span>
<span id="cb419-5"><a href="#cb419-5"></a></span>
<span id="cb419-6"><a href="#cb419-6"></a><span class="fu">aemet_api_key</span>(apikey, <span class="at">install =</span> <span class="cn">TRUE</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="desde-api-aemet-1" class="slide level2">
<h2>Desde API (aemet)</h2>
<p>Con dicho paquete podemos hacer una <span class="hl-yellow"><strong>búsqueda de estaciones</strong></span> para conocer tanto su código postal como su código identificador dentro de la red AEMET</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">aemet_stations</span>()</span>
<span id="cb420-2"><a href="#cb420-2"></a>stations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 291 × 7
   indicativo indsinop nombre                 provincia altitud longitud latitud
   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;                  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
 1 0252D      "08186"  ARENYS DE MAR          BARCELONA      74     2.54    41.6
 2 0076       "08181"  BARCELONA AEROPUERTO   BARCELONA       4     2.07    41.3
 3 0200E      ""       BARCELONA, FABRA       BARCELONA     408     2.12    41.4
 4 0201D      "08180"  BARCELONA              BARCELONA       6     2.2     41.4
 5 0149X      "08174"  MANRESA                BARCELONA     291     1.84    41.7
 6 0229I      "08192"  SABADELL AEROPUERTO    BARCELONA     146     2.10    41.5
 7 0255B      "08188"  SANTA SUSANNA          BARCELONA      40     2.70    41.7
 8 0367       "08184"  GIRONA AEROPUERTO      GIRONA        143     2.76    41.9
 9 0370B      ""       GIRONA, ANTIC INSTITUT GIRONA         95     2.83    42.0
10 0372C      "08120"  PORQUERES              GIRONA        157     2.76    42.1
# ℹ 281 more rows</code></pre>
</div>
</div>
</section>
<section id="desde-api-aemet-2" class="slide level2">
<h2>Desde API (aemet)</h2>
<p>Por ejemplo, la estación del aeropuerto de El Prat, Barcelona, es el código <code>"0076"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1"></a><span class="fu">aemet_last_obs</span>(<span class="st">"0076"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 23
   idema   lon fint                 prec   alt  vmax    vv    dv   lat  dmax
   &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 0076   2.07 2023-10-19 09:00:00     0     4   9.3   6.9   250  41.3   250
 2 0076   2.07 2023-10-19 10:00:00     0     4  11.3   8     260  41.3   260
 3 0076   2.07 2023-10-19 11:00:00     0     4  12.9   7.7   260  41.3   260
 4 0076   2.07 2023-10-19 12:00:00     0     4  10.8   7.3   250  41.3   260
 5 0076   2.07 2023-10-19 13:00:00     0     4  14.4   9.4   250  41.3   250
 6 0076   2.07 2023-10-19 14:00:00     0     4  11.8   7.7   250  41.3   260
 7 0076   2.07 2023-10-19 15:00:00     0     4  12.9   8.5   250  41.3   240
 8 0076   2.07 2023-10-19 16:00:00     0     4  13.9   6.6   250  41.3   260
 9 0076   2.07 2023-10-19 17:00:00     0     4  10.3   7.6   220  41.3   220
10 0076   2.07 2023-10-19 18:00:00     0     4  16    11.4   220  41.3   210
# ℹ 14 more rows
# ℹ 13 more variables: ubi &lt;chr&gt;, pres &lt;dbl&gt;, hr &lt;dbl&gt;, stdvv &lt;dbl&gt;, ts &lt;dbl&gt;,
#   pres_nmar &lt;dbl&gt;, tamin &lt;dbl&gt;, ta &lt;dbl&gt;, tamax &lt;dbl&gt;, tpr &lt;dbl&gt;, vis &lt;dbl&gt;,
#   stddv &lt;dbl&gt;, inso &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="desde-api-catastro" class="slide level2">
<h2>Desde API (catastro)</h2>
<p>También puedes conectar con la <span class="hl-yellow"><strong>API del catrastro</strong></span> y buscar por ejemplo por coordenadas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1"></a><span class="fu">library</span>(CatastRo)</span>
<span id="cb424-2"><a href="#cb424-2"></a><span class="fu">catr_ovc_get_rccoor</span>(<span class="at">lat =</span> <span class="fl">38.61965</span>, <span class="at">lon =</span> <span class="sc">-</span><span class="fl">3.45624</span>, <span class="at">srs =</span> <span class="st">"4230"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="desde-spotify" class="slide level2">
<h2>Desde Spotify</h2>
<p>Incluso podemos hacer un uso más complejo de las API y bajarnos <span class="hl-yellow"><strong>datos de sitios como Twitter o Spotify</strong></span> (ver documentación en <a href="https://www.rcharlie.com/spotifyr/" class="uri">https://www.rcharlie.com/spotifyr/</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1"></a><span class="fu">library</span>(spotifyr)</span>
<span id="cb425-2"><a href="#cb425-2"></a><span class="fu">Sys.setenv</span>(<span class="at">SPOTIFY_CLIENT_ID =</span> <span class="st">"79753b0500d34faaaef8673cc36bcf47"</span>)</span>
<span id="cb425-3"><a href="#cb425-3"></a><span class="fu">Sys.setenv</span>(<span class="at">SPOTIFY_CLIENT_SECRET =</span> <span class="st">'ca2955d430064ce5ba6a158a02a19772'</span>)</span>
<span id="cb425-4"><a href="#cb425-4"></a>access_token <span class="ot">&lt;-</span> <span class="fu">get_spotify_access_token</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1"></a>rosalia <span class="ot">&lt;-</span> <span class="fu">get_artist_audio_features</span>(<span class="st">"Rosalía"</span>)</span>
<span id="cb426-2"><a href="#cb426-2"></a><span class="fu">as_tibble</span>(rosalia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 63 × 39
   artist_name artist_id     album_id album_type album_images album_release_date
   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;      &lt;list&gt;       &lt;chr&gt;             
 1 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 2 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 3 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 4 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 5 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 6 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 7 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 8 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
 9 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
10 ROSALÍA     7ltDVBr6mKbR… 3zbiiu3… album      &lt;df [3 × 3]&gt; 2022-09-09        
# ℹ 53 more rows
# ℹ 33 more variables: album_release_year &lt;dbl&gt;,
#   album_release_date_precision &lt;chr&gt;, danceability &lt;dbl&gt;, energy &lt;dbl&gt;,
#   key &lt;int&gt;, loudness &lt;dbl&gt;, mode &lt;int&gt;, speechiness &lt;dbl&gt;,
#   acousticness &lt;dbl&gt;, instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;,
#   tempo &lt;dbl&gt;, track_id &lt;chr&gt;, analysis_url &lt;chr&gt;, time_signature &lt;int&gt;,
#   artists &lt;list&gt;, available_markets &lt;list&gt;, disc_number &lt;int&gt;, …</code></pre>
</div>
</div>
</section>
<section id="desde-chess.com" class="slide level2">
<h2>Desde chess.com</h2>
<p>Incluso puedes bajarte <span class="hl-yellow"><strong>datos de ajedrez</strong></span> de plataformas como <a href="https://chess.com" class="uri">https://chess.com</a> (y analizarlas)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1"></a><span class="co"># devtools::install_github("JaseZiv/chessR")</span></span>
<span id="cb428-2"><a href="#cb428-2"></a><span class="fu">library</span>(chessR)</span>
<span id="cb428-3"><a href="#cb428-3"></a><span class="fu">library</span>(chess)</span>
<span id="cb428-4"><a href="#cb428-4"></a>chess_data <span class="ot">&lt;-</span> <span class="fu">get_raw_chessdotcom</span>(<span class="at">usernames =</span> <span class="st">"DadosDeLaplace"</span>, <span class="at">year_month =</span> <span class="fu">c</span>(<span class="dv">202301</span><span class="sc">:</span><span class="dv">202303</span>))</span>
<span id="cb428-5"><a href="#cb428-5"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(chess_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 543 × 28
   GameRules TimeClass Event      Site      Date       Round White  Black Result
   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; 
 1 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… an_o… 0-1   
 2 chess     blitz     Live Chess Chess.com 2023-01-01 -     birph… Dado… 1-0   
 3 chess     blitz     Live Chess Chess.com 2023-01-01 -     Miste… Dado… 0-1   
 4 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… jmck… 1-0   
 5 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… saur… 1-0   
 6 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… gorr… 0-1   
 7 chess     blitz     Live Chess Chess.com 2023-01-01 -     CIA-S… Dado… 1-0   
 8 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… wojm… 1-0   
 9 chess     blitz     Live Chess Chess.com 2023-01-01 -     Dados… DylB… 1-0   
10 chess     blitz     Live Chess Chess.com 2023-01-01 -     timmy… Dado… 1-0   
# ℹ 533 more rows
# ℹ 19 more variables: CurrentPosition &lt;chr&gt;, Timezone &lt;chr&gt;, ECO &lt;chr&gt;,
#   ECOUrl &lt;chr&gt;, UTCDate &lt;chr&gt;, UTCTime &lt;chr&gt;, WhiteElo &lt;chr&gt;, BlackElo &lt;chr&gt;,
#   TimeControl &lt;chr&gt;, Termination &lt;chr&gt;, StartTime &lt;chr&gt;, EndDate &lt;chr&gt;,
#   EndTime &lt;chr&gt;, Link &lt;chr&gt;, Moves &lt;chr&gt;, Username &lt;chr&gt;, Variant &lt;chr&gt;,
#   SetUp &lt;chr&gt;, FEN &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="tu-turno-7" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-8-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-8-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-8-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<p>📝 El dataset <code>who</code> que hemos usado en ejercicios anteriores, expórtalo a un formato nativo de <code>R</code> en la carpeta <code>datos</code> del proyecto</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb430-2"><a href="#cb430-2"></a><span class="fu">save</span>(who, <span class="at">file =</span> <span class="st">"./datos/who.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-2">
<p>📝 Carga el dataset <code>who</code> pero desde la carpeta de datos (importa el archivo creado en el ejercicio anterior)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1"></a><span class="fu">load</span>(<span class="st">"./datos/who.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-3">
<p>📝 Repite lo mismo (exportar e importar) en 4 formatos: <code>.csv</code>, <code>.xlsx</code>, <code>.sav</code> (spss) y <code>.dta</code> (stata)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1"></a><span class="co"># csv</span></span>
<span id="cb432-2"><a href="#cb432-2"></a><span class="fu">library</span>(readr)</span>
<span id="cb432-3"><a href="#cb432-3"></a><span class="fu">write_csv</span>(who, <span class="at">file =</span> <span class="st">"./datos/who.csv"</span>)</span>
<span id="cb432-4"><a href="#cb432-4"></a>who_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who.csv"</span>)</span>
<span id="cb432-5"><a href="#cb432-5"></a></span>
<span id="cb432-6"><a href="#cb432-6"></a><span class="co"># excel</span></span>
<span id="cb432-7"><a href="#cb432-7"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb432-8"><a href="#cb432-8"></a><span class="fu">write.xlsx</span>(who, <span class="at">file =</span> <span class="st">"./datos/who.xlsx"</span>)</span>
<span id="cb432-9"><a href="#cb432-9"></a>who_data <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/who.xlsx"</span>)</span>
<span id="cb432-10"><a href="#cb432-10"></a></span>
<span id="cb432-11"><a href="#cb432-11"></a><span class="co"># sas y stata</span></span>
<span id="cb432-12"><a href="#cb432-12"></a><span class="fu">library</span>(haven)</span>
<span id="cb432-13"><a href="#cb432-13"></a><span class="fu">write_sav</span>(who, <span class="at">path =</span> <span class="st">"./datos/who.sav"</span>)</span>
<span id="cb432-14"><a href="#cb432-14"></a>who_data <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="at">path =</span> <span class="st">"./datos/who.sav"</span>)</span>
<span id="cb432-15"><a href="#cb432-15"></a></span>
<span id="cb432-16"><a href="#cb432-16"></a><span class="fu">write_dta</span>(who, <span class="at">path =</span> <span class="st">"./datos/who.dta"</span>)</span>
<span id="cb432-17"><a href="#cb432-17"></a>who_data <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">path =</span> <span class="st">"./datos/who.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-4">
<p>📝 Repite la carga del <code>who.csv</code> pero solo selecciona ya en la carga las 4 primeras columnas</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1"></a>who_select <span class="ot">&lt;-</span></span>
<span id="cb433-2"><a href="#cb433-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who.csv"</span>,</span>
<span id="cb433-3"><a href="#cb433-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"iso2"</span>, <span class="st">"iso3"</span>, <span class="st">"year"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-7" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>En la carpeta de datos tienes el dataset <code>breast-cancer-wisconsin-data.csv</code>. Crea un archivo <code>.qmd</code> y personalízalo incluyendo lo siguiente:</p>
<ol type="1">
<li>Importa el archivo csv a un <code>tibble</code>. ¿Es tidydata? ¿Cuántos pacientes y variables tenemos?</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>El dataset representa datos de cáncer de pecho (<code>id</code> identificador, <code>diagnosis</code> el diagnóstico maligno/benigno y el resto propiedades del tumor). Usando SOLO LO APRENDIDO, ¿qué % tenían un tumor maligno y qué % uno benigno?</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>¿Cuál de los dos tipos de tumores tienen, de media, un radio más elevado?</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>Busca la ayuda de la función <code>t.test()</code>. Dicha función nos permite contrastar si la media de dos distribuciones son o no iguales. ¿Podemos rechazar la hipótesis nula de que la media del radio sea la misma, bajo una significancia de <span class="math inline">\(\alpha = 0.05\)</span>?</li>
</ol>
</div>
</section></section>
<section>
<section id="entrega-ii" class="title-slide slide level1 center">
<h1>Clase 8: entrega II</h1>
<p><span style="color:#444442;"><strong>Segunda entrega individual en clase</strong></span></p>
</section>
<section id="entrega-ii-06102023" class="slide level2">
<h2>Entrega II (06/10/2023)</h2>
<p>Se actualizará al inicio de la clase correspondiente.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Esta <span class="hl-green"><strong>entrega ponderará un 15% en la nota final</strong></span></p>
<p>Podrás <span class="hl-yellow"><strong>usar todo el material del curso e internet</strong></span> salvo cualquier aplicación de mensajería o sistema de comunicación: en caso de tener alguna abierta a lo largo de la entrega, aunque no se esté usando, deberás <span class="hl-red"><strong>abandonar la entrega y contará como un 0</strong></span>.</p>
<p>Contarás con aproximadamente 110 minutos, pero <span class="hl-yellow"><strong>deberás realizar la entrega</strong></span>, como tarde, a las <span class="hl-yellow"><strong>12:55</strong></span>. Será <span class="hl-yellow"><strong>obligatorio subir tanto el <code>.qmd</code> como el <code>.html</code></strong></span>: una entrega que no haya podido ser renderizada (es decir, con errores graves) será <span class="hl-red"><strong>penalizada contando solo un 65% de la nota obtenida</strong></span> (si la entrega es perfecta, la nota máxima será un 6.5 sino se adjunta el <code>.html</code> generado).</p>
<p>Te recomiendo practicar bastante y preguntar dudas en clase y/o tutoría ya que <span class="hl-yellow"><strong>irás justo de tiempo</strong></span>, así que necesitas fluidez en los ejercicios.</p>
<p>Si usas un <span class="hl-yellow"><strong>pc de la biblioteca</strong></span> asegúrate de tomarlo con suficiente antelación para <span class="hl-yellow"><strong>instalar todas las librerías necesarias antes de empezar</strong></span> para no perder tiempo.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-9" class="title-slide slide level1 center">
<h1>Clase 9: tidyverse (filas)</h1>
<p><span style="color:#444442;"><strong>Operaciones con filas</strong></span></p>
</section>
<section id="qué-es-tidyverse-3" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizando data.frame</strong></span></li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv)</li>
<li><code>{dplyr}</code>: <span class="hl-yellow"><strong>gramática para depurar</strong></span></li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div>
</div>
<p>También tenemos los paquetes <code>{purrr}</code> para el manejo de listas, <code>{forcast}</code> para cualitativas, <code>{lubridate}</code> para fechas, <code>{readxl}</code> para importar archivos .xls y .xlsx, <code>{rvest}</code> para web scraping y <code>{rmarkdown}</code> para comunicar resultados.</p>
</section>
<section id="preprocesamiento-dplyr" class="slide level2">
<h2>Preprocesamiento: dplyr</h2>
<p>Dentro de <code>{tidyverse}</code> usaremos el paquete <code>{dplyr}</code> para el <span class="hl-yellow"><strong>preprocesamiento y depuración</strong></span> de datos de datos.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/dplyr.png" width="450"></p>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb434"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb434-2"><a href="#cb434-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-3"><a href="#cb434-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-4"><a href="#cb434-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-5"><a href="#cb434-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-6"><a href="#cb434-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-7"><a href="#cb434-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-8"><a href="#cb434-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-9"><a href="#cb434-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-10"><a href="#cb434-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb434-11"><a href="#cb434-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La idea es que el <span class="hl-yellow"><strong>código sea legible</strong></span>, como si fuese una lista de instrucciones que al leerla nos diga de manera muy evidente lo que está haciendo.</p>
</section>
<section id="hipótesis-tidydata" class="slide level2">
<h2>Hipótesis: tidydata</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Toda la depuración que vamos a realizar es sobre la <span class="hl-yellow"><strong>hipótesis de que nuestros datos están en tidydata</strong></span></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
<p>Recuerda que en <code>{tidyverse}</code> será clave el <span class="hl-yellow"><strong>operador pipe (tubería)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): será una <span class="hl-yellow"><strong>tubería que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<p>Vamos a practicar con el dataset <code>starwars</code> del paquete cargado <code>{dplyr}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb435-2"><a href="#cb435-2"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="muestreo" class="slide level2">
<h2>Muestreo</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Una de las operaciones más comunes es lo que se conoce en estadística como <span class="hl-yellow"><strong>muestreo</strong></span>: una <span class="hl-yellow"><strong>selección o filtrado de registros</strong></span> (una submuestra)</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/muestreo.jpeg" width="500"></p>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (por cuotas)</strong></span>: en base a condiciones lógicas sobre los registros (<code>filter()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (intencional/discreccional)</strong></span>: en base a posición (<code>slice()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio simple</strong></span> (<code>slice_sample()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio estratificado</strong></span> (<code>group_by()</code> + <code>slice_sample()</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb436-2"><a href="#cb436-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb437-2"><a href="#cb437-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El más simple es cuando <span class="hl-yellow"><strong>filtramos registros</strong></span> en base a alguna condición lógica: con <code>filter()</code> se seleccionarán solo individuos que cumplan ciertas condiciones (muestreo no aleatorio por condiciones)</p>
<div>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>: <span class="hl-purple"><strong>igual</strong></span> o <span class="hl-yellow"><strong>distinto</strong></span> que (<code>|&gt; filter(variable == "a")</code>)</li>
<li class="fragment"><code>&gt;</code>, <code>&lt;</code>: <span class="hl-purple"><strong>mayor</strong></span> o <span class="hl-yellow"><strong>menor</strong></span> que (<code>|&gt; filter(variable &lt; 3)</code>)</li>
<li class="fragment"><code>&gt;=</code>, <code>&lt;=</code>: <span class="hl-yellow"><strong>mayor o igual</strong></span> o <span class="hl-purple"><strong>menor o igual</strong></span> que (<code>|&gt; filter(variable &gt;= 5)</code>)</li>
<li class="fragment"><code>%in%</code>: valores <span class="hl-yellow"><strong>pertenencen</strong></span> a un listado de opciones (<code>|&gt; filter(variable %in% c("azul", "verde"))</code>)</li>
<li class="fragment"><code>between(variable, val1, val2)</code>: si los valores (continuos) <span class="hl-yellow"><strong>caen dentro de un rango</strong></span> de valores (<code>|&gt; filter(between(variable, 160, 180))</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter-1" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<p>Dichas <span class="hl-yellow"><strong>condiciones lógicas</strong></span> las podemos <span class="hl-yellow"><strong>combinar</strong></span> de diferentes maneras (y, o, o excluyente)</p>

<img data-src="img/tablas_verdad.png" class="r-stretch"><div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que dentro de <code>filter()</code> debe ir siempre algo que devuelva un <span class="hl-green"><strong>vector de valores lógicos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-2" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb438-2"><a href="#cb438-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb439-2"><a href="#cb439-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes de <span class="hl-purple"><strong>ojos marrones</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¿Qué tipo de variable es?</strong></span> –&gt; La variable <code>eye_color</code> es cualitativa así que está representada por textos</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb440"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb440-2"><a href="#cb440-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Leia Or…    150  49   brown      light      brown           19   fema… femin…
 2 Biggs D…    183  84   black      light      brown           24   male  mascu…
 3 Han Solo    180  80   brown      fair       brown           29   male  mascu…
 4 Yoda         66  17   white      green      brown          896   male  mascu…
 5 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…
 6 Lando C…    177  79   black      dark       brown           31   male  mascu…
 7 Arvel C…     NA  NA   brown      fair       brown           NA   male  mascu…
 8 Wicket …     88  20   brown      brown      brown            8   male  mascu…
 9 Quarsh …    183  NA   black      dark       brown           62   &lt;NA&gt;  &lt;NA&gt;  
10 Shmi Sk…    163  NA   black      fair       brown           72   fema… femin…
# ℹ 11 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-3" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb442"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb442-2"><a href="#cb442-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb443-2"><a href="#cb443-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>no tienen ojos marrones</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb444"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb444-1"><a href="#cb444-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb444-2"><a href="#cb444-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">!=</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 6 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 7 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 8 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
 9 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
10 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
# ℹ 56 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-4" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb446"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb446-2"><a href="#cb446-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb447-2"><a href="#cb447-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para … <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan los ojos marrones o azules</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb448-2"><a href="#cb448-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"brown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 3 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 4 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 5 Biggs D…    183    84 black      light      brown           24   male  mascu…
 6 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 7 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
 8 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu…
10 Jek Ton…    180   110 brown      fair       blue            NA   male  mascu…
# ℹ 30 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-5" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb450"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb450-2"><a href="#cb450-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb451-2"><a href="#cb451-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Fíjate que <code>%in%</code> es equivalente a concatenar varios <code>==</code> con una conjunción o (<code>|</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb452"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb452-2"><a href="#cb452-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"blue"</span> <span class="sc">|</span> eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 3 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 4 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 5 Biggs D…    183    84 black      light      brown           24   male  mascu…
 6 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 7 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
 8 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu…
10 Jek Ton…    180   110 brown      fair       blue            NA   male  mascu…
# ℹ 30 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtrar-filas-filter-6" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb454-2"><a href="#cb454-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb455"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb455-1"><a href="#cb455-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb455-2"><a href="#cb455-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para … <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>midan entre 120 y 160 cm</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¿Qué tipo de variable es?</strong></span> –&gt; La variable <code>height</code> es cuantitativa continua así que deberemos filtrar por rangos de valores (intervalos) –&gt; usaremos <code>between()</code></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb456-2"><a href="#cb456-2"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">160</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Leia Org…    150    49 brown      light      brown             19 fema… femin…
2 Mon Moth…    150    NA auburn     fair       blue              48 fema… femin…
3 Nien Nunb    160    68 none       grey       black             NA male  mascu…
4 Watto        137    NA black      blue, grey yellow            NA male  mascu…
5 Gasgano      122    NA none       white, bl… black             NA male  mascu…
6 Cordé        157    NA brown      light      brown             NA fema… femin…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-7" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb458-2"><a href="#cb458-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb459"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb459-2"><a href="#cb459-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb460-2"><a href="#cb460-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yoda          66    17 white      green      brown            896 male  mascu…
2 Wicket S…     88    20 brown      brown      brown              8 male  mascu…
3 Eeth Koth    171    NA black      brown      brown             NA male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-8" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb462"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb462-2"><a href="#cb462-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb463-2"><a href="#cb463-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos, o que tengan más de 60 años</strong></span>? Piénsalo bien: los <span class="hl-yellow"><strong>paréntesis son importantes</strong></span>: no es lo mismo <span class="math inline">\((a+b)*c\)</span> que <span class="math inline">\(a+(b*c)\)</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb464"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb464-2"><a href="#cb464-2"></a>  <span class="fu">filter</span>((eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>) <span class="sc">|</span> birth_year <span class="sc">&gt;</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
 2 Wilhuff…    180    NA auburn, g… fair       blue              64 male  mascu…
 3 Chewbac…    228   112 brown      unknown    blue             200 male  mascu…
 4 Jabba D…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…
 5 Yoda         66    17 white      green      brown            896 male  mascu…
 6 Palpati…    170    75 grey       pale       yellow            82 male  mascu…
 7 Wicket …     88    20 brown      brown      brown              8 male  mascu…
 8 Qui-Gon…    193    89 brown      fair       blue              92 male  mascu…
 9 Finis V…    170    NA blond      fair       blue              91 male  mascu…
10 Quarsh …    183    NA black      dark       brown             62 &lt;NA&gt;  &lt;NA&gt;  
11 Shmi Sk…    163    NA black      fair       brown             72 fema… femin…
12 Mace Wi…    188    84 none       dark       brown             72 male  mascu…
13 Ki-Adi-…    198    82 white      pale       yellow            92 male  mascu…
14 Eeth Ko…    171    NA black      brown      brown             NA male  mascu…
15 Cliegg …    183    NA brown      fair       blue              82 male  mascu…
16 Dooku       193    80 white      fair       brown            102 male  mascu…
17 Bail Pr…    191    NA black      tan        brown             67 male  mascu…
18 Jango F…    183    79 black      tan        brown             66 male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="eliminar-ausentes-drop_na" class="slide level2">
<h2>Eliminar ausentes: drop_na()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb466-2"><a href="#cb466-2"></a>  <span class="fu">retirar_ausentes</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb467-2"><a href="#cb467-2"></a>  <span class="fu">drop_na</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hay un filtro especial para una de las operaciones más habituales en depuración: <span class="hl-yellow"><strong>retirar los ausentes</strong></span>. Para ello podemos usar dentro de un filtro <code>is.na()</code>, que nos devuelve <code>TRUE/FALSE</code> en función de si es ausente, o bien …</p>
<div class="fragment">
<p>Usar <code>drop_na()</code>: si no indicamos variable, elimina registros con ausente en cualquier variable. Más adelante veremos como <span class="hl-yellow"><strong>imputar esos ausentes</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb468"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb468-2"><a href="#cb468-2"></a>  <span class="fu">drop_na</span>(mass, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  name                mass height hair_color 
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;      
1 Luke Skywalker        77    172 blond      
2 C-3PO                 75    167 &lt;NA&gt;       
3 R2-D2                 32     96 &lt;NA&gt;       
4 Darth Vader          136    202 none       
5 Leia Organa           49    150 brown      
6 Owen Lars            120    178 brown, grey
7 Beru Whitesun lars    75    165 brown      </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb470-2"><a href="#cb470-2"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  name                mass height hair_color   
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;        
1 Luke Skywalker        77    172 blond        
2 Darth Vader          136    202 none         
3 Leia Organa           49    150 brown        
4 Owen Lars            120    178 brown, grey  
5 Beru Whitesun lars    75    165 brown        
6 Biggs Darklighter     84    183 black        
7 Obi-Wan Kenobi        77    182 auburn, white</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-9a" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-9-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-9-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-9-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-9-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<p>📝 Selecciona del conjunto de starwars solo los personajes que sean androides o cuyo valor en <code>species</code> sea desconocido</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb472-2"><a href="#cb472-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> <span class="fu">is.na</span>(species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2">
<p>📝 Selecciona del conjunto de starwars solo los personajes cuyo peso esté entre 65 y 90 kg.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb473"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb473-1"><a href="#cb473-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">between</span>(mass, <span class="dv">65</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-3">
<p>📝 Tras limpiar de ausentes en todas las variables, selecciona del conjunto de starwars solo los personajes que sean humanos y que vengan de Tatooine</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb474"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb474-2"><a href="#cb474-2"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb474-3"><a href="#cb474-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-4">
<p>📝 Selecciona del conjunto original de starwars los personajes no humanos, <code>male</code> en el sexo y que midan entre 120 y 170 cm, o los personajes con ojos marrones o rojos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb475"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb475-1"><a href="#cb475-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb475-2"><a href="#cb475-2"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span></span>
<span id="cb475-3"><a href="#cb475-3"></a>            <span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">170</span>)) <span class="sc">|</span></span>
<span id="cb475-4"><a href="#cb475-4"></a>           eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"brown"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-5">
<p>📝 Busca información en la ayuda de la función <code>str_detect()</code> del paquete <code>{stringr}</code> (cargado en <code>{tidyverse}</code>). Consejo: prueba antes las funciones que vayas a usar con algún vector de prueba para poder comprobar su funcionamiento. Tras saber lo que hace, filtra solo aquellos personajes con apellido <code>Skywalker</code></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb476"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">"Skywalker"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb477"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb478"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces nos puede interesar realizar un <span class="hl-yellow"><strong>muestreo no aleatorio discreccional</strong></span>, o lo que es lo mismo, <span class="hl-yellow"><strong>filtrar por posición</strong></span>: con <code>slice(posiciones)</code> podremos seleccionar filas concretas pasando como argumento un <span class="hl-yellow"><strong>vector de índices</strong></span></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb479"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb479-1"><a href="#cb479-1"></a><span class="co"># fila 1</span></span>
<span id="cb479-2"><a href="#cb479-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb479-3"><a href="#cb479-3"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb481"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1"></a><span class="co"># filas de la 7 a la 9</span></span>
<span id="cb481-2"><a href="#cb481-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb481-3"><a href="#cb481-3"></a>  <span class="fu">slice</span>(<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  name               height  mass hair_color
  &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Beru Whitesun lars    165    75 brown     
2 R5-D4                  97    32 &lt;NA&gt;      
3 Biggs Darklighter     183    84 black     </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb483"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb483-1"><a href="#cb483-1"></a><span class="co"># filas 2, 7, 10 y 31</span></span>
<span id="cb483-2"><a href="#cb483-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb483-3"><a href="#cb483-3"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 8
  name             height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO               167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Beru Whitesun l…    165    75 brown      light      blue              47 fema…
3 Obi-Wan Kenobi      182    77 auburn, w… fair       blue-gray         57 male 
4 Qui-Gon Jinn        193    89 brown      fair       blue              92 male </code></pre>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-1" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb485"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb485-1"><a href="#cb485-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb485-2"><a href="#cb485-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb486"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb486-2"><a href="#cb486-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_head(n = ...)</code> y <code>slice_tail(n = ...)</code> podemos obtener la <span class="hl-yellow"><strong>cabecera y cola</strong></span> de la tabla</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb487"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb487-1"><a href="#cb487-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     
2 C-3PO             167    75 &lt;NA&gt;      </code></pre>
</div>
</div>
</div><div class="column" style="width:&quot;50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb489"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb489-1"><a href="#cb489-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Captain Phasma     NA    NA unknown   
2 Padmé Amidala     165    45 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-2" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb491"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb491-1"><a href="#cb491-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb491-2"><a href="#cb491-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb492"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb492-2"><a href="#cb492-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_max()</code> y <code>slice_min()</code> obtenemos la <span class="hl-yellow"><strong>filas con menor/mayor valor de una variable</strong></span> (si empate, todas salvo que <code>with_ties = FALSE</code>) que indicamos en <code>order_by = ...</code></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb493"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb493-1"><a href="#cb493-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(mass, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name          height  mass hair_color
  &lt;chr&gt;          &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Ratts Tyerell     79    15 none      
2 Yoda              66    17 white     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb495"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb495-1"><a href="#cb495-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name        height  mass hair_color
  &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Yarael Poof    264    NA none      
2 Tarfful        234   136 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb497"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb497-1"><a href="#cb497-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb497-2"><a href="#cb497-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb498"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb498-1"><a href="#cb498-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb498-2"><a href="#cb498-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El conocido como <span class="hl-yellow"><strong>muestreo aleatorio simple</strong></span> se basa en <span class="hl-yellow"><strong>seleccionar individuos aleatoriamente</strong></span>, de forma que cada uno tenga ciertas <span class="hl-yellow"><strong>probabilidades</strong></span> de ser seleccionado. Con <code>slice_sample(n = ...)</code> podemos extraer n registros aleatoriamente (a priori equiprobables).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb499"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb499-1"><a href="#cb499-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Lando Ca…    177    79 black      dark       brown             31 male  mascu…
2 Wilhuff …    180    NA auburn, g… fair       blue              64 male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante…</strong></p>
</div>
<div class="callout-content">
<p><span class="hl-yellow"><strong>«Aleatorio» no implica equiprobable</strong></span>: es igual de aleatorio un dado normal que uno trucado. No hay cosas «más aleatorias» que otras, simplemente tienen subyacente distintas leyes de probabilidad.</p>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-1" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb501"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb501-1"><a href="#cb501-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb501-2"><a href="#cb501-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb502"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb502-1"><a href="#cb502-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb502-2"><a href="#cb502-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podremos indicarle la <span class="hl-yellow"><strong>proporción de datos a samplear</strong></span> (en lugar del número) y si queremos que sea <span class="hl-yellow"><strong>con reemplazamiento (que se puedan repetir)</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb503"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb503-1"><a href="#cb503-1"></a><span class="co"># 5% de registros aleatorios con reemplazamiento</span></span>
<span id="cb503-2"><a href="#cb503-2"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb503-3"><a href="#cb503-3"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.05</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Dormé        165    NA brown      light      brown             NA fema… femin…
2 Rugor Na…    206    NA none       green      orange            NA male  mascu…
3 Sly Moore    178    48 none       pale       white             NA &lt;NA&gt;  &lt;NA&gt;  
4 Han Solo     180    80 brown      fair       brown             29 male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-2" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb505"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb505-1"><a href="#cb505-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb505-2"><a href="#cb505-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb506"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb506-1"><a href="#cb506-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb506-2"><a href="#cb506-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Como decíamos, «aleatorio» no es igual que «equiprobable», así que podemos pasarle un <span class="hl-yellow"><strong>vector de probabilidades</strong></span>. Por ejemplo, vamos a forzar que sea muy improbable sacar una fila que no sean las dos primeras</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb507"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb507-1"><a href="#cb507-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb507-2"><a href="#cb507-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky…    172    77 blond      fair       blue              19 male  mascu…
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb509"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb509-1"><a href="#cb509-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb509-2"><a href="#cb509-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky…    172    77 blond      fair       blue              19 male  mascu…
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="paréntesis-sample" class="slide level2">
<h2>Paréntesis: sample()</h2>
<p>La función <code>slice_sample()</code> es simplemente una integración de <code>{tidyverse}</code> de la función básica de <code>R</code> conocida como <code>sample()</code> que nos permite <span class="hl-yellow"><strong>muestrear elementos</strong></span></p>
<div class="fragment">
<p>Por ejemplo, vamos a <span class="hl-yellow"><strong>muestrear 10 tiradas de un dado</strong></span>, indicándole</p>
<ul>
<li><span class="hl-purple"><strong>soporte</strong></span> de nuestra variable aleatorio (valores permitidos en <code>x</code>)</li>
<li><span class="hl-purple"><strong>tamaño</strong></span> muestral (<code>size</code>)</li>
<li><span class="hl-purple"><strong>reemplazamiento</strong></span> (si <code>TRUE</code> entonces pueden salir repetidas, como en el caso del dado)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb511"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb511-1"><a href="#cb511-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 5 4 2 1 1 3 2 5 6</code></pre>
</div>
</div>
</div>
</section>
<section id="paréntesis-sample-1" class="slide level2">
<h2>Paréntesis: sample()</h2>
<p>La opción anterior lo que genera son sucesos de una variable aleatoria <span class="hl-yellow"><strong>equiprobable</strong></span> pero al igual que antes, podemos asignarle un vector de probabilidades o <span class="hl-yellow"><strong>función de masa</strong></span> concreta con el argumento <code>prob = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb513"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb513-1"><a href="#cb513-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">50</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb513-2"><a href="#cb513-2"></a>       <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.05</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2 1 1 6 2 4 3 3 3 2 1 2 5 1 1 1 3 3 1 2 2 1 3 1 2 1 1 1 2 2 1 5 1 2 1 5 1 1
[39] 5 6 6 2 1 1 4 1 1 6 1 1</code></pre>
</div>
</div>
</section>
<section id="paréntesis-sample-2" class="slide level2">
<h2>Paréntesis: sample()</h2>
<p><strong>¿Cómo harías el siguiente enunciado?</strong></p>
<p>&nbsp;</p>
<p>Supongamos que en una ciudad se han estudiado episodios de gripe estacional. Sean las variables aleatorias <span class="math inline">\(X_m\)</span> y <span class="math inline">\(X_p\)</span> tal que <span class="math inline">\(X_m=1\)</span> si la madre tiene gripe, <span class="math inline">\(X_m=0\)</span> si la madre no tiene gripe, <span class="math inline">\(X_p=1\)</span> si el padre tiene gripe y <span class="math inline">\(X_p=0\)</span> si el padre no tiene gripe. El modelo teórico asociado a este tipo de epidemias indica que la distribución conjunta viene dada por <span class="math inline">\(P(X_m = 1, X_p=1)=0.02\)</span>, <span class="math inline">\(P(X_m = 1, X_p=0)=0.08\)</span>, <span class="math inline">\(P(X_m = 1, X_p=0)=0.1\)</span> y <span class="math inline">\(P(X_m = 0, X_p=0)=0.8\)</span></p>
<p><strong>Genera una muestra</strong> de tamaño <span class="math inline">\(n = 1000\)</span> (soporte <code>"10"</code>, <code>"01"</code>, <code>"00"</code> y <code>"11"</code>) haciendo uso de <code>runif()</code> y haciendo uso de <code>sample()</code></p>
</section>
<section id="tu-turno-9b" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-10-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-10-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-10-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-10-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<p>📝 Selecciona solo los personajes que sean humanos y de ojos marrones, para después ordernarlos en altura descendente y peso ascendente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb515"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb515-1"><a href="#cb515-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb515-2"><a href="#cb515-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Human"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb515-3"><a href="#cb515-3"></a>  <span class="fu">arrange</span>(height, <span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-2">
<p>📝 Extrae 3 registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb516"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb516-1"><a href="#cb516-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-3">
<p>📝 Extrae el 10% de los registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb517"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb517-1"><a href="#cb517-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-4">
<p>📝 Extrae aleatoriamente 10 personajes pero de forma que la probabilidad de que salga cada uno sea proporcional a su peso (más pesados, más probable)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb518"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb518-1"><a href="#cb518-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb518-2"><a href="#cb518-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb518-3"><a href="#cb518-3"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">weight_by =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-5">
<p>📝 Selecciona los 3 personajes más mayores.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb519"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb519-1"><a href="#cb519-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(birth_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-10-tidyverse-columnas" class="title-slide slide level1 center">
<h1>Clase 10: tidyverse (filas y columnas)</h1>
<p><span style="color:#444442;"><strong>Operaciones con columnas</strong></span></p>
</section>
<section id="reordenar-filas-arrange" class="slide level2">
<h2>Reordenar filas: arrange()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb520"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb520-1"><a href="#cb520-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">ordenar</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb521"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb521-1"><a href="#cb521-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podemos <span class="hl-yellow"><strong>ordenar filas</strong></span> en función de alguna variable con <code>arrange()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb522"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb522-1"><a href="#cb522-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  name                  height  mass hair_color skin_color  eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Ratts Tyerell             79    15 none       grey, blue  unknown  
2 Yoda                      66    17 white      green       brown    
3 Wicket Systri Warrick     88    20 brown      brown       brown    
4 R2-D2                     96    32 &lt;NA&gt;       white, blue red      
5 R5-D4                     97    32 &lt;NA&gt;       white, red  red      </code></pre>
</div>
</div>
<div class="fragment">
<p>Por <span class="hl-yellow"><strong>defecto de menor a mayor</strong></span> pero podemos <span class="hl-purple"><strong>invertir el orden</strong></span> con <code>desc()</code></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb524"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb524-1"><a href="#cb524-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name         height  mass
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
1 Yarael Poof     264    NA
2 Tarfful         234   136
3 Lama Su         229    88
4 Chewbacca       228   112
5 Roos Tarpals    224    82</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb526"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name                  height  mass
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Ratts Tyerell             79    15
2 Yoda                      66    17
3 Wicket Systri Warrick     88    20
4 R5-D4                     97    32
5 R2-D2                     96    32</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-duplicados-distinct" class="slide level2">
<h2>Eliminar duplicados: distinct()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb528"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">sin_duplicados</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb529"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb529-1"><a href="#cb529-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Muchas veces necesitaremos asegurarnos que no hay duplicados en alguna variable (DNI) y podemos <span class="hl-yellow"><strong>eliminar filas duplicadas</strong></span> con <code>distinct()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb530"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb530-1"><a href="#cb530-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  sex           
  &lt;chr&gt;         
1 male          
2 none          
3 female        
4 hermaphroditic
5 &lt;NA&gt;          </code></pre>
</div>
</div>
<div class="fragment">
<p>Para mantener todas las columnas de la tabla usaremos <code>.keep_all = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb532"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky…    172    77 blond      fair       blue              19 male  mascu…
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
3 Leia Org…    150    49 brown      light      brown             19 fema… femin…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="añadir-filas-bind_rows" class="slide level2">
<h2>Añadir filas: bind_rows()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb534"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb534-1"><a href="#cb534-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">encuadernar_filas</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb535"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb535-1"><a href="#cb535-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos <span class="hl-yellow"><strong>concatenar nuevas filas</strong></span> con <code>bind_rows()</code> con <span class="hl-red"><strong>las nuevas observaciones en tabla</strong></span> (si no cuadran columnas rellena con ausentes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb536"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb536-1"><a href="#cb536-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb536-2"><a href="#cb536-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>), <span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">50</span>))</span>
<span id="cb536-3"><a href="#cb536-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  nombre  edad
  &lt;chr&gt;  &lt;dbl&gt;
1 javi      33
2 laura     50</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb538"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb538-1"><a href="#cb538-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"carlos"</span>, <span class="cn">NA</span>), <span class="st">"cp"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">28045</span>, <span class="dv">28019</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  nombre  edad    cp
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 javi      33    NA
2 laura     50    NA
3 carlos    NA 28045
4 &lt;NA&gt;      NA 28019</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-10a" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-11-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<p>📝 Para saber que valores únicos hay en el color de pelo, elimina duplicados de la variable <code>hair_color</code>, eliminando antes los ausentes de dicha variable.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb540"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb540-2"><a href="#cb540-2"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb540-3"><a href="#cb540-3"></a>  <span class="fu">distinct</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-2">
<p>📝 De los personajes que son humanos y miden más de 160 cm, elimina duplicados en color de ojos, elimina ausentes en peso, selecciona los 3 más altos, y orden de mayor a menor peso. Devuelve la tabla.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb541"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb541-1"><a href="#cb541-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb541-2"><a href="#cb541-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">160</span>) <span class="sc">|&gt;</span> </span>
<span id="cb541-3"><a href="#cb541-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb541-4"><a href="#cb541-4"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb541-5"><a href="#cb541-5"></a>  <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb541-6"><a href="#cb541-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="resumen" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es importantísimo que el código se entienda, por nuestro yo el futuro pero también por la <span class="hl-yellow"><strong>transparencia algorítmica</strong></span> hacia los demás</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 más altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb542" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb542-1"><a href="#cb542-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb542-2"><a href="#cb542-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb542-3"><a href="#cb542-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb542-4"><a href="#cb542-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb542-5"><a href="#cb542-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb542-6"><a href="#cb542-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb543" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb543-1"><a href="#cb543-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb543-2"><a href="#cb543-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb543-3"><a href="#cb543-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb543-4"><a href="#cb543-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb543-5"><a href="#cb543-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb543-6"><a href="#cb543-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-1" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es importantísimo que el código se entienda, por nuestro yo el futuro pero también por la <span class="hl-yellow"><strong>transparencia algorítmica</strong></span> hacia los demás</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 más altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb544" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb544-1"><a href="#cb544-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb544-2"><a href="#cb544-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb544-3"><a href="#cb544-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb544-4"><a href="#cb544-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb544-5"><a href="#cb544-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb544-6"><a href="#cb544-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb545" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb545-1"><a href="#cb545-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb545-2"><a href="#cb545-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb545-3"><a href="#cb545-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb545-4"><a href="#cb545-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb545-5"><a href="#cb545-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb545-6"><a href="#cb545-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-2" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es importantísimo que el código se entienda, por nuestro yo el futuro pero también por la <span class="hl-yellow"><strong>transparencia algorítmica</strong></span> hacia los demás</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 más altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb546" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb546-1"><a href="#cb546-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb546-2"><a href="#cb546-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb546-3"><a href="#cb546-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb546-4"><a href="#cb546-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb546-5"><a href="#cb546-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb546-6"><a href="#cb546-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb547" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb547-1"><a href="#cb547-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb547-2"><a href="#cb547-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb547-3"><a href="#cb547-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb547-4"><a href="#cb547-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb547-5"><a href="#cb547-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb547-6"><a href="#cb547-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-3" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es importantísimo que el código se entienda, por nuestro yo el futuro pero también por la <span class="hl-yellow"><strong>transparencia algorítmica</strong></span> hacia los demás</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 más altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb548" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb548-1"><a href="#cb548-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb548-2"><a href="#cb548-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb548-3"><a href="#cb548-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb548-4"><a href="#cb548-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb548-5"><a href="#cb548-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb548-6"><a href="#cb548-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb549" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb549-1"><a href="#cb549-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb549-2"><a href="#cb549-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb549-3"><a href="#cb549-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb549-4"><a href="#cb549-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb549-5"><a href="#cb549-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb549-6"><a href="#cb549-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-4" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es importantísimo que el código se entienda, por nuestro yo el futuro pero también por la <span class="hl-yellow"><strong>transparencia algorítmica</strong></span> hacia los demás</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 más altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb550" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb550-1"><a href="#cb550-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb550-2"><a href="#cb550-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb550-3"><a href="#cb550-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb550-4"><a href="#cb550-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb550-5"><a href="#cb550-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb550-6"><a href="#cb550-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb551" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb551-1"><a href="#cb551-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb551-2"><a href="#cb551-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb551-3"><a href="#cb551-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb551-4"><a href="#cb551-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb551-5"><a href="#cb551-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb551-6"><a href="#cb551-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-10" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>Vamos a usar el dataset <code>biopsy</code> que podemos encontrar en el agregador de datasets <a href="https://vincentarelbundock.github.io/Rdatasets/index.html" class="uri">https://vincentarelbundock.github.io/Rdatasets/index.html</a>. El <span class="hl-yellow"><strong>dataset contiene datos de 699 pacientes a lo que se les realizó una biopsia de pecho</strong></span>, obteniendo 11 variables (una que hace de id y 10 escalas medidas de 1 a 10)</p>
<p>Puedes ver la documentación en <a href="https://vincentarelbundock.github.io/Rdatasets/doc/MASS/biopsy.html" class="uri">https://vincentarelbundock.github.io/Rdatasets/doc/MASS/biopsy.html</a></p>
<div class="fragment">
<ol type="1">
<li>Crea de cero un <span class="hl-yellow"><strong>informe en Quarto</strong></span> donde hagas los ejercicios posteriores (usa un archivo de estilos para que quede estético)</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><span class="hl-yellow"><strong>Importa el <code>.csv</code> desde la propia web</strong></span> (a través del enlace del archivo)</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Habrás visto que hay 12 columnas en realidad importadas (la primera nos sobra ya que es solo un contador de filas). Vuelve a cargarlo <span class="hl-yellow"><strong>seleccionando en la carga</strong></span> solo desde <code>ID</code> hasta <code>class</code></li>
</ol>
</div>
</section>
<section id="caso-práctico" class="slide level2">
<h2>🐣 Caso práctico</h2>
<ol start="4" type="1">
<li>La variable <code>ID</code> en realidad es un identificador (una cualitativa). Repite la carga <span class="hl-yellow"><strong>especificando los tipos de datos</strong></span>: cualitativa o factor para ID y class, números para el resto de variables)</li>
</ol>
<div class="fragment">
<ol start="5" type="1">
<li>La variable <code>ID</code> debería ser identificador de cada registro: <span class="hl-yellow"><strong>elimina duplicados</strong></span> por dicha variable del dataset anterior.</li>
</ol>
</div>
<div class="fragment">
<ol start="6" type="1">
<li>Del dataset anterior <span class="hl-yellow"><strong>filtra</strong></span> solo los pacientes con tumor maligno y la variable <code>V9</code> con valor 4 o inferior, <span class="hl-yellow"><strong>eliminando además cualquier registro que contenga ausente</strong></span> en cualquiera de la variables.</li>
</ol>
</div>
<div class="fragment">
<ol start="7" type="1">
<li>Del dataset anterior obtén una <span class="hl-yellow"><strong>muestra del 20% de los datos</strong></span> (cada registro puede ser elegido con la misma probabilidad), y <span class="hl-yellow"><strong>órdenalos</strong></span> por de mayor a menor por la variable <code>V1</code> y, en caso de empate, de menor a mayor por la variable <code>V2</code></li>
</ol>
</div>
</section>
<section id="selección-columnas-select" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb552"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb552-1"><a href="#cb552-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb553"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb553-1"><a href="#cb553-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La opción más sencilla para <span class="hl-yellow"><strong>seleccionar variables por nombre</strong></span> es <code>select()</code>, dando como argumentos los nombres de columnas <span class="hl-purple"><strong>sin comillas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb554"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb554-1"><a href="#cb554-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name, hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   name               hair_color   
   &lt;chr&gt;              &lt;chr&gt;        
 1 Luke Skywalker     blond        
 2 C-3PO              &lt;NA&gt;         
 3 R2-D2              &lt;NA&gt;         
 4 Darth Vader        none         
 5 Leia Organa        brown        
 6 Owen Lars          brown, grey  
 7 Beru Whitesun lars brown        
 8 R5-D4              &lt;NA&gt;         
 9 Biggs Darklighter  black        
10 Obi-Wan Kenobi     auburn, white
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-1" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb556"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb556-1"><a href="#cb556-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb557"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb557-1"><a href="#cb557-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La función <code>select()</code> nos permite seleccionar varias variables a la vez, incluso <span class="hl-yellow"><strong>concatenando sus nombres como si fuesen índices numéricos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb558"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb558-1"><a href="#cb558-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>eye_color) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  name           height  mass hair_color skin_color  eye_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Luke Skywalker    172    77 blond      fair        blue     
2 C-3PO             167    75 &lt;NA&gt;       gold        yellow   
3 R2-D2              96    32 &lt;NA&gt;       white, blue red      
4 Darth Vader       202   136 none       white       yellow   </code></pre>
</div>
</div>
<div class="fragment">
<p>Y podemos <span class="hl-yellow"><strong>deseleccionar columnas</strong></span> con <code>-</code> delante</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb560"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb560-1"><a href="#cb560-1"></a>starwars <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="sc">-</span>mass, <span class="sc">-</span>(eye_color<span class="sc">:</span>starships))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  name           height hair_color skin_color 
  &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      
1 Luke Skywalker    172 blond      fair       
2 C-3PO             167 &lt;NA&gt;       gold       
3 R2-D2              96 &lt;NA&gt;       white, blue
4 Darth Vader       202 none       white      </code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-2" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb562"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb562-1"><a href="#cb562-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb563"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb563-1"><a href="#cb563-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tenemos además <span class="hl-yellow"><strong>palabras reservadas</strong></span>: <code>everything()</code> <span class="hl-purple"><strong>todas las variables</strong></span>…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb564"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb564-1"><a href="#cb564-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(mass, homeworld, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 14
   mass homeworld name   height hair_color skin_color eye_color birth_year sex  
  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1    77 Tatooine  Luke …    172 blond      fair       blue            19   male 
2    75 Tatooine  C-3PO     167 &lt;NA&gt;       gold       yellow         112   none 
3    32 Naboo     R2-D2      96 &lt;NA&gt;       white, bl… red             33   none 
4   136 Tatooine  Darth…    202 none       white      yellow          41.9 male 
# ℹ 5 more variables: gender &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<p>…y <code>last_col()</code> para referirnos a <span class="hl-purple"><strong>la última columna</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb566"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb566-1"><a href="#cb566-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>mass, homeworld, <span class="fu">last_col</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  name           height  mass homeworld starships
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;list&gt;   
1 Luke Skywalker    172    77 Tatooine  &lt;chr [2]&gt;
2 C-3PO             167    75 Tatooine  &lt;chr [0]&gt;
3 R2-D2              96    32 Naboo     &lt;chr [0]&gt;
4 Darth Vader       202   136 Tatooine  &lt;chr [1]&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-3" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb568"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb568-1"><a href="#cb568-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb569"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb569-1"><a href="#cb569-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podemos jugar con <span class="hl-yellow"><strong>patrones</strong></span> en el nombre, aquellas que <span class="hl-purple"><strong>comiencen por un prefijo</strong></span> (<code>starts_with()</code>), <span class="hl-purple"><strong>terminen con un sufijo</strong></span> (<code>ends_with()</code>), <span class="hl-purple"><strong>contengan un texto</strong></span> (<code>contains()</code>) o cumplan una <span class="hl-purple"><strong>expresión regular</strong></span> (<code>matches()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb570"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb570-1"><a href="#cb570-1"></a><span class="co"># variables cuyo nombre acaba en "color" y contengan sexo o género</span></span>
<span id="cb570-2"><a href="#cb570-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"color"</span>), <span class="fu">matches</span>(<span class="st">"sex|gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   hair_color    skin_color  eye_color sex    gender   
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;    
 1 blond         fair        blue      male   masculine
 2 &lt;NA&gt;          gold        yellow    none   masculine
 3 &lt;NA&gt;          white, blue red       none   masculine
 4 none          white       yellow    male   masculine
 5 brown         light       brown     female feminine 
 6 brown, grey   light       blue      male   masculine
 7 brown         light       blue      female feminine 
 8 &lt;NA&gt;          white, red  red       none   masculine
 9 black         light       brown     male   masculine
10 auburn, white fair        blue-gray male   masculine
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-4" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb572"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb572-1"><a href="#cb572-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb573"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb573-1"><a href="#cb573-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Incluso podemos <span class="hl-yellow"><strong>seleccionar por rango numérico</strong></span> si tenemos variables con un prefijo y números.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb574-2"><a href="#cb574-2"></a>  <span class="fu">tibble</span>(<span class="st">"semana1"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">115</span>, <span class="dv">141</span>, <span class="dv">232</span>), <span class="st">"semana2"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">NA</span>, <span class="dv">17</span>),</span>
<span id="cb574-3"><a href="#cb574-3"></a>         <span class="st">"semana3"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">162</span>, <span class="cn">NA</span>), <span class="st">"semana4"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">15</span>),</span>
<span id="cb574-4"><a href="#cb574-4"></a>         <span class="st">"semana5"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">262</span>, <span class="dv">190</span>), <span class="st">"semana6"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">23</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con <code>num_range()</code> podemos seleccionar con un prefijo y una secuencia numérica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb575"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb575-1"><a href="#cb575-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">num_range</span>(<span class="st">"semana"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  semana1 semana2 semana3 semana4
    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1     115       7      95      11
2     141      NA     162      19
3     232      17      NA      15</code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-5" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb577"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb577-1"><a href="#cb577-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb578"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb578-1"><a href="#cb578-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos seleccionar columnas por <span class="hl-yellow"><strong>tipo de dato</strong></span> haciendo uso de <code>where()</code> y dentro una función que devuelva un valor lógico de tipo de dato.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb579"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb579-1"><a href="#cb579-1"></a><span class="co"># Solo columnas numéricas o de texto</span></span>
<span id="cb579-2"><a href="#cb579-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 11
   height  mass birth_year name     hair_color skin_color eye_color sex   gender
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; 
 1    172    77       19   Luke Sk… blond      fair       blue      male  mascu…
 2    167    75      112   C-3PO    &lt;NA&gt;       gold       yellow    none  mascu…
 3     96    32       33   R2-D2    &lt;NA&gt;       white, bl… red       none  mascu…
 4    202   136       41.9 Darth V… none       white      yellow    male  mascu…
 5    150    49       19   Leia Or… brown      light      brown     fema… femin…
 6    178   120       52   Owen La… brown, gr… light      blue      male  mascu…
 7    165    75       47   Beru Wh… brown      light      blue      fema… femin…
 8     97    32       NA   R5-D4    &lt;NA&gt;       white, red red       none  mascu…
 9    183    84       24   Biggs D… black      light      brown     male  mascu…
10    182    77       57   Obi-Wan… auburn, w… fair       blue-gray male  mascu…
# ℹ 77 more rows
# ℹ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="clase-11-tidyverse-mutate" class="title-slide slide level1 center">
<h1>Clase 11: tidyverse (columnas)</h1>
<p><span style="color:#444442;"><strong>Columnas. Crear y/o modificar variables. Recodificar variables</strong></span></p>
</section>
<section id="mover-columnas-relocate" class="slide level2">
<h2>Mover columnas: relocate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb581"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb581-1"><a href="#cb581-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb581-2"><a href="#cb581-2"></a>  <span class="fu">recolocar</span>(var1, <span class="at">despues_de =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb582"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb582-1"><a href="#cb582-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb582-2"><a href="#cb582-2"></a>  <span class="fu">relocate</span>(var1, <span class="at">.after =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Para facilitar la <span class="hl-yellow"><strong>recolocación de variables</strong></span> tenemos una función para ello, <code>relocate()</code>, indicándole en <code>.after</code> o <code>.before</code> <span class="hl-purple"><strong>detrás</strong></span> o <span class="hl-purple"><strong>delante</strong></span> de qué columnas queremos moverlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb583"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb583-1"><a href="#cb583-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">relocate</span>(species, <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   species name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Human   Luke S…    172    77 blond      fair       blue            19   male 
 2 Droid   C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 Droid   R2-D2       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 Human   Darth …    202   136 none       white      yellow          41.9 male 
 5 Human   Leia O…    150    49 brown      light      brown           19   fema…
 6 Human   Owen L…    178   120 brown, gr… light      blue            52   male 
 7 Human   Beru W…    165    75 brown      light      blue            47   fema…
 8 Droid   R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Human   Biggs …    183    84 black      light      brown           24   male 
10 Human   Obi-Wa…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="renombrar-rename" class="slide level2">
<h2>Renombrar: rename()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb585"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb585-1"><a href="#cb585-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">renombrar</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb586"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb586-1"><a href="#cb586-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces también podemos querer <span class="hl-yellow"><strong>modificar la «metainformación»</strong></span> de los datos, <span class="hl-yellow"><strong>renombrando columnas</strong></span>. Para ello usaremos de <code>rename()</code> poniendo <span class="hl-purple"><strong>primero el nombre nuevo</strong></span> y luego el <span class="hl-purple"><strong>antiguo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb587"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb587-1"><a href="#cb587-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">peso =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   nombre   altura  peso hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="extraer-columnas-pull" class="slide level2">
<h2>Extraer columnas: pull()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb589"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb589-1"><a href="#cb589-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">retirar</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb590"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb590-1"><a href="#cb590-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si observas la salida de los <code>select()</code> <span class="hl-yellow"><strong>sigue siendo una tabla tibble</strong></span>, ya que nos preserva la naturaleza de nuestros datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb591"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb591-1"><a href="#cb591-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 1
   name              
   &lt;chr&gt;             
 1 Luke Skywalker    
 2 C-3PO             
 3 R2-D2             
 4 Darth Vader       
 5 Leia Organa       
 6 Owen Lars         
 7 Beru Whitesun lars
 8 R5-D4             
 9 Biggs Darklighter 
10 Obi-Wan Kenobi    
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="extraer-columnas-pull-1" class="slide level2">
<h2>Extraer columnas: pull()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb593"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb593-1"><a href="#cb593-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">retirar</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb594"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb594-1"><a href="#cb594-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces no querremos dicha estructura sino <span class="hl-yellow"><strong>extraer literalmente la columna en un vector</strong></span>, algo que podemos hacer con <code>pull()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb595"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb595-1"><a href="#cb595-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Luke Skywalker"        "C-3PO"                 "R2-D2"                
 [4] "Darth Vader"           "Leia Organa"           "Owen Lars"            
 [7] "Beru Whitesun lars"    "R5-D4"                 "Biggs Darklighter"    
[10] "Obi-Wan Kenobi"        "Anakin Skywalker"      "Wilhuff Tarkin"       
[13] "Chewbacca"             "Han Solo"              "Greedo"               
[16] "Jabba Desilijic Tiure" "Wedge Antilles"        "Jek Tono Porkins"     
[19] "Yoda"                  "Palpatine"             "Boba Fett"            
[22] "IG-88"                 "Bossk"                 "Lando Calrissian"     
[25] "Lobot"                 "Ackbar"                "Mon Mothma"           
[28] "Arvel Crynyd"          "Wicket Systri Warrick" "Nien Nunb"            
[31] "Qui-Gon Jinn"          "Nute Gunray"           "Finis Valorum"        
[34] "Jar Jar Binks"         "Roos Tarpals"          "Rugor Nass"           
[37] "Ric Olié"              "Watto"                 "Sebulba"              
[40] "Quarsh Panaka"         "Shmi Skywalker"        "Darth Maul"           
[43] "Bib Fortuna"           "Ayla Secura"           "Dud Bolt"             
[46] "Gasgano"               "Ben Quadinaros"        "Mace Windu"           
[49] "Ki-Adi-Mundi"          "Kit Fisto"             "Eeth Koth"            
[52] "Adi Gallia"            "Saesee Tiin"           "Yarael Poof"          
[55] "Plo Koon"              "Mas Amedda"            "Gregar Typho"         
[58] "Cordé"                 "Cliegg Lars"           "Poggle the Lesser"    
[61] "Luminara Unduli"       "Barriss Offee"         "Dormé"                
[64] "Dooku"                 "Bail Prestor Organa"   "Jango Fett"           
[67] "Zam Wesell"            "Dexter Jettster"       "Lama Su"              
[70] "Taun We"               "Jocasta Nu"            "Ratts Tyerell"        
[73] "R4-P17"                "Wat Tambor"            "San Hill"             
[76] "Shaak Ti"              "Grievous"              "Tarfful"              
[79] "Raymus Antilles"       "Sly Moore"             "Tion Medon"           
[82] "Finn"                  "Rey"                   "Poe Dameron"          
[85] "BB8"                   "Captain Phasma"        "Padmé Amidala"        </code></pre>
</div>
</div>
</section>
<section id="tu-turno-10b" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-12" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-12-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-12-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-12-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-12-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-12-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-12-1">
<p>📝 Filtra el conjunto de personajes y quédate solo con aquellos que en la variable <code>height</code> no tengan un dato ausente. Con los datos obtenidos del filtro anterior, selecciona solo las variables name, height, así como todas aquellas variables que CONTENGAN la palabra color en su nombre.</p>
</div>
<div id="tabset-12-2">
<p>📝 Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano</p>
</div>
<div id="tabset-12-3">
<p>📝 Con los datos obtenidos del ejercicio anterior, coloca la variable de color de pelo justo detrás de la variable de nombres.</p>
</div>
<div id="tabset-12-4">
<p>📝 Con los datos obtenidos del ejercicio anterior, comprueba cuántas modalidades únicas hay en la variable de color de pelo (sin usar <code>unique()</code>).</p>
</div>
<div id="tabset-12-5">
<p>📝 Del conjunto de datos originales, elimina las columnas de tipo lista, y tras ello elimina duplicados en la variable <code>eye_color</code>. Tras eliminar duplicados extrae dicha columna en un vector.</p>
</div>
</div>
</div>
</section>
<section id="caso-práctico-10b" class="slide level2">
<h2>🐣 Caso práctico</h2>
<p>Del conjunto de datos original de starwars, con <span class="hl-yellow"><strong>solo los personajes cuya altura es conocida</strong></span>, <span class="hl-purple"><strong>extrae en un vector dicha variable</strong></span>.</p>
<p>Tras dicha extracción, usa el vector para realizar un <span class="hl-yellow"><strong>muestreo estratificado (por sexo) del 50% de los datos</strong></span>, de manera que (para cada sexo) la <span class="hl-yellow"><strong>probabilidad de cada personaje</strong></span> de ser elegido sea <span class="hl-yellow"><strong>inversamente proporcional a su altura</strong></span> (más bajitos, más opciones)</p>
</section>
<section id="modificar-columnas-mutate" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb597"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb597-1"><a href="#cb597-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb598"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb598-1"><a href="#cb598-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En muchas ocasiones querremos <span class="hl-yellow"><strong>modificar o crear variables</strong></span> con <code>mutate()</code>.</p>
<div class="fragment">
<p>Vamos a crear por ejemplo una nueva variable <code>height_m</code> con la altura en metros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb599"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb599-1"><a href="#cb599-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, height_m &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-1" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb601"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb601-1"><a href="#cb601-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb602"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb602-1"><a href="#cb602-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además con los argumentos opcionales podemos <span class="hl-yellow"><strong>recolocar la columna modificada</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb603"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb603-1"><a href="#cb603-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb603-2"><a href="#cb603-2"></a>  <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb603-3"><a href="#cb603-3"></a>         <span class="at">IMC =</span> mass <span class="sc">/</span> (height_m<span class="sc">^</span><span class="dv">2</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 16
   height_m   IMC name   height  mass hair_color skin_color eye_color birth_year
      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1     1.72  26.0 Luke …    172    77 blond      fair       blue            19  
 2     1.67  26.9 C-3PO     167    75 &lt;NA&gt;       gold       yellow         112  
 3     0.96  34.7 R2-D2      96    32 &lt;NA&gt;       white, bl… red             33  
 4     2.02  33.3 Darth…    202   136 none       white      yellow          41.9
 5     1.5   21.8 Leia …    150    49 brown      light      brown           19  
 6     1.78  37.9 Owen …    178   120 brown, gr… light      blue            52  
 7     1.65  27.5 Beru …    165    75 brown      light      blue            47  
 8     0.97  34.0 R5-D4      97    32 &lt;NA&gt;       white, red red             NA  
 9     1.83  25.1 Biggs…    183    84 black      light      brown           24  
10     1.82  23.2 Obi-W…    182    77 auburn, w… fair       blue-gray       57  
# ℹ 77 more rows
# ℹ 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-2" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb605"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb605-1"><a href="#cb605-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb606"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb606-1"><a href="#cb606-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante…</strong></p>
</div>
<div class="callout-content">
<p>Cuando aplicamos <code>mutate()</code>, debemos de acordarnos que las <span class="hl-yellow"><strong>operaciones se realizan de manera vectorial</strong></span>, elemento a elemento, por lo que la función que usemos dentro debe devolver un vector de igual longitud. En caso contrario, <span class="hl-red"><strong>devolverá una constante</strong></span></p>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb607"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb607-1"><a href="#cb607-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb607-2"><a href="#cb607-2"></a>  <span class="fu">mutate</span>(<span class="at">constante =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   constante name  height  mass hair_color skin_color eye_color birth_year sex  
       &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1      97.3 Luke…    172    77 blond      fair       blue            19   male 
 2      97.3 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   none 
 3      97.3 R2-D2     96    32 &lt;NA&gt;       white, bl… red             33   none 
 4      97.3 Dart…    202   136 none       white      yellow          41.9 male 
 5      97.3 Leia…    150    49 brown      light      brown           19   fema…
 6      97.3 Owen…    178   120 brown, gr… light      blue            52   male 
 7      97.3 Beru…    165    75 brown      light      blue            47   fema…
 8      97.3 R5-D4     97    32 &lt;NA&gt;       white, red red             NA   none 
 9      97.3 Bigg…    183    84 black      light      brown           24   male 
10      97.3 Obi-…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="recategorizar-if_else" class="slide level2">
<h2>Recategorizar: if_else()</h2>
<p>También podemos combinar <code>mutate()</code> con la expresión de control <code>if_else()</code> para <span class="hl-yellow"><strong>recategorizar la variable</strong></span>: si <span class="hl-purple"><strong>se cumple una condición</strong></span>, hace una cosa, en caso contrario otra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb609"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb609-1"><a href="#cb609-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb609-2"><a href="#cb609-2"></a>  <span class="fu">mutate</span>(<span class="at">human =</span> <span class="fu">if_else</span>(species <span class="sc">==</span> <span class="st">"Human"</span>, <span class="st">"Human"</span>, <span class="st">"Not Human"</span>),</span>
<span id="cb609-3"><a href="#cb609-3"></a>         <span class="at">.after =</span> name) <span class="sc">|&gt;</span> </span>
<span id="cb609-4"><a href="#cb609-4"></a>  <span class="fu">select</span>(name<span class="sc">:</span>mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   name               human     height  mass
   &lt;chr&gt;              &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker     Human        172    77
 2 C-3PO              Not Human    167    75
 3 R2-D2              Not Human     96    32
 4 Darth Vader        Human        202   136
 5 Leia Organa        Human        150    49
 6 Owen Lars          Human        178   120
 7 Beru Whitesun lars Human        165    75
 8 R5-D4              Not Human     97    32
 9 Biggs Darklighter  Human        183    84
10 Obi-Wan Kenobi     Human        182    77
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="recategorizar-case_when" class="slide level2">
<h2>Recategorizar: case_when()</h2>
<p>Para <span class="hl-yellow"><strong>recategorizaciones más complejas</strong></span> tenemos <code>case_when()</code>, por ejemplo, para crear una categoría de los personajes en función de su altura.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb611"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb611-1"><a href="#cb611-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb611-2"><a href="#cb611-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb611-3"><a href="#cb611-3"></a>  <span class="fu">mutate</span>(<span class="at">altura =</span> <span class="fu">case_when</span>(height <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">~</span> <span class="st">"enanos"</span>,</span>
<span id="cb611-4"><a href="#cb611-4"></a>                            height <span class="sc">&lt;</span> <span class="dv">160</span> <span class="sc">~</span> <span class="st">"bajito"</span>,</span>
<span id="cb611-5"><a href="#cb611-5"></a>                            height <span class="sc">&lt;</span> <span class="dv">180</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb611-6"><a href="#cb611-6"></a>                            height <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> <span class="st">"alto"</span>,</span>
<span id="cb611-7"><a href="#cb611-7"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"gigante"</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 15
   altura  name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 normal  Luke S…    172    77 blond      fair       blue            19   male 
 2 normal  C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 enanos  R2-D2       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 gigante Darth …    202   136 none       white      yellow          41.9 male 
 5 bajito  Leia O…    150    49 brown      light      brown           19   fema…
 6 normal  Owen L…    178   120 brown, gr… light      blue            52   male 
 7 normal  Beru W…    165    75 brown      light      blue            47   fema…
 8 enanos  R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 alto    Biggs …    183    84 black      light      brown           24   male 
10 alto    Obi-Wa…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 71 more rows
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="tu-turno-11" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-13" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-13-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-13-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-13-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-13-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-13-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-13-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-13-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-13-1">
<p>📝 Selecciona solo las variables nombre, altura y así como todas aquellas variables relacionadas con el color, a la vez que te quedas solo con aquellos que no tengan ausente en la altura.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb613"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb613-1"><a href="#cb613-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb613-2"><a href="#cb613-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb613-3"><a href="#cb613-3"></a>  <span class="fu">drop_na</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-2">
<p>📝 Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb614"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb614-1"><a href="#cb614-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb614-2"><a href="#cb614-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb614-3"><a href="#cb614-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb614-4"><a href="#cb614-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb614-5"><a href="#cb614-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb614-6"><a href="#cb614-6"></a>         <span class="at">color_pelo =</span> hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-3">
<p>📝 Con los datos obtenidos del ejercicio anterior, coloca la variable de color de pelo justo detrás de la variable de nombres.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb615"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb615-1"><a href="#cb615-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb615-2"><a href="#cb615-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb615-3"><a href="#cb615-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb615-4"><a href="#cb615-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb615-5"><a href="#cb615-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb615-6"><a href="#cb615-6"></a>         <span class="at">color_pelo =</span> hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb615-7"><a href="#cb615-7"></a>  <span class="fu">relocate</span>(color_pelo, <span class="at">.after =</span> nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-4">
<p>📝 Con los datos originales, comprueba cuántas modalidades únicas hay en la variable de color de pelo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb616"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb616-1"><a href="#cb616-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb616-2"><a href="#cb616-2"></a>  <span class="fu">distinct</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb616-3"><a href="#cb616-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-5">
<p>📝 Del dataset original, selecciona solo las variables numéricas y de tipo texto. Tras ello define una nueva variable llamada <code>under_18</code> que nos recategorice la variable de edad: <code>TRUE</code> si es menor de edad y <code>FALSE</code> en caso contrario</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb617"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb617-1"><a href="#cb617-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb617-2"><a href="#cb617-2"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character)) <span class="sc">|&gt;</span> </span>
<span id="cb617-3"><a href="#cb617-3"></a>  <span class="fu">mutate</span>(<span class="at">under_18 =</span> birth_year <span class="sc">&lt;</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-6">
<p>📝 Del dataset original, crea una nueva columna llamada <code>auburn</code> (cobrizo/caoba) que nos diga TRUE si el color de pelo contiene dicha palabra y FALSE en caso contrario (reminder <code>str_detect()</code>).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb618"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb618-1"><a href="#cb618-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb618-2"><a href="#cb618-2"></a>  <span class="fu">mutate</span>(<span class="at">auburn =</span> <span class="fu">str_detect</span>(hair_color, <span class="st">"auburn"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-7">
<p>📝 Del dataset original, incluye una columna que calcule el IMC. Tras ello, crea una nueva variable que valga <code>NA</code> si no es humano, <code>delgadez</code> por debajo de 18, <code>normal</code> entre 18 y 30, <code>sobrepeso</code> por encima de 30.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb619"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb619-1"><a href="#cb619-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb619-2"><a href="#cb619-2"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb619-3"><a href="#cb619-3"></a>         <span class="at">IMC_recat =</span> <span class="fu">case_when</span>(species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb619-4"><a href="#cb619-4"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"delgadez"</span>,</span>
<span id="cb619-5"><a href="#cb619-5"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb619-6"><a href="#cb619-6"></a>                               <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"sobrepeso"</span>),</span>
<span id="cb619-7"><a href="#cb619-7"></a>         <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-11" class="slide level2">
<h2>🐣 Caso práctico 11</h2>
<p>Haciendo uso de todo lo aprendido, vamos a proceder a <span class="hl-yellow"><strong>crear una tabla con datos de bebés</strong></span> de tamaño <code>n = 20</code> en donde <span class="hl-yellow"><strong>simulemos el sexo de los bebés y su peso</strong></span></p>
<div class="fragment">
<ol type="1">
<li>Crea un <code>tibble</code> con dos columnas, una llamada <code>id_bebe</code> y otra llamada <code>sexo</code>. En el primer caso debe ir de 1 a 20. En el segundo caso, simula su sexo de manera que haya un 0.5 de probabilidad de <code>chico</code> y 0.5 de <code>chica</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li>Conocido el sexo, crea una tercera columna llamada <code>peso</code> en la que simules dicho valor. Supondremos que para los chicos el peso sigue una distribución <span class="math inline">\(N(\mu = 3.266kg, \sigma = 0.514)\)</span> y que para las chicas sigue una distribución <span class="math inline">\(N(\mu = 3.155kg, \sigma = 0.495)\)</span>.</li>
</ol>
</div>
</section></section>
<section>
<section id="clase-11-tidyverse-mutate" class="title-slide slide level1 center">
<h1>Clase 12: tidyverse (resúmenes)</h1>
<p><span style="color:#444442;"><strong>Resúmenes</strong></span></p>
</section>
<section id="contar-count" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb620"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb620-1"><a href="#cb620-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb621"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb621-1"><a href="#cb621-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora solo hemos transformado o consultado los datos pero no hemos generado estadísticas. Empecemos por lo sencillo: <span class="hl-yellow"><strong>¿cómo contar (frecuencias)?</strong></span></p>
<div class="fragment">
<p>Cuando lo usamos en solitario <code>count()</code> nos devolverá simplemente el número de registros , pero cuando lo usamos con variables <code>count()</code> calcula lo que se conoce como <span class="hl-yellow"><strong>frecuencias</strong></span>: <span class="hl-purple"><strong>número de elementos de cada modalidad</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb622"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb622-1"><a href="#cb622-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</div>
</section>
<section id="contar-count-1" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb624"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb624-1"><a href="#cb624-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb625"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb625-1"><a href="#cb625-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además si pasamos varias variables nos calcula lo que se conoce como una <span class="hl-yellow"><strong>tabla de contigencia</strong></span>. Con <code>sort = TRUE</code> nos devolverá el <span class="hl-purple"><strong>conteo ordenado</strong></span> (más frecuentes primero).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb626"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb626-1"><a href="#cb626-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex, gender, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  sex            gender        n
  &lt;chr&gt;          &lt;chr&gt;     &lt;int&gt;
1 male           masculine    60
2 female         feminine     16
3 none           masculine     5
4 &lt;NA&gt;           &lt;NA&gt;          4
5 hermaphroditic masculine     1
6 none           feminine      1</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb628"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb628-1"><a href="#cb628-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb628-2"><a href="#cb628-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb628-3"><a href="#cb628-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb628-4"><a href="#cb628-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb629"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb629-1"><a href="#cb629-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb629-2"><a href="#cb629-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb629-3"><a href="#cb629-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb629-4"><a href="#cb629-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Una de las <span class="hl-yellow"><strong>funciones más potentes</strong></span> a combinar con las acciones vistas es <code>group_by()</code>, que nos permitirá <span class="hl-yellow"><strong>agrupar nuestros registros</strong></span> previamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb630"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb630-1"><a href="#cb630-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb630-2"><a href="#cb630-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span></span>
<span id="cb630-3"><a href="#cb630-3"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb630-4"><a href="#cb630-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by-1" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb632"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb632-1"><a href="#cb632-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb632-2"><a href="#cb632-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb632-3"><a href="#cb632-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb632-4"><a href="#cb632-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb633"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb633-1"><a href="#cb633-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb633-2"><a href="#cb633-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb633-3"><a href="#cb633-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb633-4"><a href="#cb633-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Cuando apliquemos <code>group_by()</code> es importante entender que <span class="hl-yellow"><strong>NO MODIFICA los datos</strong></span>, sino que nos crea una <span class="hl-yellow"><strong>variable de grupo</strong></span> (subtablas por cada grupo) que modificará las acciones futuras: las <span class="hl-purple"><strong>operaciones se aplicarán a cada subtabla por separado</strong></span></p>
<div class="fragment">
<p>Por ejemplo, imaginemos que queremos extraer el personaje más alto con <code>slice_max()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb634"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb634-1"><a href="#cb634-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yarael P…    264    NA none       white      yellow            NA male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-2" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb636"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb636-1"><a href="#cb636-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb636-2"><a href="#cb636-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb636-3"><a href="#cb636-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb636-4"><a href="#cb636-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb637"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb637-1"><a href="#cb637-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb637-2"><a href="#cb637-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb637-3"><a href="#cb637-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb637-4"><a href="#cb637-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Y si queremos <span class="hl-yellow"><strong>extraer el personaje más alto pero…de cada uno de los sexos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb638"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb638-1"><a href="#cb638-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb638-2"><a href="#cb638-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb638-3"><a href="#cb638-3"></a>  <span class="fu">slice_max</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb638-4"><a href="#cb638-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Taun We      213    NA none       grey       black             NA fema… femin…
2 Jabba De…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…
3 Yarael P…    264    NA none       white      yellow            NA male  mascu…
4 IG-88        200   140 none       metal      red               15 none  mascu…
5 Ric Olié     183    NA brown      fair       blue              NA &lt;NA&gt;  &lt;NA&gt;  
6 Quarsh P…    183    NA black      dark       brown             62 &lt;NA&gt;  &lt;NA&gt;  
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-3" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb640"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb640-1"><a href="#cb640-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb640-2"><a href="#cb640-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb640-3"><a href="#cb640-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb640-4"><a href="#cb640-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb641"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb641-1"><a href="#cb641-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb641-2"><a href="#cb641-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb641-3"><a href="#cb641-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb641-4"><a href="#cb641-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_1.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_2.jpg"></p>
</div>
</div>
<p>La web <a href="https://tidydatatutor.com/" class="uri">https://tidydatatutor.com/</a> permite visualizar las operaciones de <code>{tidyverse}</code> (con el pipe antiguo)</p>
</section>
<section id="agrupar-group_by-4" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb642"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb642-1"><a href="#cb642-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb642-2"><a href="#cb642-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb642-3"><a href="#cb642-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb642-4"><a href="#cb642-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb643"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb643-1"><a href="#cb643-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb643-2"><a href="#cb643-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb643-3"><a href="#cb643-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb643-4"><a href="#cb643-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda siempre <span class="hl-red"><strong>hacer ungroup</strong></span> para eliminar la variable de grupo creada</p>
</div>
</div>
</div>
<div class="fragment">
<p>En la nueva versión de <code>{dplyr}</code> ahora se <span class="hl-yellow"><strong>permite incluir la variable de grupo</strong></span> en la llamada a muchas funciones con el argumento <code>by = ...</code> o <code>.by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb644"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb644-1"><a href="#cb644-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  name                  height  mass hair_color skin_color       eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;    
1 Yarael Poof              264    NA none       white            yellow   
2 IG-88                    200   140 none       metal            red      
3 Taun We                  213    NA none       grey             black    
4 Jabba Desilijic Tiure    175  1358 &lt;NA&gt;       green-tan, brown orange   
5 Ric Olié                 183    NA brown      fair             blue     
6 Quarsh Panaka            183    NA black      dark             brown    </code></pre>
</div>
</div>
</div>
</section>
<section id="fila-a-fila-rowwise" class="slide level2">
<h2>Fila-a-fila: rowwise()</h2>
<p>Una opción muy útil usada antes de una operación también es <code>rowwise()</code>: toda <span class="hl-yellow"><strong>operación que venga después se aplicará en cada fila por separado</strong></span>. Por ejemplo, vamos a definir un conjunto dummy de notas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb646"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb646-1"><a href="#cb646-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"mates"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">7.5</span>, <span class="dv">8</span>, <span class="fl">9.1</span>, <span class="dv">3</span>),</span>
<span id="cb646-2"><a href="#cb646-2"></a>                <span class="st">"lengua"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">6</span>, <span class="fl">6.5</span>, <span class="fl">9.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Si aplicamos la media directamente el valor será idéntico ya que nos ha hecho la media global, pero nos gustaría sacar una <span class="hl-yellow"><strong>media por registro</strong></span>. Para eso usaremos <code>rowwise()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb647"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb647-1"><a href="#cb647-1"></a>notas <span class="sc">|&gt;</span> </span>
<span id="cb647-2"><a href="#cb647-2"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb647-3"><a href="#cb647-3"></a>  <span class="fu">mutate</span>(<span class="at">media_curso =</span> <span class="fu">mean</span>(<span class="fu">c</span>(mates, lengua)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Rowwise: 
  mates lengua media_curso
  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1   7.5    8          7.75
2   8      6          7   
3   9.1    6.5        7.8 
4   3      9.2        6.1 </code></pre>
</div>
</div>
</div>
</section>
<section id="resumir-summarise" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb649"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb649-1"><a href="#cb649-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb650"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb650-1"><a href="#cb650-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último tenemos <code>summarise()</code>, que nos permitirá sacar resúmenes estadísticos. Por ejemplo, vamos a <span class="hl-yellow"><strong>calcular la media de las alturas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb651"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb651-1"><a href="#cb651-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb651-2"><a href="#cb651-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb651-3"><a href="#cb651-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  media_altura
         &lt;dbl&gt;
1         174.</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Fíjate que <code>mutate()</code> devuelve <span class="hl-yellow"><strong>tantas filas como registros originales</strong></span>, mientras que con <code>summarise()</code> calcula un <span class="hl-purple"><strong>nuevo dataset de resumen</strong></span>, solo incluyendo aquello que esté indicado.</p>
</div>
</div>
</div>
</div>
</section>
<section id="resumir-summarise-1" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb653"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb653-1"><a href="#cb653-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb654"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb654-1"><a href="#cb654-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si además esto lo <span class="hl-yellow"><strong>combinamos con la agrupación</strong></span> de <code>group_by()</code> o <code>.by = ...</code>, en pocas líneas de código puedes obtener <span class="hl-purple"><strong>estadísticas desagreagadas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb655"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb655-1"><a href="#cb655-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb655-2"><a href="#cb655-2"></a>  <span class="fu">drop_na</span>(sex, height, mass) <span class="sc">|&gt;</span> </span>
<span id="cb655-3"><a href="#cb655-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height),</span>
<span id="cb655-4"><a href="#cb655-4"></a>            <span class="at">media_peso =</span> <span class="fu">mean</span>(mass),</span>
<span id="cb655-5"><a href="#cb655-5"></a>            <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  sex            media_altura media_peso
  &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt;
1 male                   178.       81.0
2 none                   140        69.8
3 female                 169.       54.7
4 hermaphroditic         175      1358  </code></pre>
</div>
</div>
</section>
<section id="resumir-reframe" class="slide level2">
<h2>Resumir: reframe()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb657"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb657-1"><a href="#cb657-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb658"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb658-1"><a href="#cb658-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">reframe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En el nuevo <code>{dplyr}</code> han incluido <code>reframe()</code> para evitar problemas de <code>summarise()</code> cuando <span class="hl-yellow"><strong>devolvemos más de un valor por variable</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb659"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb659-1"><a href="#cb659-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb659-2"><a href="#cb659-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb659-3"><a href="#cb659-3"></a>  <span class="fu">summarise</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb662"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb662-1"><a href="#cb662-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb662-2"><a href="#cb662-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb662-3"><a href="#cb662-3"></a>  <span class="fu">reframe</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="selectores-across" class="slide level2">
<h2>Selectores: across()</h2>
<p>Un truco es <span class="hl-yellow"><strong>hacer uso de selectores</strong></span> <code>across()</code> y <code>where()</code>. El primero nos permite <span class="hl-purple"><strong>actuar sobre varias columnas por nombre</strong></span> (con <code>mutate()</code> o <code>summarise()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb664"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb664-1"><a href="#cb664-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">medias =</span> <span class="fu">across</span>(height<span class="sc">:</span>mass, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex            medias$height  $mass
  &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;
1 male                    179.   81.0
2 none                    131.   69.8
3 female                  169.   54.7
4 hermaphroditic          175  1358  
5 &lt;NA&gt;                    181.   48  </code></pre>
</div>
</div>
<div class="fragment">
<p>El segundo, <code>where()</code>, nos permite hacer lo mismo pero <span class="hl-yellow"><strong>seleccionando por tipo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb666"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb666-1"><a href="#cb666-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb666-2"><a href="#cb666-2"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(sex, gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  sex            gender    height   mass birth_year
  &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 male           masculine   179.   81.0       85.5
2 none           masculine   140    69.8       53.3
3 female         feminine    169.   54.7       47.2
4 hermaphroditic masculine   175  1358        600  
5 &lt;NA&gt;           &lt;NA&gt;        181.   48         62  
6 none           feminine     96   NaN        NaN  </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-11b" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-14" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-14-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-14-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-14-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-14-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-14-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-14-1">
<p>📝 Calcula cuántos personajes hay de cada especie, ordenados de más a menor frecuencia.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb668"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb668-1"><a href="#cb668-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(species, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-2">
<p>📝 Tras eliminar ausentes en las variables de peso y estatura, añade una nueva variable que nos calcule el IMC de cada personaje, y determina el IMC medio de nuestros personajes desagregada por sexo</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb669"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb669-2"><a href="#cb669-2"></a>  <span class="fu">drop_na</span>(mass, height) <span class="sc">|&gt;</span> </span>
<span id="cb669-3"><a href="#cb669-3"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb669-4"><a href="#cb669-4"></a>  <span class="fu">summarise</span>(<span class="at">IMC_medio =</span> <span class="fu">mean</span>(IMC), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-3">
<p>📝 Obtén el personaje más joven por cada sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb670"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb670-1"><a href="#cb670-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb670-2"><a href="#cb670-2"></a>  <span class="fu">slice_min</span>(birth_year, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-4">
<p>📝 Obtén la edad del personaje más joven y más viejo de cada sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb671"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb671-2"><a href="#cb671-2"></a>  <span class="fu">drop_na</span>(birth_year) <span class="sc">|&gt;</span></span>
<span id="cb671-3"><a href="#cb671-3"></a>  <span class="fu">summarise</span>(<span class="fu">min</span>(birth_year), <span class="fu">max</span>(birth_year), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-5">
<p>📝 Determina la cantidad de personajes en cada década (echa un vistazo a <code>round()</code>, primero sin desagregar y luego desagregado por sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb672"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb672-1"><a href="#cb672-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb672-2"><a href="#cb672-2"></a>  <span class="fu">count</span>(<span class="at">birth_decade =</span> <span class="fu">round</span>(birth_year, <span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-12" class="slide level2">
<h2>🐣 Caso práctico 12</h2>
<p>Vamos antes a hacer un <span class="hl-yellow"><strong>repaso de lo aprendido</strong></span> en <code>{tidyverse}</code></p>
<ol type="1">
<li>Carga la tabla billboard del paquete <code>{tidyr}</code>.</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb673"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb673-1"><a href="#cb673-1"></a>billboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="2" type="1">
<li>Antes de nada, selecciona solo las <span class="hl-yellow"><strong>primeras 52 semanas</strong></span>. Tras ello convierte el dataset a <span class="hl-yellow"><strong>tidydata</strong></span> con los formatos y tipos adecuados para cada variable</li>
</ol>
<div class="fragment">
<ol start="3" type="1">
<li>Extrae la <span class="hl-yellow"><strong>lista de artistas distintos</strong></span> que aparecen en la tabla, incluyendo <span class="hl-yellow"><strong>cuántas veces</strong></span> aparece cada uno.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>Determina <span class="hl-yellow"><strong>cuántas canciones tiene cada artistal</strong></span></li>
</ol>
</div>
</section>
<section id="caso-práctico-12" class="slide level2">
<h2>🐣 Caso práctico 12</h2>
<ol start="5" type="1">
<li>Determina las <span class="hl-yellow"><strong>5 canciones que más semanas</strong></span> aparecen en la lista de éxitos.</li>
</ol>
<div class="fragment">
<ol start="6" type="1">
<li>Determina <span class="hl-yellow"><strong>para cada artista la canción que más semanas</strong></span> aparece en la lista de éxitos.</li>
</ol>
</div>
<div class="fragment">
<ol start="7" type="1">
<li>Determina el <span class="hl-yellow"><strong>artista con más canciones</strong></span> en la lista</li>
</ol>
</div>
<div class="fragment">
<ol start="8" type="1">
<li>Calcula la <span class="hl-yellow"><strong>posición más alta</strong></span> en la que ha estado cada canción. Calcula la posición más alta en la que ha estado un artista</li>
</ol>
</div>
</section>
<section id="caso-práctico-12-1" class="slide level2">
<h2>🐣 Caso práctico 12</h2>
<ol start="9" type="1">
<li>Obtén una <span class="hl-yellow"><strong>tabla resumen</strong></span> con el ranking medio de cada artista (contando solo el ranking más alto alcanzado por sus canciones), así como el número de canciones (distintas) que ha colocado en el top 100.</li>
</ol>
<div class="fragment">
<ol start="10" type="1">
<li>Realiza un muestreo aleatorio estratificado, extrayendo el 50% de los datos pero manteniendo la proporción de datos entre los distintos cuatrimestres.</li>
</ol>
</div>
</section></section>
<section>
<section id="clase-13-funciones" class="title-slide slide level1 center">
<h1>Clase 13: funciones</h1>
<p><span style="color:#444442;"><strong>¿Qué es una función? ¿Cómo se definen? Variables locales vs globales. Uso con mutate.</strong></span></p>
</section>
<section id="creando-funciones" class="slide level2">
<h2>Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>.</p>
<p>¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extraños). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb674"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb674-1"><a href="#cb674-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb674-2"><a href="#cb674-2"></a>  </span>
<span id="cb674-3"><a href="#cb674-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="creando-funciones-1" class="slide level2">
<h2>Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>.</p>
<p>¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<ul>
<li><span class="hl-yellow"><strong>Cuerpo</strong></span> de la función dentro de <code>{ }</code>.</li>
</ul>
<div class="fragment">
<ul>
<li>Finalizamos la función con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb675"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb675-1"><a href="#cb675-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb675-2"><a href="#cb675-2"></a>  </span>
<span id="cb675-3"><a href="#cb675-3"></a>  <span class="co"># Código que queramos ejecutar</span></span>
<span id="cb675-4"><a href="#cb675-4"></a>  código</span>
<span id="cb675-5"><a href="#cb675-5"></a>  </span>
<span id="cb675-6"><a href="#cb675-6"></a>  <span class="co"># Salida</span></span>
<span id="cb675-7"><a href="#cb675-7"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb675-8"><a href="#cb675-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="creando-funciones-2" class="slide level2">
<h2>Creando funciones</h2>
<ul>
<li><p><code>arg1, arg2, ...</code>: serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span>, los argumentos que toma la función para ejecutar el código que tiene dentro</p></li>
<li><p><code>código</code>: líneas de código que queramos que <span class="hl-yellow"><strong>ejecute la función</strong></span>.</p></li>
<li><p><code>return(var_salida)</code>: se introducirán los <span class="hl-yellow"><strong>argumentos de salida</strong></span>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb676"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb676-1"><a href="#cb676-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb676-2"><a href="#cb676-2"></a>  </span>
<span id="cb676-3"><a href="#cb676-3"></a>  <span class="co"># Código que queramos ejecutar</span></span>
<span id="cb676-4"><a href="#cb676-4"></a>  código</span>
<span id="cb676-5"><a href="#cb676-5"></a>  </span>
<span id="cb676-6"><a href="#cb676-6"></a>  <span class="co"># Salida</span></span>
<span id="cb676-7"><a href="#cb676-7"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb676-8"><a href="#cb676-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Todas las variables que definamos dentro de la función son <span class="hl-yellow"><strong>variables locales: solo existirán dentro de la función</strong></span> salvo que especifiquemos lo contrario.</p>
</div>
</div>
</div>
</section>
<section id="creando-funciones-3" class="slide level2">
<h2>Creando funciones</h2>
<p>Veamos un ejemplo muy simple de función para <span class="hl-yellow"><strong>calcular el área de un rectángulo</strong></span>.</p>
<div class="fragment">
<p>Dado que el área de un rectángulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> será justo su <strong>área</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb677"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb677-1"><a href="#cb677-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb677-2"><a href="#cb677-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb677-3"><a href="#cb677-3"></a>  </span>
<span id="cb677-4"><a href="#cb677-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb677-5"><a href="#cb677-5"></a>  <span class="fu">return</span>(area)</span>
<span id="cb677-6"><a href="#cb677-6"></a>  </span>
<span id="cb677-7"><a href="#cb677-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="creando-funciones-4" class="slide level2">
<h2>Creando funciones</h2>
<p>También podemos hacer una definición directa, <strong>sin almacenar variables por el camino</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb678"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb678-1"><a href="#cb678-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb678-2"><a href="#cb678-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb678-3"><a href="#cb678-3"></a>  </span>
<span id="cb678-4"><a href="#cb678-4"></a>  <span class="fu">return</span>(lado_1 <span class="sc">*</span> lado_2)</span>
<span id="cb678-5"><a href="#cb678-5"></a>  </span>
<span id="cb678-6"><a href="#cb678-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="hl-yellow"><strong>¿Cómo aplicar la función?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb679"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb679-1"><a href="#cb679-1"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>) <span class="co"># área de un rectángulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb681"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb681-1"><a href="#cb681-1"></a><span class="fu">calcular_area</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># área de un rectángulo 1 x 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</section>
<section id="argumentos-por-defecto" class="slide level2">
<h2>Argumentos por defecto</h2>
<p>Imagina ahora que nos damos cuenta que el 90% de las veces usamos dicha función para <span class="hl-yellow"><strong>calcular por defecto el área de un cuadrado</strong></span> (es decir, solo necesitamos un lado). Para ello, podemos definir <span class="hl-yellow"><strong>argumentos por defecto</strong></span> en la función: tomarán dicho valor salvo que le asignemos otro.</p>
<p>¿Por qué no asignar <code>lado_2 = lado_1</code> por defecto, para ahorrar líneas de código y tiempo?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb683"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb683-1"><a href="#cb683-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb683-2"><a href="#cb683-2"></a>  </span>
<span id="cb683-3"><a href="#cb683-3"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb683-4"><a href="#cb683-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb683-5"><a href="#cb683-5"></a>  </span>
<span id="cb683-6"><a href="#cb683-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb683-7"><a href="#cb683-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb683-8"><a href="#cb683-8"></a>  </span>
<span id="cb683-9"><a href="#cb683-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="argumentos-por-defecto-1" class="slide level2">
<h2>Argumentos por defecto</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb684"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb684-1"><a href="#cb684-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb684-2"><a href="#cb684-2"></a>  </span>
<span id="cb684-3"><a href="#cb684-3"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb684-4"><a href="#cb684-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb684-5"><a href="#cb684-5"></a>  </span>
<span id="cb684-6"><a href="#cb684-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb684-7"><a href="#cb684-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb684-8"><a href="#cb684-8"></a>  </span>
<span id="cb684-9"><a href="#cb684-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora <span class="hl-yellow"><strong>por defecto</strong></span> el segundo lado será igual al primero (si se lo añadimos usará ambos).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb685"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb685-1"><a href="#cb685-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>) <span class="co"># cuadrado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb687"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb687-1"><a href="#cb687-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">7</span>) <span class="co"># rectángulo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
</div>
</section>
<section id="salida-múltiple" class="slide level2">
<h2>Salida múltiple</h2>
<p>Compliquemos un poco la función y añadamos en la salida los valores de cada lado, etiquetados como <code>lado_1</code> y <code>lado_2</code>, <span class="hl-yellow"><strong>empaquetando la salida en una lista</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb689"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb689-1"><a href="#cb689-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb689-2"><a href="#cb689-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb689-3"><a href="#cb689-3"></a>  </span>
<span id="cb689-4"><a href="#cb689-4"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb689-5"><a href="#cb689-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb689-6"><a href="#cb689-6"></a>  </span>
<span id="cb689-7"><a href="#cb689-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb689-8"><a href="#cb689-8"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2))</span>
<span id="cb689-9"><a href="#cb689-9"></a>  </span>
<span id="cb689-10"><a href="#cb689-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="introducción-a-listas" class="slide level2">
<h2>Introducción a listas</h2>
<p>Veamos un pequeño resumen de los datos que ya conocemos:</p>
<ul>
<li><p><span class="hl-yellow"><strong>vectores</strong></span>: colección de elementos de igual tipo. Pueden ser números, caracteres o valores lógicos, entre otros.</p></li>
<li><p><span class="hl-yellow"><strong>matrices</strong></span>: colección BIDIMENSIONAL de elementos de igual tipo e igual longitud.</p></li>
<li><p><span class="hl-yellow"><strong>data.frame / tibble</strong></span>: colección BIDIMENSIONAL de elementos de igual longitud pero de cualquier tipo.</p></li>
</ul>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>listas</strong></span> serán <span class="hl-purple"><strong>colecciones de variables de diferente tipo y diferente longitud</strong></span>, con estructuras totalmente heterógeneas (incluso una lista puede tener dentro a su vez otra lista).</p>
</div>
</section>
<section id="introducción-a-listas-1" class="slide level2">
<h2>Introducción a listas</h2>
<p>Vamos a crear <span class="hl-yellow"><strong>nuestra primera lista</strong></span> con <code>list()</code> con tres elementos: el nombre de nuestros padres/madres, nuestro lugar de nacimiento y edades de nuestros hermanos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb690"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb690-1"><a href="#cb690-1"></a>variable_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Paloma"</span>, <span class="st">"Gregorio"</span>)</span>
<span id="cb690-2"><a href="#cb690-2"></a>variable_2 <span class="ot">&lt;-</span> <span class="st">"Madrid"</span></span>
<span id="cb690-3"><a href="#cb690-3"></a>variable_3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">26</span>)</span>
<span id="cb690-4"><a href="#cb690-4"></a></span>
<span id="cb690-5"><a href="#cb690-5"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> variable_1, <span class="st">"lugar_nacimiento"</span> <span class="ot">=</span> variable_2,</span>
<span id="cb690-6"><a href="#cb690-6"></a>              <span class="st">"edades_hermanos"</span> <span class="ot">=</span> variable_3)</span>
<span id="cb690-7"><a href="#cb690-7"></a>lista</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nacimiento
[1] "Madrid"

$edades_hermanos
[1] 25 30 26</code></pre>
</div>
</div>
</section>
<section id="introducción-a-listas-2" class="slide level2">
<h2>Introducción a listas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb692"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb692-1"><a href="#cb692-1"></a><span class="fu">length</span>(lista)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Si observas el objeto que hemos definido como lista, su <span class="hl-yellow"><strong>longitud</strong></span> del es de 3 ya que tenemos <strong>guardados tres elementos</strong>: un vector de caracteres (de longitud 2), un caracter (vector de longitud 1), y un vector de números (de longitud 3)</p>
<div class="fragment">
<p>Tenemos guardados elementos de <span class="hl-yellow"><strong>distinto tipo</strong></span> (algo que ya podíamos hacer) pero, además, de <strong>longitudes dispares</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb694"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb694-1"><a href="#cb694-1"></a><span class="fu">dim</span>(lista) <span class="co"># devolverá NULL al no tener dos dimensiones</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb696"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb696-1"><a href="#cb696-1"></a><span class="fu">class</span>(lista) <span class="co"># de tipo lista</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
</section>
<section id="introducción-a-listas-3" class="slide level2">
<h2>Introducción a listas</h2>
<p>Si los juntásemos con un <code>tibble()</code>, al tener distinta longitud, obtendríamos un <span class="hl-red"><strong>error</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb698"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb698-1"><a href="#cb698-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb698-2"><a href="#cb698-2"></a><span class="fu">tibble</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> variable_1,</span>
<span id="cb698-3"><a href="#cb698-3"></a>       <span class="st">"lugar_nacimiento"</span> <span class="ot">=</span> variable_2,</span>
<span id="cb698-4"><a href="#cb698-4"></a>       <span class="st">"edades_hermanos"</span> <span class="ot">=</span> variable_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `tibble()`:
! Tibble columns must have compatible sizes.
• Size 2: Existing data.
• Size 3: Column `edades_hermanos`.
ℹ Only values of size one are recycled.</code></pre>
</div>
</div>
</section>
<section id="introducción-a-listas-4" class="slide level2">
<h2>Introducción a listas</h2>
<ul>
<li><span class="hl-yellow"><strong>Acceder por índice</strong></span>: con el operador <code>[[i]]</code> accedemos al <strong>elemento i-ésimo</strong> de la lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb700"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb700-1"><a href="#cb700-1"></a>lista[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Acceder por nombre</strong></span>: con el operador <code>$nombre_elemento</code> accedemos por su nombre.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb702"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb702-1"><a href="#cb702-1"></a>lista<span class="sc">$</span>progenitores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>En contraposición, el <span class="hl-yellow"><strong>corchete simple</strong></span> nos permite acceder a <span class="hl-yellow"><strong>varios elementos</strong></span> a la vez</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb704"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb704-1"><a href="#cb704-1"></a><span class="co"># Varios elementos</span></span>
<span id="cb704-2"><a href="#cb704-2"></a>lista[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nacimiento
[1] "Madrid"</code></pre>
</div>
</div>
</div>
</section>
<section id="salida-múltiple-1" class="slide level2">
<h2>Salida múltiple</h2>
<p>Antes nos daba igual el orden de los argumentos pero ahora el <span class="hl-yellow"><strong>orden de los argumentos de entrada importa</strong></span>, ya que en la salida incluimos <code>lado_1</code> y <code>lado_2</code>.</p>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recomendación</strong></p>
</div>
<div class="callout-content">
<p>Es altamente recomendable hacer la llamada a la función <span class="hl-yellow"><strong>indicando explícitamente los argumentos</strong></span> para mejorar la <strong>legibilidad e interpretabilidad</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb706"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb706-1"><a href="#cb706-1"></a><span class="co"># Equivalente a calcular_area(5, 3)</span></span>
<span id="cb706-2"><a href="#cb706-2"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 15

$lado_1
[1] 5

$lado_2
[1] 3</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="funciones-generando-conocimiento" class="slide level2">
<h2>Funciones: generando conocimiento</h2>
<p>Parece una tontería lo que hemos hecho pero hemos cruzado una frontera importante: hemos pasado de <span class="hl-yellow"><strong>consumir conocimiento</strong></span> (código de otros paquetes, elaborado por otros/as), a <span class="hl-purple"><strong>generar conocimiento</strong></span>, creando nuestras propias funciones.</p>
</section>
<section id="variables-locales-vs-globales" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Un aspecto importante sobre el que reflexionar con las funciones: ¿qué sucede si <span class="hl-yellow"><strong>nombramos a una variable dentro</strong></span> de una función a la que se nos ha <strong>olvidado asignar</strong> un valor dentro de la misma?</p>
<div class="fragment">
<p>Debemos ser cautos al usar funciones en <code>R</code>, ya que debido a la <span class="hl-yellow"><strong>«regla lexicográfica»</strong></span>, si una variable no se define dentro de la función, <code>R</code> <span class="hl-purple"><strong>buscará dicha variable en el entorno</strong></span> de variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb708"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb708-1"><a href="#cb708-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb708-2"><a href="#cb708-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb708-3"><a href="#cb708-3"></a>    </span>
<span id="cb708-4"><a href="#cb708-4"></a>  <span class="fu">print</span>(x) <span class="co"># No devuelve nada, solo realiza la acción </span></span>
<span id="cb708-5"><a href="#cb708-5"></a>}</span>
<span id="cb708-6"><a href="#cb708-6"></a><span class="fu">funcion_ejemplo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-1" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si una variable <span class="hl-yellow"><strong>ya está definida fuera de la función (entorno global)</strong></span>, y además es usada dentro de cambiando su valor, el valor <span class="hl-yellow"><strong>solo cambia dentro</strong></span> pero <span class="hl-red"><strong>no en el entorno global</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb710"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb710-1"><a href="#cb710-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb710-2"><a href="#cb710-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb710-3"><a href="#cb710-3"></a>    </span>
<span id="cb710-4"><a href="#cb710-4"></a>  x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb710-5"><a href="#cb710-5"></a>  <span class="fu">print</span>(x) <span class="co"># lo que vale dentro</span></span>
<span id="cb710-6"><a href="#cb710-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb711"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb711-1"><a href="#cb711-1"></a><span class="co"># lo que vale dentro</span></span>
<span id="cb711-2"><a href="#cb711-2"></a><span class="fu">funcion_ejemplo</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb713"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb713-1"><a href="#cb713-1"></a><span class="co"># lo que vale fuera</span></span>
<span id="cb713-2"><a href="#cb713-2"></a><span class="fu">print</span>(x) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-2" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si queremos que además de cambiar localmente lo haga <span class="hl-yellow"><strong>globalmente</strong></span> deberemos usar la <span class="hl-yellow"><strong>doble asignación</strong></span> (<code>&lt;&lt;-</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb715"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb715-1"><a href="#cb715-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb715-2"><a href="#cb715-2"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb715-3"><a href="#cb715-3"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb715-4"><a href="#cb715-4"></a>  </span>
<span id="cb715-5"><a href="#cb715-5"></a>  <span class="co"># no cambia globalmente, solo localmente</span></span>
<span id="cb715-6"><a href="#cb715-6"></a>  x <span class="ot">&lt;-</span> <span class="dv">3</span> </span>
<span id="cb715-7"><a href="#cb715-7"></a>  <span class="co"># cambia globalmente</span></span>
<span id="cb715-8"><a href="#cb715-8"></a>  y <span class="ot">&lt;&lt;-</span> <span class="dv">0</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb715-9"><a href="#cb715-9"></a>  </span>
<span id="cb715-10"><a href="#cb715-10"></a>  <span class="fu">print</span>(x)</span>
<span id="cb715-11"><a href="#cb715-11"></a>  <span class="fu">print</span>(y)</span>
<span id="cb715-12"><a href="#cb715-12"></a>}</span>
<span id="cb715-13"><a href="#cb715-13"></a></span>
<span id="cb715-14"><a href="#cb715-14"></a><span class="fu">funcion_ejemplo</span>() <span class="co"># lo que vale dentro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb717"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb717-1"><a href="#cb717-1"></a>x <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb719"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb719-1"><a href="#cb719-1"></a>y <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="tu-turno-9" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-15" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-15-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-15-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-15-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-15-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-15-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-15-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-15-1">
<p>📝 Modifica el código inferior para definir una función llamada <code>funcion_suma</code>, de forma que dados dos elementos, devuelve su suma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb721"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb721-1"><a href="#cb721-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb721-2"><a href="#cb721-2"></a>  suma <span class="ot">&lt;-</span> <span class="co"># código a ejecutar</span></span>
<span id="cb721-3"><a href="#cb721-3"></a>  <span class="fu">return</span>()</span>
<span id="cb721-4"><a href="#cb721-4"></a>}</span>
<span id="cb721-5"><a href="#cb721-5"></a><span class="co"># Aplicamos la función</span></span>
<span id="cb721-6"><a href="#cb721-6"></a><span class="fu">suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb722"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb722-1"><a href="#cb722-1"></a>funcion_suma <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb722-2"><a href="#cb722-2"></a>  suma <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb722-3"><a href="#cb722-3"></a>  <span class="fu">return</span>(suma)</span>
<span id="cb722-4"><a href="#cb722-4"></a>}</span>
<span id="cb722-5"><a href="#cb722-5"></a><span class="fu">funcion_suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-2">
<p>📝 Modifica el código inferior para definir una función llamada <code>funcion_producto</code>, de forma que dados dos elementos, devuelve su producto, pero que por defecto calcule el cuadrado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb723"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb723-1"><a href="#cb723-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb723-2"><a href="#cb723-2"></a>  producto <span class="ot">&lt;-</span> <span class="co"># código de la multiplicación</span></span>
<span id="cb723-3"><a href="#cb723-3"></a>  <span class="fu">return</span>()</span>
<span id="cb723-4"><a href="#cb723-4"></a>}</span>
<span id="cb723-5"><a href="#cb723-5"></a><span class="fu">producto</span>(<span class="dv">3</span>)</span>
<span id="cb723-6"><a href="#cb723-6"></a><span class="fu">producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb724"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb724-1"><a href="#cb724-1"></a>funcion_producto <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">y =</span> x) {</span>
<span id="cb724-2"><a href="#cb724-2"></a>  producto <span class="ot">&lt;-</span> x <span class="sc">*</span> y</span>
<span id="cb724-3"><a href="#cb724-3"></a>  <span class="fu">return</span>(producto)</span>
<span id="cb724-4"><a href="#cb724-4"></a>}</span>
<span id="cb724-5"><a href="#cb724-5"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>)</span>
<span id="cb724-6"><a href="#cb724-6"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-3">
<p>📝 Define una función llamada <code>igualdad_nombres</code> que, dados dos nombres, nos diga si son iguales o no. Hazlo considerando importantes las mayúsculas, y sin que importen las mayúsculas. Echa un vistazo al paquete <code>{stringr}</code>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb725"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb725-1"><a href="#cb725-1"></a><span class="co"># Distinguiendo mayúsculas</span></span>
<span id="cb725-2"><a href="#cb725-2"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb725-3"><a href="#cb725-3"></a>  <span class="fu">return</span>(persona_1 <span class="sc">==</span> persona_2)</span>
<span id="cb725-4"><a href="#cb725-4"></a>}</span>
<span id="cb725-5"><a href="#cb725-5"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb725-6"><a href="#cb725-6"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Lucía"</span>)</span>
<span id="cb725-7"><a href="#cb725-7"></a></span>
<span id="cb725-8"><a href="#cb725-8"></a><span class="co"># Sin importar mayúsculas</span></span>
<span id="cb725-9"><a href="#cb725-9"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb725-10"><a href="#cb725-10"></a>  <span class="fu">return</span>(<span class="fu">toupper</span>(persona_1) <span class="sc">==</span> <span class="fu">toupper</span>(persona_2))</span>
<span id="cb725-11"><a href="#cb725-11"></a>}</span>
<span id="cb725-12"><a href="#cb725-12"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb725-13"><a href="#cb725-13"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Lucía"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-4">
<p>📝 Crea una función llamada <code>calculo_IMC</code> que, dados dos argumentos (peso y estatura en metros) y un nombre, devuelva una lista con el IMC y el nombre.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb726"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb726-1"><a href="#cb726-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura) {</span>
<span id="cb726-2"><a href="#cb726-2"></a>  </span>
<span id="cb726-3"><a href="#cb726-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre, <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(estatura<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb726-4"><a href="#cb726-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-5">
<p>📝 Repite el ejercicio anterior pero con otro argumento opcional que se llame unidades (por defecto, <code>unidades = "metros"</code>). Desarrolla la función de forma que haga lo correcto si <code>unidades = "metros"</code> y si <code>unidades = "centímetros"</code>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb727"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb727-1"><a href="#cb727-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura, <span class="at">unidades =</span> <span class="st">"metros"</span>) {</span>
<span id="cb727-2"><a href="#cb727-2"></a>  </span>
<span id="cb727-3"><a href="#cb727-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre,</span>
<span id="cb727-4"><a href="#cb727-4"></a>              <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(<span class="fu">if_else</span>(unidades <span class="sc">==</span> <span class="st">"metros"</span>, estatura, estatura<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb727-5"><a href="#cb727-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-6">
<p>📝 Crea un tibble ficticio de 7 personas, con tres variables (inventa nombre, y simula peso, estatura en centímetros), y aplica la función definida de forma que obtengamos una cuarta columna con su IMC.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb728"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb728-1"><a href="#cb728-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb728-2"><a href="#cb728-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombres"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"laura"</span>,</span>
<span id="cb728-3"><a href="#cb728-3"></a>                       <span class="st">"ana"</span>, <span class="st">"carlos"</span>, <span class="st">"leo"</span>, <span class="cn">NA</span>),</span>
<span id="cb728-4"><a href="#cb728-4"></a>         <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">70</span>, <span class="at">sd =</span> <span class="dv">1</span>),</span>
<span id="cb728-5"><a href="#cb728-5"></a>         <span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">168</span>, <span class="at">sd =</span> <span class="dv">5</span>))</span>
<span id="cb728-6"><a href="#cb728-6"></a></span>
<span id="cb728-7"><a href="#cb728-7"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb728-8"><a href="#cb728-8"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> <span class="fu">calculo_IMC</span>(nombres, peso, estatura, <span class="at">unidades =</span> <span class="st">"centímetros"</span>)<span class="sc">$</span>IMC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso13" class="slide level2">
<h2>🐣 Caso práctico 13: funciones</h2>
<p>Define una función llamada <code>conversor_temperatura</code> que, dada una temperatura en Fahrenheit, Celsius o Kelvin, la convierta a cualquiera de las otras (piensa que argumentos necesita el usuario). Aplica la función a la columna <code>Temp</code> del conjunto <code>airquality</code>, e incorpórala al fichero en una nueva columna <code>Temp_Celsius</code>.</p>
</section></section>
<section>
<section id="clase-14-concurso" class="title-slide slide level1 center">
<h1>Clase 14: concurso</h1>

</section>
<section class="slide level2">

</section></section>
<section>
<section id="section" class="title-slide slide level1 center">
<h1>…</h1>

</section>
<section id="section-1" class="slide level2">
<h2>…</h2>
</section></section>
<section>
<section id="clase-13-summary" class="title-slide slide level1 center">
<h1>Clase 13: resúmenes y grupos</h1>
<p><span style="color:#444442;"><strong>Summarise y group_by(). Contar y resumir: estadísticas desagregadas por factores/grupos.</strong></span></p>
</section>
<section id="section-2" class="slide level2">
<h2>…</h2>
</section></section>
<section>
<section id="entrega-iii" class="title-slide slide level1 center">
<h1>Clase 14: entrega III</h1>
<p><span style="color:#444442;"><strong>Segunda entrega individual en clase</strong></span></p>
</section>
<section id="entrega-iii-27102023" class="slide level2">
<h2>Entrega III (27/10/2023)</h2>
<p>Se actualizará al inicio de la clase correspondiente.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Esta <span class="hl-green"><strong>entrega ponderará un 20% en la nota final</strong></span></p>
<p>Podrás <span class="hl-yellow"><strong>usar todo el material del curso e internet</strong></span> salvo cualquier aplicación de mensajería o sistema de comunicación: en caso de tener alguna abierta a lo largo de la entrega, aunque no se esté usando, deberás <span class="hl-red"><strong>abandonar la entrega y contará como un 0</strong></span>.</p>
<p>Contarás con aproximadamente 110 minutos, pero <span class="hl-yellow"><strong>deberás realizar la entrega</strong></span>, como tarde, a las <span class="hl-yellow"><strong>12:55</strong></span>. Será <span class="hl-yellow"><strong>obligatorio subir tanto el <code>.qmd</code> como el <code>.html</code></strong></span>: una entrega que no haya podido ser renderizada (es decir, con errores graves) será <span class="hl-red"><strong>penalizada contando solo un 65% de la nota obtenida</strong></span> (si la entrega es perfecta, la nota máxima será un 6.5 sino se adjunta el <code>.html</code> generado).</p>
<p>Te recomiendo practicar bastante y preguntar dudas en clase y/o tutoría ya que <span class="hl-yellow"><strong>irás justo de tiempo</strong></span>, así que necesitas fluidez en los ejercicios.</p>
<p>Si usas un <span class="hl-yellow"><strong>pc de la biblioteca</strong></span> asegúrate de tomarlo con suficiente antelación para <span class="hl-yellow"><strong>instalar todas las librerías necesarias antes de empezar</strong></span> para no perder tiempo.</p>
</div>
</div>
</div>
<div class="footer footer-default">
<p><a href="..."><strong>Javier Álvarez Liébana</strong></a> • Grado en Ciencia de Datos Aplicada (UCM) • curso 2023-2024</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'chalkboard': {"buttons":true},
'multiplex': {"secret":null,"id":"1b0ff0461e955904","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>